/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={3494:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Any:()=>pt,BaseBlock:()=>H,BaseStringBlock:()=>P,BitString:()=>Be,BmpString:()=>Ze,Boolean:()=>Ne,CharacterString:()=>ot,Choice:()=>gt,Constructed:()=>we,DATE:()=>ut,DateTime:()=>dt,Duration:()=>mt,EndOfContent:()=>qe,Enumerated:()=>Pe,GeneralString:()=>at,GeneralizedTime:()=>ct,GraphicString:()=>st,HexBlock:()=>x,IA5String:()=>rt,Integer:()=>De,Null:()=>ke,NumericString:()=>Xe,ObjectIdentifier:()=>Le,OctetString:()=>xe,Primitive:()=>ge,PrintableString:()=>et,RawData:()=>yt,RelativeObjectIdentifier:()=>_e,Repeated:()=>bt,Sequence:()=>je,Set:()=>Me,TIME:()=>ft,TeletexString:()=>tt,TimeOfDay:()=>ht,UTCTime:()=>lt,UniversalString:()=>Ye,Utf8String:()=>We,ValueBlock:()=>B,VideotexString:()=>nt,ViewWriter:()=>l,VisibleString:()=>it,compareSchema:()=>vt,fromBER:()=>ye,verifySchema:()=>wt});var r=n(2043),s=n(1225);function i(){if("undefined"==typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function a(e){let t=0,n=0;for(let n=0;n<e.length;n++)t+=e[n].byteLength;const r=new Uint8Array(t);for(let t=0;t<e.length;t++){const s=e[t];r.set(new Uint8Array(s),n),n+=s.byteLength}return r.buffer}function o(e,t,n,r){return t instanceof Uint8Array?t.byteLength?n<0?(e.error="Wrong parameter: inputOffset less than zero",!1):r<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-n-r<0&&(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",1)):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class l{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return a(this.items)}}const c=[new Uint8Array([1])],u="0123456789",h="name",d="valueHexView",m="isHexOnly",f="idBlock",p="tagClass",g="tagNumber",b="isConstructed",y="fromBER",v="toBER",w="local",S="",q=new ArrayBuffer(0),k=new Uint8Array(0),A="EndOfContent",N="OCTET STRING",C="BIT STRING";function x(e){var t;return(t=class extends e{constructor(...e){var t;super(...e);const n=e[0]||{};this.isHexOnly=null!==(t=n.isHexOnly)&&void 0!==t&&t,this.valueHexView=n.valueHex?r.vJ.toUint8Array(n.valueHex):k}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,n){const r=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!o(this,r,t,n))return-1;const s=t+n;return this.valueHexView=r.subarray(t,s),this.valueHexView.length?(this.blockLength=n,s):(this.warnings.push("Zero buffer length"),t)}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",q)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:r.ep.ToHex(this.valueHexView)}}}).NAME="hexBlock",t}class E{constructor({blockLength:e=0,error:t=S,warnings:n=[],valueBeforeDecode:s=k}={}){this.blockLength=e,this.error=t,this.warnings=n,this.valueBeforeDecodeView=r.vJ.toUint8Array(s)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:r.ep.ToHex(this.valueBeforeDecodeView)}}}E.NAME="baseBlock";class B extends E{fromBER(e,t,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}B.NAME="valueBlock";class I extends(x(E)){constructor({idBlock:e={}}={}){var t,n,s,i;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?r.vJ.toUint8Array(e.valueHex):k,this.tagClass=null!==(n=e.tagClass)&&void 0!==n?n:-1,this.tagNumber=null!==(s=e.tagNumber)&&void 0!==s?s:-1,this.isConstructed=null!==(i=e.isConstructed)&&void 0!==i&&i):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",q}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,n[0]=t}return n.buffer}if(!this.isHexOnly){const n=s.lL(this.tagNumber,7),r=new Uint8Array(n),i=n.byteLength,a=new Uint8Array(i+1);if(a[0]=31|t,!e){for(let e=0;e<i-1;e++)a[e+1]=128|r[e];a[i]=r[i-1]}return a.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=31|t,!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)n[t+1]=128|e[t];n[this.valueHexView.byteLength]=e[e.length-1]}return n.buffer}fromBER(e,t,n){const i=r.vJ.toUint8Array(e);if(!o(this,i,t,n))return-1;const a=i.subarray(t,t+n);if(0===a.length)return this.error="Zero buffer length",-1;switch(192&a[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&a[0]),this.isHexOnly=!1;const l=31&a[0];if(31!==l)this.tagNumber=l,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),n=255;for(;128&a[e];){if(t[e-1]=127&a[e],e++,e>=a.length)return this.error="End of input reached before message was fully decoded",-1;if(e===n){n+=255;const e=new Uint8Array(n);for(let n=0;n<t.length;n++)e[n]=t[n];t=this.valueHexView=new Uint8Array(n)}}this.blockLength=e+1,t[e-1]=127&a[e];const r=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=t[n];t=this.valueHexView=new Uint8Array(e),t.set(r),this.blockLength<=9?this.tagNumber=s.r9(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}I.NAME="identificationBlock";class V extends E{constructor({lenBlock:e={}}={}){var t,n,r;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(n=e.longFormUsed)&&void 0!==n&&n,this.length=null!==(r=e.length)&&void 0!==r?r:0}fromBER(e,t,n){const i=r.vJ.toUint8Array(e);if(!o(this,i,t,n))return-1;const a=i.subarray(t,t+n);if(0===a.length)return this.error="Zero buffer length",-1;if(255===a[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===a[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&a[0]),!1===this.longFormUsed)return this.length=a[0],this.blockLength=1,t+this.blockLength;const l=127&a[0];if(l>8)return this.error="Too big integer",-1;if(l+1>a.length)return this.error="End of input reached before message was fully decoded",-1;const c=t+1,u=i.subarray(c,c+l);return 0===u[l-1]&&this.warnings.push("Needlessly long encoded length"),this.length=s.r9(u,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=l+1,t+this.blockLength}toBER(e=!1){let t,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&(n=new Uint8Array(t),n[0]=128),t;if(this.longFormUsed){const r=s.lL(this.length,8);if(r.byteLength>127)return this.error="Too big length",q;if(t=new ArrayBuffer(r.byteLength+1),e)return t;const i=new Uint8Array(r);n=new Uint8Array(t),n[0]=128|r.byteLength;for(let e=0;e<r.byteLength;e++)n[e+1]=i[e];return t}return t=new ArrayBuffer(1),!1===e&&(n=new Uint8Array(t),n[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}V.NAME="lengthBlock";const O={};class H extends E{constructor({name:e=S,optional:t=!1,primitiveSchema:n,...r}={},s){super(r),this.name=e,this.optional=t,n&&(this.primitiveSchema=n),this.idBlock=new I(r),this.lenBlock=new V(r),this.valueBlock=s?new s(r):new B(r)}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,t){const n=t||new l;t||D(this);const r=this.idBlock.toBER(e);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const r=this.lenBlock.toBER(e);n.write(r),n.write(t)}return t?q:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():r.ep.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${r.ep.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const t=this.toBER(),n=e.toBER();return s.dN(t,n)}}function D(e){if(e instanceof O.Constructed)for(const t of e.valueBlock.value)D(t)&&(e.lenBlock.isIndefiniteForm=!0);return!!e.lenBlock.isIndefiniteForm}H.NAME="BaseBlock";class P extends H{constructor({value:e=S,...t}={},n){super(t,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}P.NAME="BaseStringBlock";class T extends(x(B)){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}var R,L,U,$,_,j,M,K,J,F,z,W,G,Z,Q,Y,X,ee,te,ne,re,se,ie,ae,oe,le,ce,ue,he,de,me,fe,pe;T.NAME="PrimitiveValueBlock";class ge extends H{constructor(e={}){super(e,T),this.idBlock.isConstructed=!1}}function be(e,t=0,n=e.length){const r=t;let s=new H({},B);const i=new E;if(!o(i,e,t,n))return s.error=i.error,{offset:-1,result:s};if(!e.subarray(t,t+n).length)return s.error="Zero buffer length",{offset:-1,result:s};let a=s.idBlock.fromBER(e,t,n);if(s.idBlock.warnings.length&&s.warnings.concat(s.idBlock.warnings),-1===a)return s.error=s.idBlock.error,{offset:-1,result:s};if(t=a,n-=s.idBlock.blockLength,a=s.lenBlock.fromBER(e,t,n),s.lenBlock.warnings.length&&s.warnings.concat(s.lenBlock.warnings),-1===a)return s.error=s.lenBlock.error,{offset:-1,result:s};if(t=a,n-=s.lenBlock.blockLength,!s.idBlock.isConstructed&&s.lenBlock.isIndefiniteForm)return s.error="Indefinite length form used for primitive encoding form",{offset:-1,result:s};let l=H;if(1===s.idBlock.tagClass){if(s.idBlock.tagNumber>=37&&!1===s.idBlock.isHexOnly)return s.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:s};switch(s.idBlock.tagNumber){case 0:if(s.idBlock.isConstructed&&s.lenBlock.length>0)return s.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:s};l=O.EndOfContent;break;case 1:l=O.Boolean;break;case 2:l=O.Integer;break;case 3:l=O.BitString;break;case 4:l=O.OctetString;break;case 5:l=O.Null;break;case 6:l=O.ObjectIdentifier;break;case 10:l=O.Enumerated;break;case 12:l=O.Utf8String;break;case 13:l=O.RelativeObjectIdentifier;break;case 14:l=O.TIME;break;case 15:return s.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:s};case 16:l=O.Sequence;break;case 17:l=O.Set;break;case 18:l=O.NumericString;break;case 19:l=O.PrintableString;break;case 20:l=O.TeletexString;break;case 21:l=O.VideotexString;break;case 22:l=O.IA5String;break;case 23:l=O.UTCTime;break;case 24:l=O.GeneralizedTime;break;case 25:l=O.GraphicString;break;case 26:l=O.VisibleString;break;case 27:l=O.GeneralString;break;case 28:l=O.UniversalString;break;case 29:l=O.CharacterString;break;case 30:l=O.BmpString;break;case 31:l=O.DATE;break;case 32:l=O.TimeOfDay;break;case 33:l=O.DateTime;break;case 34:l=O.Duration;break;default:{const e=s.idBlock.isConstructed?new O.Constructed:new O.Primitive;e.idBlock=s.idBlock,e.lenBlock=s.lenBlock,e.warnings=s.warnings,s=e}}}else l=s.idBlock.isConstructed?O.Constructed:O.Primitive;return s=function(e,t){if(e instanceof t)return e;const n=new t;return n.idBlock=e.idBlock,n.lenBlock=e.lenBlock,n.warnings=e.warnings,n.valueBeforeDecodeView=e.valueBeforeDecodeView,n}(s,l),a=s.fromBER(e,t,s.lenBlock.isIndefiniteForm?n:s.lenBlock.length),s.valueBeforeDecodeView=e.subarray(r,r+s.blockLength),{offset:a,result:s}}function ye(e){if(!e.byteLength){const e=new H({},B);return e.error="Input buffer has zero length",{offset:-1,result:e}}return be(r.vJ.toUint8Array(e).slice(),0,e.byteLength)}R=ge,O.Primitive=R,ge.NAME="PRIMITIVE";class ve extends B{constructor({value:e=[],isIndefiniteForm:t=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,n){const s=r.vJ.toUint8Array(e);if(!o(this,s,t,n))return-1;if(this.valueBeforeDecodeView=s.subarray(t,t+n),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let i=t;for(;(this.isIndefiniteForm?1:n)>0;){const e=be(s,i,n);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(i=e.offset,this.blockLength+=e.result.blockLength,n-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===A)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===A?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,t){const n=t||new l;for(let t=0;t<this.value.length;t++)this.value[t].toBER(e,n);return t?q:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}ve.NAME="ConstructedValueBlock";class we extends H{constructor(e={}){super(e,ve),this.idBlock.isConstructed=!0}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const t of this.valueBlock.value)e.push(t.toString("ascii").split("\n").map((e=>`  ${e}`)).join("\n"));const t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}L=we,O.Constructed=L,we.NAME="CONSTRUCTED";class Se extends B{fromBER(e,t,n){return t}toBER(e){return q}}Se.override="EndOfContentValueBlock";class qe extends H{constructor(e={}){super(e,Se),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}U=qe,O.EndOfContent=U,qe.NAME=A;class ke extends H{constructor(e={}){super(e,B),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e,t){const n=new ArrayBuffer(2);if(!e){const e=new Uint8Array(n);e[0]=5,e[1]=0}return t&&t.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}$=ke,O.Null=$,ke.NAME="NULL";class Ae extends(x(B)){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=r.vJ.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,n){const i=r.vJ.toUint8Array(e);return o(this,i,t,n)?(this.valueHexView=i.subarray(t,t+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,s.Gc.call(this),this.blockLength=n,t+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}Ae.NAME="BooleanValueBlock";class Ne extends H{constructor(e={}){super(e,Ae),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}_=Ne,O.Boolean=_,Ne.NAME="BOOLEAN";class Ce extends(x(ve)){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=ve.prototype.fromBER.call(this,e,t,n),-1===r)return r;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===A){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(t!==N)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,t,n),this.blockLength=n;return r}toBER(e,t){return this.isConstructed?ve.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}Ce.NAME="OctetStringValueBlock";class xe extends H{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,s;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(s=n.value)||void 0===s?void 0:s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},Ce),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const r=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+n);try{if(r.byteLength){const e=be(r,0,r.byteLength);-1!==e.offset&&e.offset===n&&(this.valueBlock.value=[e.result])}}catch(e){}}return super.fromBER(e,t,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?we.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${r.ep.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof xe&&e.push(t.valueBlock.valueHexView);return r.vJ.concat(e)}}j=xe,O.OctetString=j,xe.NAME=N;class Ee extends(x(ve)){constructor({unusedBits:e=0,isConstructed:t=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,n){if(!n)return t;let s=-1;if(this.isConstructed){if(s=ve.prototype.fromBER.call(this,e,t,n),-1===s)return s;for(const e of this.value){const t=e.constructor.NAME;if(t===A){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(t!==C)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const n=e.valueBlock;if(this.unusedBits>0&&n.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=n.unusedBits}return s}const i=r.vJ.toUint8Array(e);if(!o(this,i,t,n))return-1;const a=i.subarray(t,t+n);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const e=a.subarray(1);try{if(e.byteLength){const t=be(e,0,e.byteLength);-1!==t.offset&&t.offset===n-1&&(this.value=[t.result])}}catch(e){}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,t+n}toBER(e,t){if(this.isConstructed)return ve.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return q;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Ee.NAME="BitStringValueBlock";class Be extends H{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,s;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(s=n.value)||void 0===s?void 0:s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},Ee),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return we.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const n of t)e.push(n.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}function Ie(e,t){const n=new Uint8Array([0]),r=new Uint8Array(e),i=new Uint8Array(t);let a=r.slice(0);const o=a.length-1,l=i.slice(0),c=l.length-1;let u=0,h=0;for(let e=c<o?o:c;e>=0;e--,h++)u=1==h<l.length?a[o-h]+l[c-h]+n[0]:a[o-h]+n[0],n[0]=u/10,1==h>=a.length?a=s.Ir(new Uint8Array([u%10]),a):a[o-h]=u%10;return n[0]>0&&(a=s.Ir(n,a)),a}function Ve(e){if(e>=c.length)for(let t=c.length;t<=e;t++){const e=new Uint8Array([0]);let n=c[t-1].slice(0);for(let t=n.length-1;t>=0;t--){const r=new Uint8Array([(n[t]<<1)+e[0]]);e[0]=r[0]/10,n[t]=r[0]%10}e[0]>0&&(n=s.Ir(e,n)),c.push(n)}return c[e]}function Oe(e,t){let n=0;const r=new Uint8Array(e),s=new Uint8Array(t),i=r.slice(0),a=i.length-1,o=s.slice(0),l=o.length-1;let c,u=0;for(let e=l;e>=0;e--,u++)c=i[a-u]-o[l-u]-n,1==c<0?(n=1,i[a-u]=c+10):(n=0,i[a-u]=c);if(n>0)for(let e=a-l+1;e>=0;e--,u++){if(c=i[a-u]-n,!(c<0)){n=0,i[a-u]=c;break}n=1,i[a-u]=c+10}return i.slice()}M=Be,O.BitString=M,Be.NAME=C;class He extends(x(B)){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=s.Gc.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(s.qE(e))}get valueDec(){return this._valueDec}fromDER(e,t,n,r=0){const s=this.fromBER(e,t,n);if(-1===s)return s;const i=this.valueHexView;return 0===i[0]&&0!=(128&i[1])?this.valueHexView=i.subarray(1):0!==r&&i.length<r&&(r-i.length>1&&(r=i.length+1),this.valueHexView=i.subarray(r-i.length)),s}toDER(e=!1){const t=this.valueHexView;switch(!0){case 0!=(128&t[0]):{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&0==(128&t[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,n){const r=super.fromBER(e,t,n);return-1===r||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=8*this.valueHexView.length-1;let t,n=new Uint8Array(8*this.valueHexView.length/3),r=0;const s=this.valueHexView;let i="",a=!1;for(let a=s.byteLength-1;a>=0;a--){t=s[a];for(let s=0;s<8;s++)1==(1&t)&&(r===e?(n=Oe(Ve(r),n),i="-"):n=Ie(n,Ve(r))),r++,t>>=1}for(let e=0;e<n.length;e++)n[e]&&(a=!0),a&&(i+=u.charAt(n[e]));return!1===a&&(i+=u.charAt(0)),i}}K=He,He.NAME="IntegerValueBlock",Object.defineProperty(K.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class De extends H{constructor(e={}){super(e,He),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return i(),BigInt(this.valueBlock.toString())}static fromBigInt(e){i();const t=BigInt(e),n=new l,s=t.toString(16).replace(/^-/,""),a=new Uint8Array(r.ep.FromHex(s));if(t<0){const e=new Uint8Array(a.length+(128&a[0]?1:0));e[0]|=128;const s=BigInt(`0x${r.ep.ToHex(e)}`)+t,i=r.vJ.toUint8Array(r.ep.FromHex(s.toString(16)));i[0]|=128,n.write(i)}else 128&a[0]&&n.write(new Uint8Array([0])),n.write(a);return new De({valueHex:n.final()})}convertToDER(){const e=new De({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new De({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}J=De,O.Integer=J,De.NAME="INTEGER";class Pe extends De{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}F=Pe,O.Enumerated=F,Pe.NAME="ENUMERATED";class Te extends(x(B)){constructor({valueDec:e=-1,isFirstSid:t=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,n){if(!n)return t;const i=r.vJ.toUint8Array(e);if(!o(this,i,t,n))return-1;const a=i.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let e=0;e<n&&(this.valueHexView[e]=127&a[e],this.blockLength++,0!=(128&a[e]));e++);const l=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)l[e]=this.valueHexView[e];return this.valueHexView=l,0!=(128&a[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=s.r9(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){i();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const n=new Uint8Array(t.length/7);for(let e=0;e<n.length;e++)n[e]=parseInt(t.slice(7*e,7*e+7),2)+(e+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,n=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)n[e]=128|t[e];return n[this.blockLength-1]=t[this.blockLength-1],n.buffer}const t=s.lL(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",q;const n=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),r=t.byteLength-1;for(let t=0;t<r;t++)n[t]=128|e[t];n[r]=e[r]}return n}toString(){let e="";if(this.isHexOnly)e=r.ep.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Te.NAME="sidBlock";class Re extends B{constructor({value:e=S,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const t=new Te;if(r=t.fromBER(e,r,n),-1===r)return this.blockLength=0,this.error=t.error,r;0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,n-=t.blockLength,this.value.push(t)}return r}toBER(e){const t=[];for(let n=0;n<this.value.length;n++){const r=this.value[n].toBER(e);if(0===r.byteLength)return this.error=this.value[n].error,q;t.push(r)}return a(t)}fromString(e){this.value=[];let t=0,n=0,r="",s=!1;do{if(n=e.indexOf(".",t),r=-1===n?e.substring(t):e.substring(t,n),t=n+1,s){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:return void(this.value=[])}const n=parseInt(r,10);if(isNaN(n))return;e.valueDec=n+t,s=!1}else{const e=new Te;if(r>Number.MAX_SAFE_INTEGER){i();const t=BigInt(r);e.valueBigInt=t}else if(e.valueDec=parseInt(r,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,s=!0),this.value.push(e)}}while(-1!==n)}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(e=`${e}.`),t?(r=`{${r}}`,this.value[n].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}Re.NAME="ObjectIdentifierValueBlock";class Le extends H{constructor(e={}){super(e,Re),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}z=Le,O.ObjectIdentifier=z,Le.NAME="OBJECT IDENTIFIER";class Ue extends(x(E)){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,n){if(0===n)return t;const i=r.vJ.toUint8Array(e);if(!o(this,i,t,n))return-1;const a=i.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let e=0;e<n&&(this.valueHexView[e]=127&a[e],this.blockLength++,0!=(128&a[e]));e++);const l=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)l[e]=this.valueHexView[e];return this.valueHexView=l,0!=(128&a[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=s.r9(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,n=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)n[e]=128|t[e];return n[this.blockLength-1]=t[this.blockLength-1],n.buffer}const t=s.lL(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",q;const n=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),r=t.byteLength-1;for(let t=0;t<r;t++)n[t]=128|e[t];n[r]=e[r]}return n.buffer}toString(){let e="";return e=this.isHexOnly?r.ep.ToHex(this.valueHexView):this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Ue.NAME="relativeSidBlock";class $e extends B{constructor({value:e=S,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const t=new Ue;if(r=t.fromBER(e,r,n),-1===r)return this.blockLength=0,this.error=t.error,r;this.blockLength+=t.blockLength,n-=t.blockLength,this.value.push(t)}return r}toBER(e,t){const n=[];for(let t=0;t<this.value.length;t++){const r=this.value[t].toBER(e);if(0===r.byteLength)return this.error=this.value[t].error,q;n.push(r)}return a(n)}fromString(e){this.value=[];let t=0,n=0,r="";do{n=e.indexOf(".",t),r=-1===n?e.substring(t):e.substring(t,n),t=n+1;const s=new Ue;if(s.valueDec=parseInt(r,10),isNaN(s.valueDec))return!0;this.value.push(s)}while(-1!==n);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(e=`${e}.`),t?(r=`{${r}}`,e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}$e.NAME="RelativeObjectIdentifierValueBlock";class _e extends H{constructor(e={}){super(e,$e),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}W=_e,O.RelativeObjectIdentifier=W,_e.NAME="RelativeObjectIdentifier";class je extends we{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}G=je,O.Sequence=G,je.NAME="SEQUENCE";class Me extends we{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}Z=Me,O.Set=Z,Me.NAME="SET";class Ke extends(x(B)){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=S}toJSON(){return{...super.toJSON(),value:this.value}}}Ke.NAME="StringValueBlock";class Je extends Ke{}Je.NAME="SimpleStringValueBlock";class Fe extends P{constructor({...e}={}){super(e,Je)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,r.vJ.toUint8Array(e))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);this.valueBlock.value=e}}Fe.NAME="SIMPLE STRING";class ze extends Fe{fromBuffer(e){this.valueBlock.valueHexView=r.vJ.toUint8Array(e);try{this.valueBlock.value=r.ep.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=r.ep.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(r.ep.FromUtf8String(e)),this.valueBlock.value=e}}ze.NAME="Utf8StringValueBlock";class We extends ze{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}Q=We,O.Utf8String=Q,We.NAME="UTF8String";class Ge extends Fe{fromBuffer(e){this.valueBlock.value=r.ep.ToUtf16String(e),this.valueBlock.valueHexView=r.vJ.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(r.ep.FromUtf16String(e))}}Ge.NAME="BmpStringValueBlock";class Ze extends Ge{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}Y=Ze,O.BmpString=Y,Ze.NAME="BMPString";class Qe extends Fe{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(t);for(let e=0;e<n.length;e+=4)n[e]=n[e+3],n[e+1]=n[e+2],n[e+2]=0,n[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let r=0;r<t;r++){const t=s.lL(e.charCodeAt(r),8),i=new Uint8Array(t);if(i.length>4)continue;const a=4-i.length;for(let e=i.length-1;e>=0;e--)n[4*r+e+a]=i[e]}this.valueBlock.value=e}}Qe.NAME="UniversalStringValueBlock";class Ye extends Qe{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}X=Ye,O.UniversalString=X,Ye.NAME="UniversalString";class Xe extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}ee=Xe,O.NumericString=ee,Xe.NAME="NumericString";class et extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}te=et,O.PrintableString=te,et.NAME="PrintableString";class tt extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}ne=tt,O.TeletexString=ne,tt.NAME="TeletexString";class nt extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}re=nt,O.VideotexString=re,nt.NAME="VideotexString";class rt extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}se=rt,O.IA5String=se,rt.NAME="IA5String";class st extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}ie=st,O.GraphicString=ie,st.NAME="GraphicString";class it extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}ae=it,O.VisibleString=ae,it.NAME="VisibleString";class at extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}oe=at,O.GeneralString=oe,at.NAME="GeneralString";class ot extends Fe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}le=ot,O.CharacterString=le,ot.NAME="CharacterString";class lt extends it{constructor({value:e,valueDate:t,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,r.vJ.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null===t)return void(this.error="Wrong input string for conversion");const n=parseInt(t[1],10);this.year=n>=50?1900+n:2e3+n,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(e="iso"){if("iso"===e){const e=new Array(7);return e[0]=s.vX(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=s.vX(this.month,2),e[2]=s.vX(this.day,2),e[3]=s.vX(this.hour,2),e[4]=s.vX(this.minute,2),e[5]=s.vX(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}ce=lt,O.UTCTime=ce,lt.NAME="UTCTime";class ct extends lt{constructor(e={}){var t;super(e),null!==(t=this.millisecond)&&void 0!==t||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,n=!1,r="",s="",i=0,a=0,o=0;if("Z"===e[e.length-1])r=e.substring(0,e.length-1),n=!0;else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(n){if(-1!==r.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==r.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let e=1,t=r.indexOf("+"),n="";if(-1===t&&(t=r.indexOf("-"),e=-1),-1!==t){if(n=r.substring(t+1),r=r.substring(0,t),2!==n.length&&4!==n.length)throw new Error("Wrong input string for conversion");let s=parseInt(n.substring(0,2),10);if(isNaN(s.valueOf()))throw new Error("Wrong input string for conversion");if(a=e*s,4===n.length){if(s=parseInt(n.substring(2,4),10),isNaN(s.valueOf()))throw new Error("Wrong input string for conversion");o=e*s}}}let l=r.indexOf(".");if(-1===l&&(l=r.indexOf(",")),-1!==l){const e=new Number(`0${r.substring(l)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");i=e.valueOf(),s=r.substring(0,l)}else s=r;switch(!0){case 8===s.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==l)throw new Error("Wrong input string for conversion");break;case 10===s.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==l){let e=60*i;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===s.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==l){let e=60*i;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===s.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==l){const e=1e3*i;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const c=t.exec(s);if(null===c)throw new Error("Wrong input string for conversion");for(let e=1;e<c.length;e++)switch(e){case 1:this.year=parseInt(c[e],10);break;case 2:this.month=parseInt(c[e],10);break;case 3:this.day=parseInt(c[e],10);break;case 4:this.hour=parseInt(c[e],10)+a;break;case 5:this.minute=parseInt(c[e],10)+o;break;case 6:this.second=parseInt(c[e],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===n){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if("iso"===e){const e=[];return e.push(s.vX(this.year,4)),e.push(s.vX(this.month,2)),e.push(s.vX(this.day,2)),e.push(s.vX(this.hour,2)),e.push(s.vX(this.minute,2)),e.push(s.vX(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(s.vX(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}ue=ct,O.GeneralizedTime=ue,ct.NAME="GeneralizedTime";class ut extends We{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}he=ut,O.DATE=he,ut.NAME="DATE";class ht extends We{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}de=ht,O.TimeOfDay=de,ht.NAME="TimeOfDay";class dt extends We{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}me=dt,O.DateTime=me,dt.NAME="DateTime";class mt extends We{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}fe=mt,O.Duration=fe,mt.NAME="Duration";class ft extends We{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}pe=ft,O.TIME=pe,ft.NAME="TIME";class pt{constructor({name:e=S,optional:t=!1}={}){this.name=e,this.optional=t}}class gt extends pt{constructor({value:e=[],...t}={}){super(t),this.value=e}}class bt extends pt{constructor({value:e=new pt,local:t=!1,...n}={}){super(n),this.value=e,this.local=t}}class yt{constructor({data:e=k}={}){this.dataView=r.vJ.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=r.vJ.toUint8Array(e)}fromBER(e,t,n){const s=t+n;return this.dataView=r.vJ.toUint8Array(e).subarray(t,s),s}toBER(e){return this.dataView.slice().buffer}}function vt(e,t,n){if(n instanceof gt){for(let r=0;r<n.value.length;r++)if(vt(e,t,n.value[r]).verified)return{verified:!0,result:e};{const e={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(h)&&(e.name=n.name),e}}if(n instanceof pt)return n.hasOwnProperty(h)&&(e[n.name]=t),{verified:!0,result:e};if(e instanceof Object==0)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(n instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(f in n==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(y in n.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(v in n.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const r=n.idBlock.toBER(!1);if(0===r.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===n.idBlock.fromBER(r,0,r.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===n.idBlock.hasOwnProperty(p))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===n.idBlock.hasOwnProperty(g))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===n.idBlock.hasOwnProperty(b))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!(m in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(n.idBlock.isHexOnly){if(d in n.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const r=n.idBlock.valueHexView,s=t.idBlock.valueHexView;if(r.length!==s.length)return{verified:!1,result:e};for(let t=0;t<r.length;t++)if(r[t]!==s[1])return{verified:!1,result:e}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,S),n.name&&(e[n.name]=t)),n instanceof O.Constructed){let r=0,s={verified:!1,result:{error:"Unknown error"}},i=n.valueBlock.value.length;if(i>0&&n.valueBlock.value[0]instanceof bt&&(i=t.valueBlock.value.length),0===i)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==n.valueBlock.value.length){let t=!0;for(let e=0;e<n.valueBlock.value.length;e++)t=t&&(n.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,S),n.name&&delete e[n.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let a=0;a<i;a++)if(a-r>=t.valueBlock.value.length){if(!1===n.valueBlock.value[a].optional){const t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,S),n.name&&(delete e[n.name],t.name=n.name)),t}}else if(n.valueBlock.value[0]instanceof bt){if(s=vt(e,t.valueBlock.value[a],n.valueBlock.value[0].value),!1===s.verified){if(!n.valueBlock.value[0].optional)return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,S),n.name&&delete e[n.name]),s;r++}if(h in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let r={};r=w in n.valueBlock.value[0]&&n.valueBlock.value[0].local?t:e,void 0===r[n.valueBlock.value[0].name]&&(r[n.valueBlock.value[0].name]=[]),r[n.valueBlock.value[0].name].push(t.valueBlock.value[a])}}else if(s=vt(e,t.valueBlock.value[a-r],n.valueBlock.value[a]),!1===s.verified){if(!n.valueBlock.value[a].optional)return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,S),n.name&&delete e[n.name]),s;r++}if(!1===s.verified){const t={verified:!1,result:e};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,S),n.name&&(delete e[n.name],t.name=n.name)),t}return{verified:!0,result:e}}if(n.primitiveSchema&&d in t.valueBlock){const r=be(t.valueBlock.valueHexView);if(-1===r.offset){const t={verified:!1,result:r.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,S),n.name&&(delete e[n.name],t.name=n.name)),t}return vt(e,r.result,n.primitiveSchema)}return{verified:!0,result:e}}function wt(e,t){if(t instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const n=be(r.vJ.toUint8Array(e));return-1===n.offset?{verified:!1,result:n.result}:vt(n.result,n.result,t)}},1924:(e,t,n)=>{"use strict";var r=n(210),s=n(5559),i=s(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&i(e,".prototype.")>-1?s(n):n}},5559:(e,t,n)=>{"use strict";var r=n(8612),s=n(210),i=s("%Function.prototype.apply%"),a=s("%Function.prototype.call%"),o=s("%Reflect.apply%",!0)||r.call(a,i),l=s("%Object.getOwnPropertyDescriptor%",!0),c=s("%Object.defineProperty%",!0),u=s("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(e){var t=o(r,a,arguments);return l&&c&&l(t,"length").configurable&&c(t,"length",{value:1+u(0,e.length-(arguments.length-1))}),t};var h=function(){return o(r,i,arguments)};c?c(e.exports,"apply",{value:h}):e.exports.apply=h},6313:e=>{var t=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function s(i,o,l,c,u){"object"==typeof o&&(l=o.depth,c=o.prototype,u=o.includeNonEnumerable,o=o.circular);var h=[],d=[],m="undefined"!=typeof Buffer;return void 0===o&&(o=!0),void 0===l&&(l=1/0),function i(l,f){if(null===l)return null;if(0===f)return l;var p,g;if("object"!=typeof l)return l;if(e(l,t))p=new t;else if(e(l,n))p=new n;else if(e(l,r))p=new r((function(e,t){l.then((function(t){e(i(t,f-1))}),(function(e){t(i(e,f-1))}))}));else if(s.__isArray(l))p=[];else if(s.__isRegExp(l))p=new RegExp(l.source,a(l)),l.lastIndex&&(p.lastIndex=l.lastIndex);else if(s.__isDate(l))p=new Date(l.getTime());else{if(m&&Buffer.isBuffer(l))return p=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(p),p;e(l,Error)?p=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),p=Object.create(g)):(p=Object.create(c),g=c)}if(o){var b=h.indexOf(l);if(-1!=b)return d[b];h.push(l),d.push(p)}for(var y in e(l,t)&&l.forEach((function(e,t){var n=i(t,f-1),r=i(e,f-1);p.set(n,r)})),e(l,n)&&l.forEach((function(e){var t=i(e,f-1);p.add(t)})),l){var v;g&&(v=Object.getOwnPropertyDescriptor(g,y)),v&&null==v.set||(p[y]=i(l[y],f-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);for(y=0;y<w.length;y++){var S=w[y];(!(k=Object.getOwnPropertyDescriptor(l,S))||k.enumerable||u)&&(p[S]=i(l[S],f-1),k.enumerable||Object.defineProperty(p,S,{enumerable:!1}))}}if(u){var q=Object.getOwnPropertyNames(l);for(y=0;y<q.length;y++){var k,A=q[y];(k=Object.getOwnPropertyDescriptor(l,A))&&k.enumerable||(p[A]=i(l[A],f-1),Object.defineProperty(p,A,{enumerable:!1}))}}return p}(i,l)}function i(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return s.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},s.__objToStr=i,s.__isDate=function(e){return"object"==typeof e&&"[object Date]"===i(e)},s.__isArray=function(e){return"object"==typeof e&&"[object Array]"===i(e)},s.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===i(e)},s.__getRegExpFlags=a,s}();e.exports&&(e.exports=t)},2222:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8081),s=n.n(r),i=n(3645),a=n.n(i)()(s());a.push([e.id,"/*!\n * Quill Editor v1.3.7\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n.ql-container {\n  box-sizing: border-box;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 13px;\n  height: 100%;\n  margin: 0px;\n  position: relative;\n}\n.ql-container.ql-disabled .ql-tooltip {\n  visibility: hidden;\n}\n.ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n  pointer-events: none;\n}\n.ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n.ql-clipboard p {\n  margin: 0;\n  padding: 0;\n}\n.ql-editor {\n  box-sizing: border-box;\n  line-height: 1.42;\n  height: 100%;\n  outline: none;\n  overflow-y: auto;\n  padding: 12px 15px;\n  tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.ql-editor > * {\n  cursor: text;\n}\n.ql-editor p,\n.ql-editor ol,\n.ql-editor ul,\n.ql-editor pre,\n.ql-editor blockquote,\n.ql-editor h1,\n.ql-editor h2,\n.ql-editor h3,\n.ql-editor h4,\n.ql-editor h5,\n.ql-editor h6 {\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol,\n.ql-editor ul {\n  padding-left: 1.5em;\n}\n.ql-editor ol > li,\n.ql-editor ul > li {\n  list-style-type: none;\n}\n.ql-editor ul > li::before {\n  content: '\\2022';\n}\n.ql-editor ul[data-checked=true],\n.ql-editor ul[data-checked=false] {\n  pointer-events: none;\n}\n.ql-editor ul[data-checked=true] > li *,\n.ql-editor ul[data-checked=false] > li * {\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before,\n.ql-editor ul[data-checked=false] > li::before {\n  color: #777;\n  cursor: pointer;\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before {\n  content: '\\2611';\n}\n.ql-editor ul[data-checked=false] > li::before {\n  content: '\\2610';\n}\n.ql-editor li::before {\n  display: inline-block;\n  white-space: nowrap;\n  width: 1.2em;\n}\n.ql-editor li:not(.ql-direction-rtl)::before {\n  margin-left: -1.5em;\n  margin-right: 0.3em;\n  text-align: right;\n}\n.ql-editor li.ql-direction-rtl::before {\n  margin-left: 0.3em;\n  margin-right: -1.5em;\n}\n.ql-editor ol li:not(.ql-direction-rtl),\n.ql-editor ul li:not(.ql-direction-rtl) {\n  padding-left: 1.5em;\n}\n.ql-editor ol li.ql-direction-rtl,\n.ql-editor ul li.ql-direction-rtl {\n  padding-right: 1.5em;\n}\n.ql-editor ol li {\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  counter-increment: list-0;\n}\n.ql-editor ol li:before {\n  content: counter(list-0, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-increment: list-1;\n}\n.ql-editor ol li.ql-indent-1:before {\n  content: counter(list-1, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-increment: list-2;\n}\n.ql-editor ol li.ql-indent-2:before {\n  content: counter(list-2, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-increment: list-3;\n}\n.ql-editor ol li.ql-indent-3:before {\n  content: counter(list-3, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-increment: list-4;\n}\n.ql-editor ol li.ql-indent-4:before {\n  content: counter(list-4, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-reset: list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-increment: list-5;\n}\n.ql-editor ol li.ql-indent-5:before {\n  content: counter(list-5, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-reset: list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-increment: list-6;\n}\n.ql-editor ol li.ql-indent-6:before {\n  content: counter(list-6, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-reset: list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-increment: list-7;\n}\n.ql-editor ol li.ql-indent-7:before {\n  content: counter(list-7, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-reset: list-8 list-9;\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-increment: list-8;\n}\n.ql-editor ol li.ql-indent-8:before {\n  content: counter(list-8, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-reset: list-9;\n}\n.ql-editor ol li.ql-indent-9 {\n  counter-increment: list-9;\n}\n.ql-editor ol li.ql-indent-9:before {\n  content: counter(list-9, decimal) '. ';\n}\n.ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 3em;\n}\n.ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 4.5em;\n}\n.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 3em;\n}\n.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 4.5em;\n}\n.ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 6em;\n}\n.ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 7.5em;\n}\n.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 6em;\n}\n.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 7.5em;\n}\n.ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 9em;\n}\n.ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 10.5em;\n}\n.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 9em;\n}\n.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 10.5em;\n}\n.ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 12em;\n}\n.ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 13.5em;\n}\n.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 12em;\n}\n.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 13.5em;\n}\n.ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 15em;\n}\n.ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 16.5em;\n}\n.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 15em;\n}\n.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 16.5em;\n}\n.ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 18em;\n}\n.ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 19.5em;\n}\n.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 18em;\n}\n.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 19.5em;\n}\n.ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 21em;\n}\n.ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 22.5em;\n}\n.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 21em;\n}\n.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 22.5em;\n}\n.ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 24em;\n}\n.ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 25.5em;\n}\n.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 24em;\n}\n.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 25.5em;\n}\n.ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 27em;\n}\n.ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 28.5em;\n}\n.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 27em;\n}\n.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 28.5em;\n}\n.ql-editor .ql-video {\n  display: block;\n  max-width: 100%;\n}\n.ql-editor .ql-video.ql-align-center {\n  margin: 0 auto;\n}\n.ql-editor .ql-video.ql-align-right {\n  margin: 0 0 0 auto;\n}\n.ql-editor .ql-bg-black {\n  background-color: #000;\n}\n.ql-editor .ql-bg-red {\n  background-color: #e60000;\n}\n.ql-editor .ql-bg-orange {\n  background-color: #f90;\n}\n.ql-editor .ql-bg-yellow {\n  background-color: #ff0;\n}\n.ql-editor .ql-bg-green {\n  background-color: #008a00;\n}\n.ql-editor .ql-bg-blue {\n  background-color: #06c;\n}\n.ql-editor .ql-bg-purple {\n  background-color: #93f;\n}\n.ql-editor .ql-color-white {\n  color: #fff;\n}\n.ql-editor .ql-color-red {\n  color: #e60000;\n}\n.ql-editor .ql-color-orange {\n  color: #f90;\n}\n.ql-editor .ql-color-yellow {\n  color: #ff0;\n}\n.ql-editor .ql-color-green {\n  color: #008a00;\n}\n.ql-editor .ql-color-blue {\n  color: #06c;\n}\n.ql-editor .ql-color-purple {\n  color: #93f;\n}\n.ql-editor .ql-font-serif {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-editor .ql-font-monospace {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-editor .ql-size-small {\n  font-size: 0.75em;\n}\n.ql-editor .ql-size-large {\n  font-size: 1.5em;\n}\n.ql-editor .ql-size-huge {\n  font-size: 2.5em;\n}\n.ql-editor .ql-direction-rtl {\n  direction: rtl;\n  text-align: inherit;\n}\n.ql-editor .ql-align-center {\n  text-align: center;\n}\n.ql-editor .ql-align-justify {\n  text-align: justify;\n}\n.ql-editor .ql-align-right {\n  text-align: right;\n}\n.ql-editor.ql-blank::before {\n  color: rgba(0,0,0,0.6);\n  content: attr(data-placeholder);\n  font-style: italic;\n  left: 15px;\n  pointer-events: none;\n  position: absolute;\n  right: 15px;\n}\n.ql-bubble.ql-toolbar:after,\n.ql-bubble .ql-toolbar:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.ql-bubble.ql-toolbar button,\n.ql-bubble .ql-toolbar button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: inline-block;\n  float: left;\n  height: 24px;\n  padding: 3px 5px;\n  width: 28px;\n}\n.ql-bubble.ql-toolbar button svg,\n.ql-bubble .ql-toolbar button svg {\n  float: left;\n  height: 100%;\n}\n.ql-bubble.ql-toolbar button:active:hover,\n.ql-bubble .ql-toolbar button:active:hover {\n  outline: none;\n}\n.ql-bubble.ql-toolbar input.ql-image[type=file],\n.ql-bubble .ql-toolbar input.ql-image[type=file] {\n  display: none;\n}\n.ql-bubble.ql-toolbar button:hover,\n.ql-bubble .ql-toolbar button:hover,\n.ql-bubble.ql-toolbar button:focus,\n.ql-bubble .ql-toolbar button:focus,\n.ql-bubble.ql-toolbar button.ql-active,\n.ql-bubble .ql-toolbar button.ql-active,\n.ql-bubble.ql-toolbar .ql-picker-label:hover,\n.ql-bubble .ql-toolbar .ql-picker-label:hover,\n.ql-bubble.ql-toolbar .ql-picker-label.ql-active,\n.ql-bubble .ql-toolbar .ql-picker-label.ql-active,\n.ql-bubble.ql-toolbar .ql-picker-item:hover,\n.ql-bubble .ql-toolbar .ql-picker-item:hover,\n.ql-bubble.ql-toolbar .ql-picker-item.ql-selected,\n.ql-bubble .ql-toolbar .ql-picker-item.ql-selected {\n  color: #fff;\n}\n.ql-bubble.ql-toolbar button:hover .ql-fill,\n.ql-bubble .ql-toolbar button:hover .ql-fill,\n.ql-bubble.ql-toolbar button:focus .ql-fill,\n.ql-bubble .ql-toolbar button:focus .ql-fill,\n.ql-bubble.ql-toolbar button.ql-active .ql-fill,\n.ql-bubble .ql-toolbar button.ql-active .ql-fill,\n.ql-bubble.ql-toolbar .ql-picker-label:hover .ql-fill,\n.ql-bubble .ql-toolbar .ql-picker-label:hover .ql-fill,\n.ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-fill,\n.ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-fill,\n.ql-bubble.ql-toolbar .ql-picker-item:hover .ql-fill,\n.ql-bubble .ql-toolbar .ql-picker-item:hover .ql-fill,\n.ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n.ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n.ql-bubble.ql-toolbar button:hover .ql-stroke.ql-fill,\n.ql-bubble .ql-toolbar button:hover .ql-stroke.ql-fill,\n.ql-bubble.ql-toolbar button:focus .ql-stroke.ql-fill,\n.ql-bubble .ql-toolbar button:focus .ql-stroke.ql-fill,\n.ql-bubble.ql-toolbar button.ql-active .ql-stroke.ql-fill,\n.ql-bubble .ql-toolbar button.ql-active .ql-stroke.ql-fill,\n.ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n.ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n.ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n.ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n.ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n.ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n.ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,\n.ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {\n  fill: #fff;\n}\n.ql-bubble.ql-toolbar button:hover .ql-stroke,\n.ql-bubble .ql-toolbar button:hover .ql-stroke,\n.ql-bubble.ql-toolbar button:focus .ql-stroke,\n.ql-bubble .ql-toolbar button:focus .ql-stroke,\n.ql-bubble.ql-toolbar button.ql-active .ql-stroke,\n.ql-bubble .ql-toolbar button.ql-active .ql-stroke,\n.ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke,\n.ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke,\n.ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n.ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n.ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke,\n.ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke,\n.ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n.ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n.ql-bubble.ql-toolbar button:hover .ql-stroke-miter,\n.ql-bubble .ql-toolbar button:hover .ql-stroke-miter,\n.ql-bubble.ql-toolbar button:focus .ql-stroke-miter,\n.ql-bubble .ql-toolbar button:focus .ql-stroke-miter,\n.ql-bubble.ql-toolbar button.ql-active .ql-stroke-miter,\n.ql-bubble .ql-toolbar button.ql-active .ql-stroke-miter,\n.ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n.ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n.ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n.ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n.ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n.ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n.ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,\n.ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {\n  stroke: #fff;\n}\n@media (pointer: coarse) {\n  .ql-bubble.ql-toolbar button:hover:not(.ql-active),\n  .ql-bubble .ql-toolbar button:hover:not(.ql-active) {\n    color: #ccc;\n  }\n  .ql-bubble.ql-toolbar button:hover:not(.ql-active) .ql-fill,\n  .ql-bubble .ql-toolbar button:hover:not(.ql-active) .ql-fill,\n  .ql-bubble.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,\n  .ql-bubble .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {\n    fill: #ccc;\n  }\n  .ql-bubble.ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n  .ql-bubble .ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n  .ql-bubble.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,\n  .ql-bubble .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {\n    stroke: #ccc;\n  }\n}\n.ql-bubble {\n  box-sizing: border-box;\n}\n.ql-bubble * {\n  box-sizing: border-box;\n}\n.ql-bubble .ql-hidden {\n  display: none;\n}\n.ql-bubble .ql-out-bottom,\n.ql-bubble .ql-out-top {\n  visibility: hidden;\n}\n.ql-bubble .ql-tooltip {\n  position: absolute;\n  transform: translateY(10px);\n}\n.ql-bubble .ql-tooltip a {\n  cursor: pointer;\n  text-decoration: none;\n}\n.ql-bubble .ql-tooltip.ql-flip {\n  transform: translateY(-10px);\n}\n.ql-bubble .ql-formats {\n  display: inline-block;\n  vertical-align: middle;\n}\n.ql-bubble .ql-formats:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.ql-bubble .ql-stroke {\n  fill: none;\n  stroke: #ccc;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 2;\n}\n.ql-bubble .ql-stroke-miter {\n  fill: none;\n  stroke: #ccc;\n  stroke-miterlimit: 10;\n  stroke-width: 2;\n}\n.ql-bubble .ql-fill,\n.ql-bubble .ql-stroke.ql-fill {\n  fill: #ccc;\n}\n.ql-bubble .ql-empty {\n  fill: none;\n}\n.ql-bubble .ql-even {\n  fill-rule: evenodd;\n}\n.ql-bubble .ql-thin,\n.ql-bubble .ql-stroke.ql-thin {\n  stroke-width: 1;\n}\n.ql-bubble .ql-transparent {\n  opacity: 0.4;\n}\n.ql-bubble .ql-direction svg:last-child {\n  display: none;\n}\n.ql-bubble .ql-direction.ql-active svg:last-child {\n  display: inline;\n}\n.ql-bubble .ql-direction.ql-active svg:first-child {\n  display: none;\n}\n.ql-bubble .ql-editor h1 {\n  font-size: 2em;\n}\n.ql-bubble .ql-editor h2 {\n  font-size: 1.5em;\n}\n.ql-bubble .ql-editor h3 {\n  font-size: 1.17em;\n}\n.ql-bubble .ql-editor h4 {\n  font-size: 1em;\n}\n.ql-bubble .ql-editor h5 {\n  font-size: 0.83em;\n}\n.ql-bubble .ql-editor h6 {\n  font-size: 0.67em;\n}\n.ql-bubble .ql-editor a {\n  text-decoration: underline;\n}\n.ql-bubble .ql-editor blockquote {\n  border-left: 4px solid #ccc;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  padding-left: 16px;\n}\n.ql-bubble .ql-editor code,\n.ql-bubble .ql-editor pre {\n  background-color: #f0f0f0;\n  border-radius: 3px;\n}\n.ql-bubble .ql-editor pre {\n  white-space: pre-wrap;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  padding: 5px 10px;\n}\n.ql-bubble .ql-editor code {\n  font-size: 85%;\n  padding: 2px 4px;\n}\n.ql-bubble .ql-editor pre.ql-syntax {\n  background-color: #23241f;\n  color: #f8f8f2;\n  overflow: visible;\n}\n.ql-bubble .ql-editor img {\n  max-width: 100%;\n}\n.ql-bubble .ql-picker {\n  color: #ccc;\n  display: inline-block;\n  float: left;\n  font-size: 14px;\n  font-weight: 500;\n  height: 24px;\n  position: relative;\n  vertical-align: middle;\n}\n.ql-bubble .ql-picker-label {\n  cursor: pointer;\n  display: inline-block;\n  height: 100%;\n  padding-left: 8px;\n  padding-right: 2px;\n  position: relative;\n  width: 100%;\n}\n.ql-bubble .ql-picker-label::before {\n  display: inline-block;\n  line-height: 22px;\n}\n.ql-bubble .ql-picker-options {\n  background-color: #444;\n  display: none;\n  min-width: 100%;\n  padding: 4px 8px;\n  position: absolute;\n  white-space: nowrap;\n}\n.ql-bubble .ql-picker-options .ql-picker-item {\n  cursor: pointer;\n  display: block;\n  padding-bottom: 5px;\n  padding-top: 5px;\n}\n.ql-bubble .ql-picker.ql-expanded .ql-picker-label {\n  color: #777;\n  z-index: 2;\n}\n.ql-bubble .ql-picker.ql-expanded .ql-picker-label .ql-fill {\n  fill: #777;\n}\n.ql-bubble .ql-picker.ql-expanded .ql-picker-label .ql-stroke {\n  stroke: #777;\n}\n.ql-bubble .ql-picker.ql-expanded .ql-picker-options {\n  display: block;\n  margin-top: -1px;\n  top: 100%;\n  z-index: 1;\n}\n.ql-bubble .ql-color-picker,\n.ql-bubble .ql-icon-picker {\n  width: 28px;\n}\n.ql-bubble .ql-color-picker .ql-picker-label,\n.ql-bubble .ql-icon-picker .ql-picker-label {\n  padding: 2px 4px;\n}\n.ql-bubble .ql-color-picker .ql-picker-label svg,\n.ql-bubble .ql-icon-picker .ql-picker-label svg {\n  right: 4px;\n}\n.ql-bubble .ql-icon-picker .ql-picker-options {\n  padding: 4px 0px;\n}\n.ql-bubble .ql-icon-picker .ql-picker-item {\n  height: 24px;\n  width: 24px;\n  padding: 2px 4px;\n}\n.ql-bubble .ql-color-picker .ql-picker-options {\n  padding: 3px 5px;\n  width: 152px;\n}\n.ql-bubble .ql-color-picker .ql-picker-item {\n  border: 1px solid transparent;\n  float: left;\n  height: 16px;\n  margin: 2px;\n  padding: 0px;\n  width: 16px;\n}\n.ql-bubble .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {\n  position: absolute;\n  margin-top: -9px;\n  right: 0;\n  top: 50%;\n  width: 18px;\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-bubble .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-bubble .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,\n.ql-bubble .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,\n.ql-bubble .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {\n  content: attr(data-label);\n}\n.ql-bubble .ql-picker.ql-header {\n  width: 98px;\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-label::before,\n.ql-bubble .ql-picker.ql-header .ql-picker-item::before {\n  content: 'Normal';\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  content: 'Heading 1';\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  content: 'Heading 2';\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  content: 'Heading 3';\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  content: 'Heading 4';\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  content: 'Heading 5';\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  content: 'Heading 6';\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  font-size: 2em;\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  font-size: 1.5em;\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  font-size: 1.17em;\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  font-size: 1em;\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  font-size: 0.83em;\n}\n.ql-bubble .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  font-size: 0.67em;\n}\n.ql-bubble .ql-picker.ql-font {\n  width: 108px;\n}\n.ql-bubble .ql-picker.ql-font .ql-picker-label::before,\n.ql-bubble .ql-picker.ql-font .ql-picker-item::before {\n  content: 'Sans Serif';\n}\n.ql-bubble .ql-picker.ql-font .ql-picker-label[data-value=serif]::before,\n.ql-bubble .ql-picker.ql-font .ql-picker-item[data-value=serif]::before {\n  content: 'Serif';\n}\n.ql-bubble .ql-picker.ql-font .ql-picker-label[data-value=monospace]::before,\n.ql-bubble .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before {\n  content: 'Monospace';\n}\n.ql-bubble .ql-picker.ql-font .ql-picker-item[data-value=serif]::before {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-bubble .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-bubble .ql-picker.ql-size {\n  width: 98px;\n}\n.ql-bubble .ql-picker.ql-size .ql-picker-label::before,\n.ql-bubble .ql-picker.ql-size .ql-picker-item::before {\n  content: 'Normal';\n}\n.ql-bubble .ql-picker.ql-size .ql-picker-label[data-value=small]::before,\n.ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=small]::before {\n  content: 'Small';\n}\n.ql-bubble .ql-picker.ql-size .ql-picker-label[data-value=large]::before,\n.ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=large]::before {\n  content: 'Large';\n}\n.ql-bubble .ql-picker.ql-size .ql-picker-label[data-value=huge]::before,\n.ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=huge]::before {\n  content: 'Huge';\n}\n.ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=small]::before {\n  font-size: 10px;\n}\n.ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=large]::before {\n  font-size: 18px;\n}\n.ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=huge]::before {\n  font-size: 32px;\n}\n.ql-bubble .ql-color-picker.ql-background .ql-picker-item {\n  background-color: #fff;\n}\n.ql-bubble .ql-color-picker.ql-color .ql-picker-item {\n  background-color: #000;\n}\n.ql-bubble .ql-toolbar .ql-formats {\n  margin: 8px 12px 8px 0px;\n}\n.ql-bubble .ql-toolbar .ql-formats:first-child {\n  margin-left: 12px;\n}\n.ql-bubble .ql-color-picker svg {\n  margin: 1px;\n}\n.ql-bubble .ql-color-picker .ql-picker-item.ql-selected,\n.ql-bubble .ql-color-picker .ql-picker-item:hover {\n  border-color: #fff;\n}\n.ql-bubble .ql-tooltip {\n  background-color: #444;\n  border-radius: 25px;\n  color: #fff;\n}\n.ql-bubble .ql-tooltip-arrow {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  content: \" \";\n  display: block;\n  left: 50%;\n  margin-left: -6px;\n  position: absolute;\n}\n.ql-bubble .ql-tooltip:not(.ql-flip) .ql-tooltip-arrow {\n  border-bottom: 6px solid #444;\n  top: -6px;\n}\n.ql-bubble .ql-tooltip.ql-flip .ql-tooltip-arrow {\n  border-top: 6px solid #444;\n  bottom: -6px;\n}\n.ql-bubble .ql-tooltip.ql-editing .ql-tooltip-editor {\n  display: block;\n}\n.ql-bubble .ql-tooltip.ql-editing .ql-formats {\n  visibility: hidden;\n}\n.ql-bubble .ql-tooltip-editor {\n  display: none;\n}\n.ql-bubble .ql-tooltip-editor input[type=text] {\n  background: transparent;\n  border: none;\n  color: #fff;\n  font-size: 13px;\n  height: 100%;\n  outline: none;\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n}\n.ql-bubble .ql-tooltip-editor a {\n  top: 10px;\n  position: absolute;\n  right: 20px;\n}\n.ql-bubble .ql-tooltip-editor a:before {\n  color: #ccc;\n  content: \"\\D7\";\n  font-size: 16px;\n  font-weight: bold;\n}\n.ql-container.ql-bubble:not(.ql-disabled) a {\n  position: relative;\n  white-space: nowrap;\n}\n.ql-container.ql-bubble:not(.ql-disabled) a::before {\n  background-color: #444;\n  border-radius: 15px;\n  top: -5px;\n  font-size: 12px;\n  color: #fff;\n  content: attr(href);\n  font-weight: normal;\n  overflow: hidden;\n  padding: 5px 15px;\n  text-decoration: none;\n  z-index: 1;\n}\n.ql-container.ql-bubble:not(.ql-disabled) a::after {\n  border-top: 6px solid #444;\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  top: 0;\n  content: \" \";\n  height: 0;\n  width: 0;\n}\n.ql-container.ql-bubble:not(.ql-disabled) a::before,\n.ql-container.ql-bubble:not(.ql-disabled) a::after {\n  left: 0;\n  margin-left: 50%;\n  position: absolute;\n  transform: translate(-50%, -100%);\n  transition: visibility 0s ease 200ms;\n  visibility: hidden;\n}\n.ql-container.ql-bubble:not(.ql-disabled) a:hover::before,\n.ql-container.ql-bubble:not(.ql-disabled) a:hover::after {\n  visibility: visible;\n}\n",""]);const o=a},5525:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8081),s=n.n(r),i=n(3645),a=n.n(i)()(s());a.push([e.id,"/*!\n * Quill Editor v1.3.7\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n.ql-container {\n  box-sizing: border-box;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 13px;\n  height: 100%;\n  margin: 0px;\n  position: relative;\n}\n.ql-container.ql-disabled .ql-tooltip {\n  visibility: hidden;\n}\n.ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n  pointer-events: none;\n}\n.ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n.ql-clipboard p {\n  margin: 0;\n  padding: 0;\n}\n.ql-editor {\n  box-sizing: border-box;\n  line-height: 1.42;\n  height: 100%;\n  outline: none;\n  overflow-y: auto;\n  padding: 12px 15px;\n  tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.ql-editor > * {\n  cursor: text;\n}\n.ql-editor p,\n.ql-editor ol,\n.ql-editor ul,\n.ql-editor pre,\n.ql-editor blockquote,\n.ql-editor h1,\n.ql-editor h2,\n.ql-editor h3,\n.ql-editor h4,\n.ql-editor h5,\n.ql-editor h6 {\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol,\n.ql-editor ul {\n  padding-left: 1.5em;\n}\n.ql-editor ol > li,\n.ql-editor ul > li {\n  list-style-type: none;\n}\n.ql-editor ul > li::before {\n  content: '\\2022';\n}\n.ql-editor ul[data-checked=true],\n.ql-editor ul[data-checked=false] {\n  pointer-events: none;\n}\n.ql-editor ul[data-checked=true] > li *,\n.ql-editor ul[data-checked=false] > li * {\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before,\n.ql-editor ul[data-checked=false] > li::before {\n  color: #777;\n  cursor: pointer;\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before {\n  content: '\\2611';\n}\n.ql-editor ul[data-checked=false] > li::before {\n  content: '\\2610';\n}\n.ql-editor li::before {\n  display: inline-block;\n  white-space: nowrap;\n  width: 1.2em;\n}\n.ql-editor li:not(.ql-direction-rtl)::before {\n  margin-left: -1.5em;\n  margin-right: 0.3em;\n  text-align: right;\n}\n.ql-editor li.ql-direction-rtl::before {\n  margin-left: 0.3em;\n  margin-right: -1.5em;\n}\n.ql-editor ol li:not(.ql-direction-rtl),\n.ql-editor ul li:not(.ql-direction-rtl) {\n  padding-left: 1.5em;\n}\n.ql-editor ol li.ql-direction-rtl,\n.ql-editor ul li.ql-direction-rtl {\n  padding-right: 1.5em;\n}\n.ql-editor ol li {\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  counter-increment: list-0;\n}\n.ql-editor ol li:before {\n  content: counter(list-0, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-increment: list-1;\n}\n.ql-editor ol li.ql-indent-1:before {\n  content: counter(list-1, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-increment: list-2;\n}\n.ql-editor ol li.ql-indent-2:before {\n  content: counter(list-2, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-increment: list-3;\n}\n.ql-editor ol li.ql-indent-3:before {\n  content: counter(list-3, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-increment: list-4;\n}\n.ql-editor ol li.ql-indent-4:before {\n  content: counter(list-4, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-reset: list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-increment: list-5;\n}\n.ql-editor ol li.ql-indent-5:before {\n  content: counter(list-5, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-reset: list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-increment: list-6;\n}\n.ql-editor ol li.ql-indent-6:before {\n  content: counter(list-6, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-reset: list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-increment: list-7;\n}\n.ql-editor ol li.ql-indent-7:before {\n  content: counter(list-7, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-reset: list-8 list-9;\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-increment: list-8;\n}\n.ql-editor ol li.ql-indent-8:before {\n  content: counter(list-8, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-reset: list-9;\n}\n.ql-editor ol li.ql-indent-9 {\n  counter-increment: list-9;\n}\n.ql-editor ol li.ql-indent-9:before {\n  content: counter(list-9, decimal) '. ';\n}\n.ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 3em;\n}\n.ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 4.5em;\n}\n.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 3em;\n}\n.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 4.5em;\n}\n.ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 6em;\n}\n.ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 7.5em;\n}\n.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 6em;\n}\n.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 7.5em;\n}\n.ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 9em;\n}\n.ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 10.5em;\n}\n.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 9em;\n}\n.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 10.5em;\n}\n.ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 12em;\n}\n.ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 13.5em;\n}\n.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 12em;\n}\n.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 13.5em;\n}\n.ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 15em;\n}\n.ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 16.5em;\n}\n.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 15em;\n}\n.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 16.5em;\n}\n.ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 18em;\n}\n.ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 19.5em;\n}\n.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 18em;\n}\n.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 19.5em;\n}\n.ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 21em;\n}\n.ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 22.5em;\n}\n.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 21em;\n}\n.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 22.5em;\n}\n.ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 24em;\n}\n.ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 25.5em;\n}\n.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 24em;\n}\n.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 25.5em;\n}\n.ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 27em;\n}\n.ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 28.5em;\n}\n.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 27em;\n}\n.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 28.5em;\n}\n.ql-editor .ql-video {\n  display: block;\n  max-width: 100%;\n}\n.ql-editor .ql-video.ql-align-center {\n  margin: 0 auto;\n}\n.ql-editor .ql-video.ql-align-right {\n  margin: 0 0 0 auto;\n}\n.ql-editor .ql-bg-black {\n  background-color: #000;\n}\n.ql-editor .ql-bg-red {\n  background-color: #e60000;\n}\n.ql-editor .ql-bg-orange {\n  background-color: #f90;\n}\n.ql-editor .ql-bg-yellow {\n  background-color: #ff0;\n}\n.ql-editor .ql-bg-green {\n  background-color: #008a00;\n}\n.ql-editor .ql-bg-blue {\n  background-color: #06c;\n}\n.ql-editor .ql-bg-purple {\n  background-color: #93f;\n}\n.ql-editor .ql-color-white {\n  color: #fff;\n}\n.ql-editor .ql-color-red {\n  color: #e60000;\n}\n.ql-editor .ql-color-orange {\n  color: #f90;\n}\n.ql-editor .ql-color-yellow {\n  color: #ff0;\n}\n.ql-editor .ql-color-green {\n  color: #008a00;\n}\n.ql-editor .ql-color-blue {\n  color: #06c;\n}\n.ql-editor .ql-color-purple {\n  color: #93f;\n}\n.ql-editor .ql-font-serif {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-editor .ql-font-monospace {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-editor .ql-size-small {\n  font-size: 0.75em;\n}\n.ql-editor .ql-size-large {\n  font-size: 1.5em;\n}\n.ql-editor .ql-size-huge {\n  font-size: 2.5em;\n}\n.ql-editor .ql-direction-rtl {\n  direction: rtl;\n  text-align: inherit;\n}\n.ql-editor .ql-align-center {\n  text-align: center;\n}\n.ql-editor .ql-align-justify {\n  text-align: justify;\n}\n.ql-editor .ql-align-right {\n  text-align: right;\n}\n.ql-editor.ql-blank::before {\n  color: rgba(0,0,0,0.6);\n  content: attr(data-placeholder);\n  font-style: italic;\n  left: 15px;\n  pointer-events: none;\n  position: absolute;\n  right: 15px;\n}\n",""]);const o=a},7066:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8081),s=n.n(r),i=n(3645),a=n.n(i)()(s());a.push([e.id,"/*!\n * Quill Editor v1.3.7\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n.ql-container {\n  box-sizing: border-box;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 13px;\n  height: 100%;\n  margin: 0px;\n  position: relative;\n}\n.ql-container.ql-disabled .ql-tooltip {\n  visibility: hidden;\n}\n.ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n  pointer-events: none;\n}\n.ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n.ql-clipboard p {\n  margin: 0;\n  padding: 0;\n}\n.ql-editor {\n  box-sizing: border-box;\n  line-height: 1.42;\n  height: 100%;\n  outline: none;\n  overflow-y: auto;\n  padding: 12px 15px;\n  tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.ql-editor > * {\n  cursor: text;\n}\n.ql-editor p,\n.ql-editor ol,\n.ql-editor ul,\n.ql-editor pre,\n.ql-editor blockquote,\n.ql-editor h1,\n.ql-editor h2,\n.ql-editor h3,\n.ql-editor h4,\n.ql-editor h5,\n.ql-editor h6 {\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol,\n.ql-editor ul {\n  padding-left: 1.5em;\n}\n.ql-editor ol > li,\n.ql-editor ul > li {\n  list-style-type: none;\n}\n.ql-editor ul > li::before {\n  content: '\\2022';\n}\n.ql-editor ul[data-checked=true],\n.ql-editor ul[data-checked=false] {\n  pointer-events: none;\n}\n.ql-editor ul[data-checked=true] > li *,\n.ql-editor ul[data-checked=false] > li * {\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before,\n.ql-editor ul[data-checked=false] > li::before {\n  color: #777;\n  cursor: pointer;\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before {\n  content: '\\2611';\n}\n.ql-editor ul[data-checked=false] > li::before {\n  content: '\\2610';\n}\n.ql-editor li::before {\n  display: inline-block;\n  white-space: nowrap;\n  width: 1.2em;\n}\n.ql-editor li:not(.ql-direction-rtl)::before {\n  margin-left: -1.5em;\n  margin-right: 0.3em;\n  text-align: right;\n}\n.ql-editor li.ql-direction-rtl::before {\n  margin-left: 0.3em;\n  margin-right: -1.5em;\n}\n.ql-editor ol li:not(.ql-direction-rtl),\n.ql-editor ul li:not(.ql-direction-rtl) {\n  padding-left: 1.5em;\n}\n.ql-editor ol li.ql-direction-rtl,\n.ql-editor ul li.ql-direction-rtl {\n  padding-right: 1.5em;\n}\n.ql-editor ol li {\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  counter-increment: list-0;\n}\n.ql-editor ol li:before {\n  content: counter(list-0, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-increment: list-1;\n}\n.ql-editor ol li.ql-indent-1:before {\n  content: counter(list-1, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-increment: list-2;\n}\n.ql-editor ol li.ql-indent-2:before {\n  content: counter(list-2, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-increment: list-3;\n}\n.ql-editor ol li.ql-indent-3:before {\n  content: counter(list-3, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-increment: list-4;\n}\n.ql-editor ol li.ql-indent-4:before {\n  content: counter(list-4, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-reset: list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-increment: list-5;\n}\n.ql-editor ol li.ql-indent-5:before {\n  content: counter(list-5, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-reset: list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-increment: list-6;\n}\n.ql-editor ol li.ql-indent-6:before {\n  content: counter(list-6, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-reset: list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-increment: list-7;\n}\n.ql-editor ol li.ql-indent-7:before {\n  content: counter(list-7, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-reset: list-8 list-9;\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-increment: list-8;\n}\n.ql-editor ol li.ql-indent-8:before {\n  content: counter(list-8, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-reset: list-9;\n}\n.ql-editor ol li.ql-indent-9 {\n  counter-increment: list-9;\n}\n.ql-editor ol li.ql-indent-9:before {\n  content: counter(list-9, decimal) '. ';\n}\n.ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 3em;\n}\n.ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 4.5em;\n}\n.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 3em;\n}\n.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 4.5em;\n}\n.ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 6em;\n}\n.ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 7.5em;\n}\n.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 6em;\n}\n.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 7.5em;\n}\n.ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 9em;\n}\n.ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 10.5em;\n}\n.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 9em;\n}\n.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 10.5em;\n}\n.ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 12em;\n}\n.ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 13.5em;\n}\n.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 12em;\n}\n.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 13.5em;\n}\n.ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 15em;\n}\n.ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 16.5em;\n}\n.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 15em;\n}\n.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 16.5em;\n}\n.ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 18em;\n}\n.ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 19.5em;\n}\n.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 18em;\n}\n.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 19.5em;\n}\n.ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 21em;\n}\n.ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 22.5em;\n}\n.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 21em;\n}\n.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 22.5em;\n}\n.ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 24em;\n}\n.ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 25.5em;\n}\n.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 24em;\n}\n.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 25.5em;\n}\n.ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 27em;\n}\n.ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 28.5em;\n}\n.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 27em;\n}\n.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 28.5em;\n}\n.ql-editor .ql-video {\n  display: block;\n  max-width: 100%;\n}\n.ql-editor .ql-video.ql-align-center {\n  margin: 0 auto;\n}\n.ql-editor .ql-video.ql-align-right {\n  margin: 0 0 0 auto;\n}\n.ql-editor .ql-bg-black {\n  background-color: #000;\n}\n.ql-editor .ql-bg-red {\n  background-color: #e60000;\n}\n.ql-editor .ql-bg-orange {\n  background-color: #f90;\n}\n.ql-editor .ql-bg-yellow {\n  background-color: #ff0;\n}\n.ql-editor .ql-bg-green {\n  background-color: #008a00;\n}\n.ql-editor .ql-bg-blue {\n  background-color: #06c;\n}\n.ql-editor .ql-bg-purple {\n  background-color: #93f;\n}\n.ql-editor .ql-color-white {\n  color: #fff;\n}\n.ql-editor .ql-color-red {\n  color: #e60000;\n}\n.ql-editor .ql-color-orange {\n  color: #f90;\n}\n.ql-editor .ql-color-yellow {\n  color: #ff0;\n}\n.ql-editor .ql-color-green {\n  color: #008a00;\n}\n.ql-editor .ql-color-blue {\n  color: #06c;\n}\n.ql-editor .ql-color-purple {\n  color: #93f;\n}\n.ql-editor .ql-font-serif {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-editor .ql-font-monospace {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-editor .ql-size-small {\n  font-size: 0.75em;\n}\n.ql-editor .ql-size-large {\n  font-size: 1.5em;\n}\n.ql-editor .ql-size-huge {\n  font-size: 2.5em;\n}\n.ql-editor .ql-direction-rtl {\n  direction: rtl;\n  text-align: inherit;\n}\n.ql-editor .ql-align-center {\n  text-align: center;\n}\n.ql-editor .ql-align-justify {\n  text-align: justify;\n}\n.ql-editor .ql-align-right {\n  text-align: right;\n}\n.ql-editor.ql-blank::before {\n  color: rgba(0,0,0,0.6);\n  content: attr(data-placeholder);\n  font-style: italic;\n  left: 15px;\n  pointer-events: none;\n  position: absolute;\n  right: 15px;\n}\n.ql-snow.ql-toolbar:after,\n.ql-snow .ql-toolbar:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.ql-snow.ql-toolbar button,\n.ql-snow .ql-toolbar button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: inline-block;\n  float: left;\n  height: 24px;\n  padding: 3px 5px;\n  width: 28px;\n}\n.ql-snow.ql-toolbar button svg,\n.ql-snow .ql-toolbar button svg {\n  float: left;\n  height: 100%;\n}\n.ql-snow.ql-toolbar button:active:hover,\n.ql-snow .ql-toolbar button:active:hover {\n  outline: none;\n}\n.ql-snow.ql-toolbar input.ql-image[type=file],\n.ql-snow .ql-toolbar input.ql-image[type=file] {\n  display: none;\n}\n.ql-snow.ql-toolbar button:hover,\n.ql-snow .ql-toolbar button:hover,\n.ql-snow.ql-toolbar button:focus,\n.ql-snow .ql-toolbar button:focus,\n.ql-snow.ql-toolbar button.ql-active,\n.ql-snow .ql-toolbar button.ql-active,\n.ql-snow.ql-toolbar .ql-picker-label:hover,\n.ql-snow .ql-toolbar .ql-picker-label:hover,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active,\n.ql-snow.ql-toolbar .ql-picker-item:hover,\n.ql-snow .ql-toolbar .ql-picker-item:hover,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected {\n  color: #06c;\n}\n.ql-snow.ql-toolbar button:hover .ql-fill,\n.ql-snow .ql-toolbar button:hover .ql-fill,\n.ql-snow.ql-toolbar button:focus .ql-fill,\n.ql-snow .ql-toolbar button:focus .ql-fill,\n.ql-snow.ql-toolbar button.ql-active .ql-fill,\n.ql-snow .ql-toolbar button.ql-active .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {\n  fill: #06c;\n}\n.ql-snow.ql-toolbar button:hover .ql-stroke,\n.ql-snow .ql-toolbar button:hover .ql-stroke,\n.ql-snow.ql-toolbar button:focus .ql-stroke,\n.ql-snow .ql-toolbar button:focus .ql-stroke,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n.ql-snow.ql-toolbar button:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar button:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar button:focus .ql-stroke-miter,\n.ql-snow .ql-toolbar button:focus .ql-stroke-miter,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {\n  stroke: #06c;\n}\n@media (pointer: coarse) {\n  .ql-snow.ql-toolbar button:hover:not(.ql-active),\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) {\n    color: #444;\n  }\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {\n    fill: #444;\n  }\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {\n    stroke: #444;\n  }\n}\n.ql-snow {\n  box-sizing: border-box;\n}\n.ql-snow * {\n  box-sizing: border-box;\n}\n.ql-snow .ql-hidden {\n  display: none;\n}\n.ql-snow .ql-out-bottom,\n.ql-snow .ql-out-top {\n  visibility: hidden;\n}\n.ql-snow .ql-tooltip {\n  position: absolute;\n  transform: translateY(10px);\n}\n.ql-snow .ql-tooltip a {\n  cursor: pointer;\n  text-decoration: none;\n}\n.ql-snow .ql-tooltip.ql-flip {\n  transform: translateY(-10px);\n}\n.ql-snow .ql-formats {\n  display: inline-block;\n  vertical-align: middle;\n}\n.ql-snow .ql-formats:after {\n  clear: both;\n  content: '';\n  display: table;\n}\n.ql-snow .ql-stroke {\n  fill: none;\n  stroke: #444;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 2;\n}\n.ql-snow .ql-stroke-miter {\n  fill: none;\n  stroke: #444;\n  stroke-miterlimit: 10;\n  stroke-width: 2;\n}\n.ql-snow .ql-fill,\n.ql-snow .ql-stroke.ql-fill {\n  fill: #444;\n}\n.ql-snow .ql-empty {\n  fill: none;\n}\n.ql-snow .ql-even {\n  fill-rule: evenodd;\n}\n.ql-snow .ql-thin,\n.ql-snow .ql-stroke.ql-thin {\n  stroke-width: 1;\n}\n.ql-snow .ql-transparent {\n  opacity: 0.4;\n}\n.ql-snow .ql-direction svg:last-child {\n  display: none;\n}\n.ql-snow .ql-direction.ql-active svg:last-child {\n  display: inline;\n}\n.ql-snow .ql-direction.ql-active svg:first-child {\n  display: none;\n}\n.ql-snow .ql-editor h1 {\n  font-size: 2em;\n}\n.ql-snow .ql-editor h2 {\n  font-size: 1.5em;\n}\n.ql-snow .ql-editor h3 {\n  font-size: 1.17em;\n}\n.ql-snow .ql-editor h4 {\n  font-size: 1em;\n}\n.ql-snow .ql-editor h5 {\n  font-size: 0.83em;\n}\n.ql-snow .ql-editor h6 {\n  font-size: 0.67em;\n}\n.ql-snow .ql-editor a {\n  text-decoration: underline;\n}\n.ql-snow .ql-editor blockquote {\n  border-left: 4px solid #ccc;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  padding-left: 16px;\n}\n.ql-snow .ql-editor code,\n.ql-snow .ql-editor pre {\n  background-color: #f0f0f0;\n  border-radius: 3px;\n}\n.ql-snow .ql-editor pre {\n  white-space: pre-wrap;\n  margin-bottom: 5px;\n  margin-top: 5px;\n  padding: 5px 10px;\n}\n.ql-snow .ql-editor code {\n  font-size: 85%;\n  padding: 2px 4px;\n}\n.ql-snow .ql-editor pre.ql-syntax {\n  background-color: #23241f;\n  color: #f8f8f2;\n  overflow: visible;\n}\n.ql-snow .ql-editor img {\n  max-width: 100%;\n}\n.ql-snow .ql-picker {\n  color: #444;\n  display: inline-block;\n  float: left;\n  font-size: 14px;\n  font-weight: 500;\n  height: 24px;\n  position: relative;\n  vertical-align: middle;\n}\n.ql-snow .ql-picker-label {\n  cursor: pointer;\n  display: inline-block;\n  height: 100%;\n  padding-left: 8px;\n  padding-right: 2px;\n  position: relative;\n  width: 100%;\n}\n.ql-snow .ql-picker-label::before {\n  display: inline-block;\n  line-height: 22px;\n}\n.ql-snow .ql-picker-options {\n  background-color: #fff;\n  display: none;\n  min-width: 100%;\n  padding: 4px 8px;\n  position: absolute;\n  white-space: nowrap;\n}\n.ql-snow .ql-picker-options .ql-picker-item {\n  cursor: pointer;\n  display: block;\n  padding-bottom: 5px;\n  padding-top: 5px;\n}\n.ql-snow .ql-picker.ql-expanded .ql-picker-label {\n  color: #ccc;\n  z-index: 2;\n}\n.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {\n  fill: #ccc;\n}\n.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {\n  stroke: #ccc;\n}\n.ql-snow .ql-picker.ql-expanded .ql-picker-options {\n  display: block;\n  margin-top: -1px;\n  top: 100%;\n  z-index: 1;\n}\n.ql-snow .ql-color-picker,\n.ql-snow .ql-icon-picker {\n  width: 28px;\n}\n.ql-snow .ql-color-picker .ql-picker-label,\n.ql-snow .ql-icon-picker .ql-picker-label {\n  padding: 2px 4px;\n}\n.ql-snow .ql-color-picker .ql-picker-label svg,\n.ql-snow .ql-icon-picker .ql-picker-label svg {\n  right: 4px;\n}\n.ql-snow .ql-icon-picker .ql-picker-options {\n  padding: 4px 0px;\n}\n.ql-snow .ql-icon-picker .ql-picker-item {\n  height: 24px;\n  width: 24px;\n  padding: 2px 4px;\n}\n.ql-snow .ql-color-picker .ql-picker-options {\n  padding: 3px 5px;\n  width: 152px;\n}\n.ql-snow .ql-color-picker .ql-picker-item {\n  border: 1px solid transparent;\n  float: left;\n  height: 16px;\n  margin: 2px;\n  padding: 0px;\n  width: 16px;\n}\n.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {\n  position: absolute;\n  margin-top: -9px;\n  right: 0;\n  top: 50%;\n  width: 18px;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {\n  content: attr(data-label);\n}\n.ql-snow .ql-picker.ql-header {\n  width: 98px;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item::before {\n  content: 'Normal';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  content: 'Heading 1';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  content: 'Heading 2';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  content: 'Heading 3';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  content: 'Heading 4';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  content: 'Heading 5';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  content: 'Heading 6';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  font-size: 2em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  font-size: 1.5em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  font-size: 1.17em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  font-size: 1em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  font-size: 0.83em;\n}\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  font-size: 0.67em;\n}\n.ql-snow .ql-picker.ql-font {\n  width: 108px;\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item::before {\n  content: 'Sans Serif';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before {\n  content: 'Serif';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before {\n  content: 'Monospace';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-snow .ql-picker.ql-size {\n  width: 98px;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item::before {\n  content: 'Normal';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before {\n  content: 'Small';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before {\n  content: 'Large';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before {\n  content: 'Huge';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before {\n  font-size: 10px;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before {\n  font-size: 18px;\n}\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before {\n  font-size: 32px;\n}\n.ql-snow .ql-color-picker.ql-background .ql-picker-item {\n  background-color: #fff;\n}\n.ql-snow .ql-color-picker.ql-color .ql-picker-item {\n  background-color: #000;\n}\n.ql-toolbar.ql-snow {\n  border: 1px solid #ccc;\n  box-sizing: border-box;\n  font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n  padding: 8px;\n}\n.ql-toolbar.ql-snow .ql-formats {\n  margin-right: 15px;\n}\n.ql-toolbar.ql-snow .ql-picker-label {\n  border: 1px solid transparent;\n}\n.ql-toolbar.ql-snow .ql-picker-options {\n  border: 1px solid transparent;\n  box-shadow: rgba(0,0,0,0.2) 0 2px 8px;\n}\n.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {\n  border-color: #ccc;\n}\n.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {\n  border-color: #ccc;\n}\n.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,\n.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {\n  border-color: #000;\n}\n.ql-toolbar.ql-snow + .ql-container.ql-snow {\n  border-top: 0px;\n}\n.ql-snow .ql-tooltip {\n  background-color: #fff;\n  border: 1px solid #ccc;\n  box-shadow: 0px 0px 5px #ddd;\n  color: #444;\n  padding: 5px 12px;\n  white-space: nowrap;\n}\n.ql-snow .ql-tooltip::before {\n  content: \"Visit URL:\";\n  line-height: 26px;\n  margin-right: 8px;\n}\n.ql-snow .ql-tooltip input[type=text] {\n  display: none;\n  border: 1px solid #ccc;\n  font-size: 13px;\n  height: 26px;\n  margin: 0px;\n  padding: 3px 5px;\n  width: 170px;\n}\n.ql-snow .ql-tooltip a.ql-preview {\n  display: inline-block;\n  max-width: 200px;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  vertical-align: top;\n}\n.ql-snow .ql-tooltip a.ql-action::after {\n  border-right: 1px solid #ccc;\n  content: 'Edit';\n  margin-left: 16px;\n  padding-right: 8px;\n}\n.ql-snow .ql-tooltip a.ql-remove::before {\n  content: 'Remove';\n  margin-left: 8px;\n}\n.ql-snow .ql-tooltip a {\n  line-height: 26px;\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-preview,\n.ql-snow .ql-tooltip.ql-editing a.ql-remove {\n  display: none;\n}\n.ql-snow .ql-tooltip.ql-editing input[type=text] {\n  display: inline-block;\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n  border-right: 0px;\n  content: 'Save';\n  padding-right: 0px;\n}\n.ql-snow .ql-tooltip[data-mode=link]::before {\n  content: \"Enter link:\";\n}\n.ql-snow .ql-tooltip[data-mode=formula]::before {\n  content: \"Enter formula:\";\n}\n.ql-snow .ql-tooltip[data-mode=video]::before {\n  content: \"Enter video:\";\n}\n.ql-snow a {\n  color: #06c;\n}\n.ql-container.ql-snow {\n  border: 1px solid #ccc;\n}\n",""]);const o=a},5426:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(8081),s=n.n(r),i=n(3645),a=n.n(i),o=n(5525),l=n(2222),c=n(7066),u=a()(s());u.i(o.Z),u.i(l.Z),u.i(c.Z),u.push([e.id,"#editor-container {\n    height: 350px;\n}",""]);const h=u},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,s,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),s&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=s):u[4]="".concat(s)),t.push(u))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},251:(e,t,n)=>{var r=n(2215),s=n(2584),i=n(609),a=n(8420),o=n(2847),l=n(8923),c=Date.prototype.getTime;function u(e){return null==e}function h(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}e.exports=function e(t,n,d){var m=d||{};return!!(m.strict?i(t,n):t===n)||(!t||!n||"object"!=typeof t&&"object"!=typeof n?m.strict?i(t,n):t==n:function(t,n,i){var d,m;if(typeof t!=typeof n)return!1;if(u(t)||u(n))return!1;if(t.prototype!==n.prototype)return!1;if(s(t)!==s(n))return!1;var f=a(t),p=a(n);if(f!==p)return!1;if(f||p)return t.source===n.source&&o(t)===o(n);if(l(t)&&l(n))return c.call(t)===c.call(n);var g=h(t),b=h(n);if(g!==b)return!1;if(g||b){if(t.length!==n.length)return!1;for(d=0;d<t.length;d++)if(t[d]!==n[d])return!1;return!0}if(typeof t!=typeof n)return!1;try{var y=r(t),v=r(n)}catch(e){return!1}if(y.length!==v.length)return!1;for(y.sort(),v.sort(),d=y.length-1;d>=0;d--)if(y[d]!=v[d])return!1;for(d=y.length-1;d>=0;d--)if(!e(t[m=y[d]],n[m],i))return!1;return!0}(t,n,m))}},4289:(e,t,n)=>{"use strict";var r=n(2215),s="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,o=Object.defineProperty,l=n(1044)(),c=o&&l,u=function(e,t,n,r){if(t in e)if(!0===r){if(e[t]===n)return}else if("function"!=typeof(s=r)||"[object Function]"!==i.call(s)||!r())return;var s;c?o(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n},h=function(e,t){var n=arguments.length>2?arguments[2]:{},i=r(t);s&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var o=0;o<i.length;o+=1)u(e,i[o],t[i[o]],n[i[o]])};h.supportsDescriptors=!!c,e.exports=h},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},i.prototype.listeners=function(e,t){var r=n?n+e:e,s=this._events[r];if(t)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var i=0,a=s.length,o=new Array(a);i<a;i++)o[i]=s[i].fn;return o},i.prototype.emit=function(e,t,r,s,i,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,s),!0;case 5:return u.fn.call(u.context,t,r,s,i),!0;case 6:return u.fn.call(u.context,t,r,s,i,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,m=u.length;for(c=0;c<m;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,s);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},i.prototype.on=function(e,t,r){var i=new s(t,r||this),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):(this._events[a]=i,this._eventsCount++),this},i.prototype.once=function(e,t,r){var i=new s(t,r||this,!0),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):(this._events[a]=i,this._eventsCount++),this},i.prototype.removeListener=function(e,t,s,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[a],this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||s&&o.context!==s||(0==--this._eventsCount?this._events=new r:delete this._events[a]);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||s&&o[l].context!==s)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new r:delete this._events[a]}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=n,i.EventEmitter=i,e.exports=i},4470:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,s=t.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!s&&!i)return!1;for(r in e);return void 0===r||t.call(e,r)},o=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(s)return s(e,n).value}return e[n]};e.exports=function e(){var t,n,r,s,c,u,h=arguments[0],d=1,m=arguments.length,f=!1;for("boolean"==typeof h&&(f=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<m;++d)if(null!=(t=arguments[d]))for(n in t)r=l(h,n),h!==(s=l(t,n))&&(f&&s&&(a(s)||(c=i(s)))?(c?(c=!1,u=r&&i(r)?r:[]):u=r&&a(r)?r:{},o(h,{name:n,newValue:e(f,u,s)})):void 0!==s&&o(h,{name:n,newValue:s}));return h}},7529:e=>{var t=-1,n=1,r=0;function s(e,c,h){if(e==c)return e?[[r,e]]:[];(h<0||e.length<h)&&(h=null);var d=a(e,c),m=e.substring(0,d);d=o(e=e.substring(d),c=c.substring(d));var f=e.substring(e.length-d),p=function(e,l){var c;if(!e)return[[n,l]];if(!l)return[[t,e]];var u=e.length>l.length?e:l,h=e.length>l.length?l:e,d=u.indexOf(h);if(-1!=d)return c=[[n,u.substring(0,d)],[r,h],[n,u.substring(d+h.length)]],e.length>l.length&&(c[0][0]=c[2][0]=t),c;if(1==h.length)return[[t,e],[n,l]];var m=function(e,t){var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;function s(e,t,n){for(var r,s,i,l,c=e.substring(n,n+Math.floor(e.length/4)),u=-1,h="";-1!=(u=t.indexOf(c,u+1));){var d=a(e.substring(n),t.substring(u)),m=o(e.substring(0,n),t.substring(0,u));h.length<m+d&&(h=t.substring(u-m,u)+t.substring(u,u+d),r=e.substring(0,n-m),s=e.substring(n+d),i=t.substring(0,u-m),l=t.substring(u+d))}return 2*h.length>=e.length?[r,s,i,l,h]:null}var i,l,c,u,h,d=s(n,r,Math.ceil(n.length/4)),m=s(n,r,Math.ceil(n.length/2));return d||m?(i=m?d&&d[4].length>m[4].length?d:m:d,e.length>t.length?(l=i[0],c=i[1],u=i[2],h=i[3]):(u=i[0],h=i[1],l=i[2],c=i[3]),[l,c,u,h,i[4]]):null}(e,l);if(m){var f=m[0],p=m[1],g=m[2],b=m[3],y=m[4],v=s(f,g),w=s(p,b);return v.concat([[r,y]],w)}return function(e,r){for(var s=e.length,a=r.length,o=Math.ceil((s+a)/2),l=o,c=2*o,u=new Array(c),h=new Array(c),d=0;d<c;d++)u[d]=-1,h[d]=-1;u[l+1]=0,h[l+1]=0;for(var m=s-a,f=m%2!=0,p=0,g=0,b=0,y=0,v=0;v<o;v++){for(var w=-v+p;w<=v-g;w+=2){for(var S=l+w,q=(x=w==-v||w!=v&&u[S-1]<u[S+1]?u[S+1]:u[S-1]+1)-w;x<s&&q<a&&e.charAt(x)==r.charAt(q);)x++,q++;if(u[S]=x,x>s)g+=2;else if(q>a)p+=2;else if(f&&(N=l+m-w)>=0&&N<c&&-1!=h[N]&&x>=(A=s-h[N]))return i(e,r,x,q)}for(var k=-v+b;k<=v-y;k+=2){for(var A,N=l+k,C=(A=k==-v||k!=v&&h[N-1]<h[N+1]?h[N+1]:h[N-1]+1)-k;A<s&&C<a&&e.charAt(s-A-1)==r.charAt(a-C-1);)A++,C++;if(h[N]=A,A>s)y+=2;else if(C>a)b+=2;else if(!f){var x;if((S=l+m-k)>=0&&S<c&&-1!=u[S])if(q=l+(x=u[S])-S,x>=(A=s-A))return i(e,r,x,q)}}}return[[t,e],[n,r]]}(e,l)}(e=e.substring(0,e.length-d),c=c.substring(0,c.length-d));return m&&p.unshift([r,m]),f&&p.push([r,f]),l(p),null!=h&&(p=function(e,n){var s=function(e,n){if(0===n)return[r,e];for(var s=0,i=0;i<e.length;i++){var a=e[i];if(a[0]===t||a[0]===r){var o=s+a[1].length;if(n===o)return[i+1,e];if(n<o){e=e.slice();var l=n-s,c=[a[0],a[1].slice(0,l)],u=[a[0],a[1].slice(l)];return e.splice(i,1,c,u),[i+1,e]}s=o}}throw new Error("cursor_pos is out of bounds!")}(e,n),i=s[1],a=s[0],o=i[a],l=i[a+1];if(null==o)return e;if(o[0]!==r)return e;if(null!=l&&o[1]+l[1]===l[1]+o[1])return i.splice(a,2,l,o),u(i,a,2);if(null!=l&&0===l[1].indexOf(o[1])){i.splice(a,2,[l[0],o[1]],[0,o[1]]);var c=l[1].slice(o[1].length);return c.length>0&&i.splice(a+2,0,[l[0],c]),u(i,a,3)}return e}(p,h)),function(e){for(var s=!1,i=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},a=2;a<e.length;a+=1)e[a-2][0]===r&&((o=e[a-2][1]).charCodeAt(o.length-1)>=55296&&o.charCodeAt(o.length-1)<=56319)&&e[a-1][0]===t&&i(e[a-1][1])&&e[a][0]===n&&i(e[a][1])&&(s=!0,e[a-1][1]=e[a-2][1].slice(-1)+e[a-1][1],e[a][1]=e[a-2][1].slice(-1)+e[a][1],e[a-2][1]=e[a-2][1].slice(0,-1));var o;if(!s)return e;var l=[];for(a=0;a<e.length;a+=1)e[a][1].length>0&&l.push(e[a]);return l}(p)}function i(e,t,n,r){var i=e.substring(0,n),a=t.substring(0,r),o=e.substring(n),l=t.substring(r),c=s(i,a),u=s(o,l);return c.concat(u)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),s=r,i=0;n<s;)e.substring(i,s)==t.substring(i,s)?i=n=s:r=s,s=Math.floor((r-n)/2+n);return s}function o(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),s=r,i=0;n<s;)e.substring(e.length-s,e.length-i)==t.substring(t.length-s,t.length-i)?i=n=s:r=s,s=Math.floor((r-n)/2+n);return s}function l(e){e.push([r,""]);for(var s,i=0,c=0,u=0,h="",d="";i<e.length;)switch(e[i][0]){case n:u++,d+=e[i][1],i++;break;case t:c++,h+=e[i][1],i++;break;case r:c+u>1?(0!==c&&0!==u&&(0!==(s=a(d,h))&&(i-c-u>0&&e[i-c-u-1][0]==r?e[i-c-u-1][1]+=d.substring(0,s):(e.splice(0,0,[r,d.substring(0,s)]),i++),d=d.substring(s),h=h.substring(s)),0!==(s=o(d,h))&&(e[i][1]=d.substring(d.length-s)+e[i][1],d=d.substring(0,d.length-s),h=h.substring(0,h.length-s))),0===c?e.splice(i-u,c+u,[n,d]):0===u?e.splice(i-c,c+u,[t,h]):e.splice(i-c-u,c+u,[t,h],[n,d]),i=i-c-u+(c?1:0)+(u?1:0)+1):0!==i&&e[i-1][0]==r?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,u=0,c=0,h="",d=""}""===e[e.length-1][1]&&e.pop();var m=!1;for(i=1;i<e.length-1;)e[i-1][0]==r&&e[i+1][0]==r&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),m=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),m=!0)),i++;m&&l(e)}var c=s;function u(e,t,n){for(var r=t+n-1;r>=0&&r>=t-1;r--)if(r+1<e.length){var s=e[r],i=e[r+1];s[0]===i[1]&&e.splice(r,2,[s[0],s[1]+i[1]])}return e}c.INSERT=n,c.DELETE=t,c.EQUAL=r,e.exports=c},3162:function(e,t,n){var r,s;void 0===(s="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){o(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var o=i.URL||i.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?s(l):r(l.href)?t(e,n,a):s(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){s(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(r(e))t(e,n,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){s(a)}))}}:function(e,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var o="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},u.readAsDataURL(e)}else{var h=i.URL||i.webkitURL,d=h.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});i.saveAs=o.saveAs=o,e.exports=o})?r.apply(t,[]):r)||(e.exports=s)},7648:e=>{"use strict";var t=Array.prototype.slice,n=Object.prototype.toString;e.exports=function(e){var r=this;if("function"!=typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var s,i=t.call(arguments,1),a=Math.max(0,r.length-i.length),o=[],l=0;l<a;l++)o.push("$"+l);if(s=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof s){var n=r.apply(this,i.concat(t.call(arguments)));return Object(n)===n?n:this}return r.apply(e,i.concat(t.call(arguments)))})),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s}},8612:(e,t,n)=>{"use strict";var r=n(7648);e.exports=Function.prototype.bind||r},5972:e=>{"use strict";var t=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(e){n=null}t.functionsHaveConfigurableNames=function(){if(!t()||!n)return!1;var e=n((function(){}),"name");return!!e&&!!e.configurable};var r=Function.prototype.bind;t.boundFunctionsHaveNames=function(){return t()&&"function"==typeof r&&""!==function(){}.bind().name},e.exports=t},210:(e,t,n)=>{"use strict";var r,s=SyntaxError,i=Function,a=TypeError,o=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var c=function(){throw new a},u=l?function(){try{return c}catch(e){try{return l(arguments,"callee").get}catch(e){return c}}}():c,h=n(1405)(),d=n(8185)(),m=Object.getPrototypeOf||(d?function(e){return e.__proto__}:null),f={},p="undefined"!=typeof Uint8Array&&m?m(Uint8Array):r,g={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h&&m?m([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&m?m(m([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h&&m?m((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h&&m?m((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&m?m(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":s,"%ThrowTypeError%":u,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(m)try{null.error}catch(e){var b=m(m(e));g["%Error.prototype%"]=b}var y=function e(t){var n;if("%AsyncFunction%"===t)n=o("async function () {}");else if("%GeneratorFunction%"===t)n=o("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=o("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var s=e("%AsyncGenerator%");s&&m&&(n=m(s.prototype))}return g[t]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=n(8612),S=n(7642),q=w.call(Function.call,Array.prototype.concat),k=w.call(Function.apply,Array.prototype.splice),A=w.call(Function.call,String.prototype.replace),N=w.call(Function.call,String.prototype.slice),C=w.call(Function.call,RegExp.prototype.exec),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,B=function(e,t){var n,r=e;if(S(v,r)&&(r="%"+(n=v[r])[0]+"%"),S(g,r)){var i=g[r];if(i===f&&(i=y(r)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new s("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/,e))throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=N(e,0,1),n=N(e,-1);if("%"===t&&"%"!==n)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new s("invalid intrinsic syntax, expected opening `%`");var r=[];return A(e,x,(function(e,t,n,s){r[r.length]=n?A(s,E,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",i=B("%"+r+"%",t),o=i.name,c=i.value,u=!1,h=i.alias;h&&(r=h[0],k(n,q([0,1],h)));for(var d=1,m=!0;d<n.length;d+=1){var f=n[d],p=N(f,0,1),b=N(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===b||"'"===b||"`"===b)&&p!==b)throw new s("property names with quotes must have matching quotes");if("constructor"!==f&&m||(u=!0),S(g,o="%"+(r+="."+f)+"%"))c=g[o];else if(null!=c){if(!(f in c)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&d+1>=n.length){var y=l(c,f);c=(m=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:c[f]}else m=S(c,f),c=c[f];m&&!u&&(g[o]=c)}}return c}},1044:(e,t,n)=>{"use strict";var r=n(210)("%Object.defineProperty%",!0),s=function(){if(r)try{return r({},"a",{value:1}),!0}catch(e){return!1}return!1};s.hasArrayLengthDefineBug=function(){if(!s())return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=s},8185:e=>{"use strict";var t={foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof n)}},1405:(e,t,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,s=n(5419);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&s()}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0}},6410:(e,t,n)=>{"use strict";var r=n(5419);e.exports=function(){return r()&&!!Symbol.toStringTag}},7642:(e,t,n)=>{"use strict";var r=n(8612);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},2584:(e,t,n)=>{"use strict";var r=n(6410)(),s=n(1924)("Object.prototype.toString"),i=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===s(e)},a=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==s(e)&&"[object Function]"===s(e.callee)},o=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=o?i:a},8923:(e,t,n)=>{"use strict";var r=Date.prototype.getDay,s=Object.prototype.toString,i=n(6410)();e.exports=function(e){return"object"==typeof e&&null!==e&&(i?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object Date]"===s.call(e))}},8420:(e,t,n)=>{"use strict";var r,s,i,a,o=n(1924),l=n(6410)();if(l){r=o("Object.prototype.hasOwnProperty"),s=o("RegExp.prototype.exec"),i={};var c=function(){throw i};a={toString:c,valueOf:c},"symbol"==typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=c)}var u=o("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;e.exports=l?function(e){if(!e||"object"!=typeof e)return!1;var t=h(e,"lastIndex");if(!t||!r(t,"value"))return!1;try{s(e,a)}catch(e){return e===i}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===u(e)}},1136:e=>{e.exports={space:"",cycles:!1,replacer:(e,t)=>t,stringify:JSON.stringify}},7918:(e,t,n)=>{"use strict";const r=n(1136),s=n(9572).isFunction,i=n(9572).isBoolean,a=n(9572).isObject,o=n(9572).isArray,l=n(9572).isRegex,c=n(9572).assign,u=n(9572).keys;e.exports=function(e,t){t=t||c({},r),s(t)&&(t={compare:t});const n=t.space||r.space,h=i(t.cycles)?t.cycles:r.cycles,d=t.replacer||r.replacer,m=t.stringify||r.stringify,f=t.compare&&(p=t.compare,function(e){return function(t,n){const r={key:t,value:e[t]},s={key:n,value:e[n]};return p(r,s)}});var p;h||m(e);const g=[];return function e(t,r,s,i){const c=n?"\n"+new Array(i+1).join(n):"",p=n?": ":":";if(s=function(e){return null==e?e:l(e)?e.toString():e.toJSON?e.toJSON():e}(s),void 0!==(s=d.call(t,r,s))){if(!a(s)||null===s)return m(s);if(o(s)){const t=[];for(let r=0;r<s.length;r++){const a=e(s,r,s[r],i+1)||m(null);t.push(c+n+a)}return"["+t.join(",")+c+"]"}{if(h){if(-1!==g.indexOf(s))return m("[Circular]");g.push(s)}const t=u(s).sort(f&&f(s)),r=[];for(let a=0;a<t.length;a++){const o=t[a],l=e(s,o,s[o],i+1);if(!l)continue;const u=m(o)+p+l;r.push(c+n+u)}return g.splice(g.indexOf(s),1),"{"+r.join(",")+c+"}"}}}({"":e},"",e,0)}},9572:e=>{"use strict";e.exports={isArray:Array.isArray,assign:Object.assign,isObject:e=>"object"==typeof e,isFunction:e=>"function"==typeof e,isBoolean:e=>"boolean"==typeof e,isRegex:e=>e instanceof RegExp,keys:Object.keys}},4244:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,n){return 0===e&&0===n?1/e==1/n:e===n||!(!t(e)||!t(n))}},609:(e,t,n)=>{"use strict";var r=n(4289),s=n(5559),i=n(4244),a=n(5624),o=n(2281),l=s(a(),Object);r(l,{getPolyfill:a,implementation:i,shim:o}),e.exports=l},5624:(e,t,n)=>{"use strict";var r=n(4244);e.exports=function(){return"function"==typeof Object.is?Object.is:r}},2281:(e,t,n)=>{"use strict";var r=n(5624),s=n(4289);e.exports=function(){var e=r();return s(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8987:(e,t,n)=>{"use strict";var r;if(!Object.keys){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=n(1414),o=Object.prototype.propertyIsEnumerable,l=!o.call({toString:null},"toString"),c=o.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&s.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===i.call(e),r=a(e),o=t&&"[object String]"===i.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var f=c&&n;if(o&&e.length>0&&!s.call(e,0))for(var p=0;p<e.length;++p)d.push(String(p));if(r&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var b in e)f&&"prototype"===b||!s.call(e,b)||d.push(String(b));if(l)for(var y=function(e){if("undefined"==typeof window||!m)return h(e);try{return h(e)}catch(e){return!1}}(e),v=0;v<u.length;++v)y&&"constructor"===u[v]||!s.call(e,u[v])||d.push(u[v]);return d}}e.exports=r},2215:(e,t,n)=>{"use strict";var r=Array.prototype.slice,s=n(1414),i=Object.keys,a=i?function(e){return i(e)}:n(8987),o=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return s(e)?o(r.call(e)):o(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},1414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},8514:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractCryptoEngine:()=>Lr,AccessDescription:()=>V,Accuracy:()=>P,AlgorithmIdentifier:()=>_,AltName:()=>K,ArgumentError:()=>u,AsnError:()=>d,AttCertValidityPeriod:()=>Y,Attribute:()=>W,AttributeCertificateInfoV1:()=>Zs,AttributeCertificateInfoV2:()=>Ei,AttributeCertificateV1:()=>ti,AttributeCertificateV2:()=>Hi,AttributeTypeAndValue:()=>b,AuthenticatedSafe:()=>$c,AuthorityKeyIdentifier:()=>nt,BasicConstraints:()=>it,BasicOCSPResponse:()=>Du,CAVersion:()=>lt,CRLBag:()=>ro,CRLDistributionPoints:()=>Dt,CertBag:()=>Na,CertID:()=>Fc,Certificate:()=>va,CertificateChainValidationEngine:()=>ku,CertificatePolicies:()=>vt,CertificateRevocationList:()=>Ya,CertificateSet:()=>Ho,CertificateTemplate:()=>At,CertificationRequest:()=>Gu,ChainValidationCode:()=>Su,ChainValidationError:()=>qu,ContentInfo:()=>Ri,CryptoEngine:()=>_r,DigestInfo:()=>Xu,DistributionPoint:()=>Vt,ECCCMSSharedInfo:()=>xc,ECNamedCurves:()=>En,ECPrivateKey:()=>Fn,ECPublicKey:()=>On,EncapsulatedContentInfo:()=>rh,EncryptedContentInfo:()=>Sr,EncryptedData:()=>lo,EnvelopedData:()=>Tc,ExtKeyUsage:()=>Rt,Extension:()=>Is,ExtensionValueFactory:()=>As,Extensions:()=>Hs,GeneralName:()=>x,GeneralNames:()=>te,GeneralSubtree:()=>Xt,HASHED_MESSAGE:()=>hh,HASH_ALGORITHM:()=>uh,Holder:()=>bi,InfoAccess:()=>Ut,IssuerAndSerialNumber:()=>Go,IssuerSerial:()=>Ls,IssuingDistributionPoint:()=>Wt,KEKIdentifier:()=>Gl,KEKRecipientInfo:()=>nc,KeyAgreeRecipientIdentifier:()=>xl,KeyAgreeRecipientInfo:()=>Kl,KeyBag:()=>sh,KeyTransRecipientInfo:()=>al,MICROS:()=>D,MILLIS:()=>H,MacData:()=>ch,MessageImprint:()=>mh,NameConstraints:()=>rn,OCSPRequest:()=>Rh,OCSPResponse:()=>Kh,ObjectDigestInfo:()=>oi,OriginatorIdentifierOrKey:()=>fl,OriginatorInfo:()=>Jo,OriginatorPublicKey:()=>ul,OtherCertificateFormat:()=>Io,OtherKeyAttribute:()=>yl,OtherPrimeInfo:()=>Qn,OtherRecipientInfo:()=>mc,OtherRevocationInfoFormat:()=>Ro,PBES2Params:()=>Rr,PBKDF2Params:()=>Hr,PFX:()=>sm,PKCS8ShroudedKeyBag:()=>fo,PKIStatus:()=>cm,PKIStatusInfo:()=>um,POLICY_IDENTIFIER:()=>mt,POLICY_QUALIFIERS:()=>ft,ParameterError:()=>h,PasswordRecipientinfo:()=>cc,PkiObject:()=>m,PolicyConstraints:()=>ln,PolicyInformation:()=>gt,PolicyMapping:()=>dn,PolicyMappings:()=>pn,PolicyQualifierInfo:()=>dt,PrivateKeyInfo:()=>gr,PrivateKeyUsagePeriod:()=>vn,PublicKeyInfo:()=>$n,QCStatement:()=>Nn,QCStatements:()=>Cn,RDN:()=>w,RSAESOAEPParams:()=>qc,RSAPrivateKey:()=>cr,RSAPublicKey:()=>Tn,RSASSAPSSParams:()=>xr,RecipientEncryptedKey:()=>Vl,RecipientEncryptedKeys:()=>Pl,RecipientIdentifier:()=>Xo,RecipientInfo:()=>bc,RecipientKeyIdentifier:()=>kl,RelativeDistinguishedNames:()=>S,Request:()=>bh,ResponseBytes:()=>_h,ResponseData:()=>mu,RevocationInfoChoices:()=>_o,RevokedCertificate:()=>Ia,SECONDS:()=>O,SafeBag:()=>Ao,SafeBagValueFactory:()=>vo,SafeContents:()=>Co,SecretBag:()=>yo,Signature:()=>Hh,SignedAndUnsignedAttributes:()=>Gh,SignedCertificateTimestamp:()=>bs,SignedCertificateTimestampList:()=>ws,SignedData:()=>Yd,SignedDataVerifyError:()=>Qd,SignerInfo:()=>dd,SingleResponse:()=>Xc,SubjectDirectoryAttributes:()=>ks,TBSRequest:()=>Bh,TSTInfo:()=>Pd,TYPE:()=>q,TYPE_AND_VALUES:()=>y,Time:()=>Ki,TimeStampReq:()=>Nm,TimeStampResp:()=>Om,TimeType:()=>Mi,V2Form:()=>di,VALUE:()=>k,VALUE_BEFORE_DECODE:()=>v,checkCA:()=>wa,createCMSECDSASignature:()=>Zr,createECDSASignatureFromCMS:()=>Qr,engine:()=>jr,getAlgorithmByOID:()=>Yr,getAlgorithmParameters:()=>Gr,getCrypto:()=>Fr,getEngine:()=>Jr,getHashAlgorithm:()=>Xr,getOIDByAlgorithm:()=>Wr,getRandomValues:()=>zr,id_AnyPolicy:()=>ve,id_AuthorityInfoAccess:()=>Ce,id_AuthorityKeyIdentifier:()=>qe,id_BaseCRLNumber:()=>ue,id_BasicConstraints:()=>le,id_CRLBag_X509CRL:()=>je,id_CRLDistributionPoints:()=>ge,id_CRLNumber:()=>ce,id_CRLReason:()=>he,id_CertBag_AttributeCertificate:()=>_e,id_CertBag_SDSICertificate:()=>$e,id_CertBag_X509Certificate:()=>Ue,id_CertificateIssuer:()=>fe,id_CertificatePolicies:()=>ye,id_ContentType_Data:()=>De,id_ContentType_EncryptedData:()=>Re,id_ContentType_EnvelopedData:()=>Te,id_ContentType_SignedData:()=>Pe,id_ExtKeyUsage:()=>Ae,id_FreshestCRL:()=>be,id_InhibitAnyPolicy:()=>Ne,id_InvalidityDate:()=>de,id_IssuerAltName:()=>oe,id_IssuingDistributionPoint:()=>me,id_KeyUsage:()=>se,id_MicrosoftAppPolicies:()=>we,id_MicrosoftCaVersion:()=>Oe,id_MicrosoftCertTemplateV1:()=>Be,id_MicrosoftCertTemplateV2:()=>Ve,id_MicrosoftPrevCaCertHash:()=>Ie,id_NameConstraints:()=>pe,id_PKIX_OCSP_Basic:()=>Je,id_PolicyConstraints:()=>ke,id_PolicyMappings:()=>Se,id_PrivateKeyUsagePeriod:()=>ie,id_QCStatements:()=>He,id_SignedCertificateTimestampList:()=>Ee,id_SubjectAltName:()=>ae,id_SubjectDirectoryAttributes:()=>ne,id_SubjectInfoAccess:()=>xe,id_SubjectKeyIdentifier:()=>re,id_ad:()=>Ke,id_ad_caIssuers:()=>Fe,id_ad_ocsp:()=>ze,id_eContentType_TSTInfo:()=>Le,id_pkix:()=>Me,id_sha1:()=>We,id_sha256:()=>Ge,id_sha384:()=>Ze,id_sha512:()=>Qe,kdf:()=>ts,setEngine:()=>Kr,stringPrep:()=>f,verifySCTsForCertificate:()=>ys});var r=n(3494),s=n(2043),i=n(1225);class a{constructor(e={}){if("view"in e)this.fromUint8Array(e.view);else if("buffer"in e)this.fromArrayBuffer(e.buffer);else if("string"in e)this.fromString(e.string);else if("hexstring"in e)this.fromHexString(e.hexstring);else if("length"in e&&e.length>0){if(this.length=e.length,e.stub)for(let t=0;t<this._view.length;t++)this._view[t]=e.stub}else this.length=0}set buffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let n=0;n<t;n++)this.view[n]=e.charCodeAt(n)}toString(e=0,t=this.view.length-e){let n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++)n+=String.fromCharCode(this.view[r]);return n}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);const n=new Map;n.set("0",0),n.set("1",1),n.set("2",2),n.set("3",3),n.set("4",4),n.set("5",5),n.set("6",6),n.set("7",7),n.set("8",8),n.set("9",9),n.set("A",10),n.set("a",10),n.set("B",11),n.set("b",11),n.set("C",12),n.set("c",12),n.set("D",13),n.set("d",13),n.set("E",14),n.set("e",14),n.set("F",15),n.set("f",15);let r=0,s=0;for(let i=0;i<t;i++)i%2?(s|=n.get(e.charAt(i)),this.view[r]=s,r++):s=n.get(e.charAt(i))<<4}toHexString(e=0,t=this.view.length-e){let n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++){const e=this.view[r].toString(16).toUpperCase();n=n+(1==e.length?"0":"")+e}return n}copy(e=0,t=this.length-e){if(!e&&!this.length)return new a;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new a({buffer:this._buffer.slice(e,e+t)})}slice(e=0,t=this.length){if(!e&&!this.length)return new a;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new a({buffer:this._buffer.slice(e,t)})}realloc(e){const t=new ArrayBuffer(e),n=new Uint8Array(t);e>this._view.length?n.set(this._view):n.set(new Uint8Array(this._buffer,0,e)),this._buffer=t,this._view=new Uint8Array(this._buffer)}append(e){const t=this.length,n=e.length,r=e._view.subarray();this.realloc(t+n),this._view.set(r,t)}insert(e,t=0,n=this.length-t){return!(t>this.length-1||(n>this.length-t&&(n=this.length-t),n>e.length&&(n=e.length),n==e.length?this._view.set(e._view,t):this._view.set(e._view.subarray(0,n),t),0))}isEqual(e){if(this.length!=e.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e.view[t])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}findPattern(e,t,n,r){const{start:s,length:i,backward:a}=this.prepareFindParameters(t,n,r),o=e.length;if(o>i)return-1;const l=[];for(let t=0;t<o;t++)l.push(e.view[t]);for(let e=0;e<=i-o;e++){let t=!0;const n=a?s-o-e:s+e;for(let e=0;e<o;e++)if(this.view[e+n]!=l[e]){t=!1;break}if(t)return a?s-o-e:s+o+e}return-1}findFirstIn(e,t,n,r){const{start:s,length:i,backward:a}=this.prepareFindParameters(t,n,r),o={id:-1,position:a?0:s+i,length:0};for(let t=0;t<e.length;t++){const n=this.findPattern(e[t],s,i,a);if(-1!=n){let r=!1;const s=e[t].length;a?n-s>=o.position-o.length&&(r=!0):n-s<=o.position-o.length&&(r=!0),r&&(o.position=n,o.id=t,o.length=s)}}return o}findAllIn(e,t,n){let{start:r,length:s}=this.prepareFindParameters(t,n);const i=[];let a={id:-1,position:r};for(;;){const t=a.position;if(a=this.findFirstIn(e,a.position,s),-1==a.id)break;s-=a.position-t,i.push({id:a.id,position:a.position})}return i}findAllPatternIn(e,t,n){const{start:r,length:s}=this.prepareFindParameters(t,n),i=[],a=e.length;if(a>s)return-1;const o=Array.from(e.view);for(let e=0;e<=s-a;e++){let t=!0;const n=r+e;for(let e=0;e<a;e++)if(this.view[e+n]!=o[e]){t=!1;break}t&&(i.push(r+a+e),e+=a-1)}return i}findFirstNotIn(e,t,n,r){let{start:s,length:i,backward:o}=this.prepareFindParameters(t,n,r);const l={left:{id:-1,position:s},right:{id:-1,position:0},value:new a};let c=i;for(;c>0;){if(l.right=this.findFirstIn(e,o?s-i+c:s+i-c,c,o),-1==l.right.id){i=c,o?s-=i:s=l.left.position,l.value=new a({buffer:this._buffer.slice(s,s+i)});break}if(l.right.position!=(o?l.left.position-e[l.right.id].length:l.left.position+e[l.right.id].length)){o?(s=l.right.position+e[l.right.id].length,i=l.left.position-l.right.position-e[l.right.id].length):(s=l.left.position,i=l.right.position-l.left.position-e[l.right.id].length),l.value=new a({buffer:this._buffer.slice(s,s+i)});break}l.left=l.right,c-=e[l.right.id].length}if(o){const e=l.right;l.right=l.left,l.left=e}return l}findAllNotIn(e,t,n){let{start:r,length:s}=this.prepareFindParameters(t,n);const i=[];let o={left:{id:-1,position:r},right:{id:-1,position:r},value:new a};do{const t=o.right.position;o=this.findFirstNotIn(e,o.right.position,s),s-=o.right.position-t,i.push({left:{id:o.left.id,position:o.left.position},right:{id:o.right.id,position:o.right.position},value:o.value})}while(-1!=o.right.id);return i}findFirstSequence(e,t,n,r){let{start:s,length:i,backward:o}=this.prepareFindParameters(t,n,r);const l=this.skipNotPatterns(e,s,i,o);if(-1==l)return{position:-1,value:new a};const c=this.skipPatterns(e,l,i-(o?s-l:l-s),o);return o?(s=c,i=l-c):(s=l,i=c-l),{position:c,value:new a({buffer:this._buffer.slice(s,s+i)})}}findAllSequences(e,t,n){let{start:r,length:s}=this.prepareFindParameters(t,n);const i=[];let o={position:r,value:new a};do{const t=o.position;o=this.findFirstSequence(e,o.position,s),-1!=o.position&&(s-=o.position-t,i.push({position:o.position,value:o.value}))}while(-1!=o.position);return i}findPairedPatterns(e,t,n,r){const s=[];if(e.isEqual(t))return s;const{start:i,length:a}=this.prepareFindParameters(n,r);let o=0;const l=this.findAllPatternIn(e,i,a);if(!Array.isArray(l)||0==l.length)return s;const c=this.findAllPatternIn(t,i,a);if(!Array.isArray(c)||0==c.length)return s;for(;o<l.length&&0!=c.length;)if(l[0]!=c[0]){if(l[o]>c[0])break;for(;l[o]<c[0]&&(o++,!(o>=l.length)););s.push({left:l[o-1],right:c[0]}),l.splice(o-1,1),c.splice(0,1),o=0}else s.push({left:l[0],right:c[0]}),l.splice(0,1),c.splice(0,1);return s.sort(((e,t)=>e.left-t.left)),s}findPairedArrays(e,t,n,r){const{start:s,length:i}=this.prepareFindParameters(n,r),a=[];let o=0;const l=this.findAllIn(e,s,i);if(0==l.length)return a;const c=this.findAllIn(t,s,i);if(0==c.length)return a;for(;o<l.length&&0!=c.length;)if(l[0].position!=c[0].position){if(l[o].position>c[0].position)break;for(;l[o].position<c[0].position&&(o++,!(o>=l.length)););a.push({left:l[o-1],right:c[0]}),l.splice(o-1,1),c.splice(0,1),o=0}else a.push({left:l[0],right:c[0]}),l.splice(0,1),c.splice(0,1);return a.sort(((e,t)=>e.left.position-t.left.position)),a}replacePattern(e,t,n,r,s=null){let i,a=[];const o={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:l,length:c}=this.prepareFindParameters(n,r);if(null==s){if(a=this.findAllIn([e],l,c),0==a.length)return o}else a=s;o.searchPatternPositions.push(...Array.from(a,(e=>e.position)));const u=e.length-t.length,h=new ArrayBuffer(this.view.length-a.length*u),d=new Uint8Array(h);for(d.set(new Uint8Array(this.buffer,0,l)),i=0;i<a.length;i++){const n=0==i?l:a[i-1].position;d.set(new Uint8Array(this.buffer,n,a[i].position-e.length-n),n-i*u),d.set(t.view,a[i].position-e.length-i*u),o.replacePatternPositions.push(a[i].position-e.length-i*u)}return i--,d.set(new Uint8Array(this.buffer,a[i].position,this.length-a[i].position),a[i].position-e.length+t.length-i*u),this.buffer=h,this.view=new Uint8Array(this.buffer),o.status=1,o}skipPatterns(e,t,n,r){const{start:s,length:i,backward:a}=this.prepareFindParameters(t,n,r);let o=s;for(let t=0;t<e.length;t++){const n=e[t].length,r=a?o-n:o;let l=!0;for(let s=0;s<n;s++)if(this.view[s+r]!=e[t].view[s]){l=!1;break}if(l)if(t=-1,a){if(o-=n,o<=0)return o}else if(o+=n,o>=s+i)return o}return o}skipNotPatterns(e,t,n,r){const{start:s,length:i,backward:a}=this.prepareFindParameters(t,n,r);let o=-1;for(let t=0;t<i;t++){for(let n=0;n<e.length;n++){const r=e[n].length,i=a?s-t-r:s+t;let l=!0;for(let t=0;t<r;t++)if(this.view[t+i]!=e[n].view[t]){l=!1;break}if(l){o=a?s-t:s+t;break}}if(-1!=o)break}return o}prepareFindParameters(e=null,t=null,n=!1){return null===e&&(e=n?this.length:0),e>this.length&&(e=this.length),n?(null===t&&(t=e),t>e&&(t=e)):(null===t&&(t=this.length-e),t>this.length-e&&(t=this.length-e)),{start:e,length:t,backward:n}}}class o{constructor(e={}){this._stream=new a,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,this.stream="view"in e?new a({view:e.view}):"buffer"in e?new a({buffer:e.buffer}):"string"in e?new a({string:e.string}):"hexstring"in e?new a({hexstring:e.hexstring}):"stream"in e?e.stream.slice():new a,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(null==t||t>this.length)&&(t=this.length);const n=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==n)return n;if(this.backward){if(n<this.start-e.length-t)return-1}else if(n>this.start+e.length+t)return-1;return this.start=n,n}findFirstIn(e,t=null){(null==t||t>this.length)&&(t=this.length);const n=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==n.id)return n;if(this.backward){if(n.position<this.start-e[n.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(n.position>this.start+e[n.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=n.position,n}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e,t=null){(null==t||t>this._length)&&(t=this._length);const n=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==n.left.id&&-1==n.right.id)return n;if(this.backward){if(-1!=n.right.id&&n.right.position<this._start-e[n.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new a}}else if(-1!=n.left.id&&n.left.position>this._start+e[n.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new a};return this.backward?-1==n.left.id?this.start=0:this.start=n.left.position:-1==n.right.id?this.start=this._start+this._length:this.start=n.right.position,n}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e,t=null,n=null){(null==t||t>this._length)&&(t=this._length),(null==n||n>t)&&(n=t);const r=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==r.value.length)return r;if(this.backward){if(r.position<this._start-r.value.length-n)return{position:-1,value:new a}}else if(r.position>this._start+r.value.length+n)return{position:-1,value:new a};return this.start=r.position,r}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t,n=null){(null==n||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,s=this.stream.findPairedPatterns(e,t,r,this.length);if(s.length)if(this.backward){if(s[0].right<this.start-t.length-n)return[]}else if(s[0].left>this.start+e.length+n)return[];return s}findPairedArrays(e,t,n=null){(null==n||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,s=this.stream.findPairedArrays(e,t,r,this.length);if(s.length)if(this.backward){if(s[0].right.position<this.start-t[s[0].right.id].length-n)return[]}else if(s[0].left.position>this.start+e[s[0].left.id].length+n)return[];return s}replacePattern(e,t){const n=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,n,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),n=new Uint8Array(t.buffer);this.stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[2],this._stream.view[this._start+1]=n[1],this._stream.view[this._start+2]=n[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return new Uint8Array(0);let n;if(this._length<e&&(e=this._length),this.backward){const t=this._stream.view.subarray(this._length-e,this._length);n=new Uint8Array(e);for(let r=0;r<e;r++)n[e-1-r]=t[r]}else n=this._stream.view.subarray(this._start,this._start+e);return t&&(this.start+=this.backward?-1*e:e),n}getUint16(e=!0){const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(e=!0){const t=this.getUint16(e),n=32768;return t&n?-(n-(t^n)):t}getUint24(e=!0){const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(e=!0){const t=this.getBlock(4,e);return t.length<4?0:16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=!0){const t=this.getUint32(e),n=2147483648;return t&n?-(n-(t^n)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+o.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}o.APPEND_BLOCK=1e3;const l=new ArrayBuffer(0),c="";class u extends TypeError{constructor(){super(...arguments),this.name=u.NAME}static isType(e,t){if("string"==typeof t){if("Array"===t&&Array.isArray(e))return!0;if("ArrayBuffer"===t&&e instanceof ArrayBuffer)return!0;if("ArrayBufferView"===t&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t,...n){for(const t of n)if(this.isType(e,t))return;const r=n.map((e=>e instanceof Function&&"name"in e?e.name:`${e}`));throw new u(`Parameter '${t}' is not of type ${r.length>1?`(${r.join(" or ")})`:r[0]}`)}}u.NAME="ArgumentError";class h extends TypeError{constructor(e,t=null,n){super(),this.name=h.NAME,this.field=e,t&&(this.target=t),this.message=n||`Absent mandatory parameter '${e}' ${t?` in '${t}'`:c}`}static assert(...e){let t,n,r=null;"string"==typeof e[0]?(r=e[0],t=e[1],n=e.slice(2)):(t=e[0],n=e.slice(1)),u.assert(t,"parameters","object");for(const e of n){if(null==t[e])throw new h(e,r)}}static assertEmpty(e,t,n){if(null==e)throw new h(t,n)}}h.NAME="ParameterError";class d extends Error{static assertSchema(e,t){if(!e.verified)throw new Error(`Object's schema was not verified against input data for ${t}`)}static assert(e,t){if(-1===e.offset)throw new d(`Error during parsing of ASN.1 data. Data is not correct for '${t}'.`)}constructor(e){super(e),this.name="AsnError"}}class m{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=r.fromBER(e);d.assert(t,this.name);try{return new this({schema:t.result})}catch(e){throw new d(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(!0)}return s.ep.ToString(t.toBER(),e)}}function f(e){let t=!1,n=c;const r=e.trim();for(let e=0;e<r.length;e++)32===r.charCodeAt(e)?!1===t&&(t=!0):(t&&(n+=" ",t=!1),n+=r[e]);return n.toLowerCase()}m.CLASS_NAME="PkiObject";const p="type",g="value";class b extends m{constructor(e={}){super(),this.type=i.H$(e,p,b.defaultValues(p)),this.value=i.H$(e,g,b.defaultValues(g)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case p:return c;case g:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.type||c}),new r.Any({name:t.value||c})]})}fromSchema(e){i.ze(e,[p,"typeValue"]);const t=r.compareSchema(e,e,b.schema({names:{type:p,value:"typeValue"}}));d.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}isEqual(e){const t=[r.Utf8String.blockName(),r.BmpString.blockName(),r.UniversalString.blockName(),r.NumericString.blockName(),r.PrintableString.blockName(),r.TeletexString.blockName(),r.VideotexString.blockName(),r.IA5String.blockName(),r.GraphicString.blockName(),r.VisibleString.blockName(),r.GeneralString.blockName(),r.CharacterString.blockName()];if(e instanceof ArrayBuffer)return s.vJ.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===b.blockName()){if(this.type!==e.type)return!1;const n=[!1,!1],r=this.value.constructor.blockName();for(const s of t)r===s&&(n[0]=!0),e.value.constructor.blockName()===s&&(n[1]=!0);if(n[0]!==n[1])return!1;if(n[0]&&n[1]){const t=f(this.value.valueBlock.value),n=f(e.value.valueBlock.value);if(0!==t.localeCompare(n))return!1}else if(!s.vJ.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}b.CLASS_NAME="AttributeTypeAndValue";const y="typesAndValues",v="valueBeforeDecode",w="RDN";class S extends m{constructor(e={}){super(),this.typesAndValues=i.H$(e,y,S.defaultValues(y)),this.valueBeforeDecode=i.H$(e,v,S.defaultValues(v)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case y:return[];case v:return l;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case y:return 0===t.length;case v:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.repeatedSequence||c,value:new r.Set({value:[new r.Repeated({name:t.repeatedSet||c,value:b.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){i.ze(e,[w,y]);const t=r.compareSchema(e,e,S.schema({names:{blockName:w,repeatedSet:y}}));d.assertSchema(t,this.className),y in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,(e=>new b({schema:e})))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(0===this.valueBeforeDecode.byteLength)return new r.Sequence({value:[new r.Set({value:Array.from(this.typesAndValues,(e=>e.toSchema()))})]});const e=r.fromBER(this.valueBeforeDecode);if(d.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof r.Sequence))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,(e=>e.toJSON()))}}isEqual(e){if(e instanceof S){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,n]of this.typesAndValues.entries())if(!1===n.isEqual(e.typesAndValues[t]))return!1;return!0}return e instanceof ArrayBuffer&&i.dN(this.valueBeforeDecode,e)}}S.CLASS_NAME="RelativeDistinguishedNames";const q="type",k="value";function A(e={},t=!1){const n=i.H$(e,"names",{});return new r.Sequence({optional:t,value:[new r.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:n.country_name||c,value:[new r.Choice({value:[new r.NumericString,new r.PrintableString]})]}),new r.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:n.administration_domain_name||c,value:[new r.Choice({value:[new r.NumericString,new r.PrintableString]})]}),new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:n.network_address||c,isHexOnly:!0}),new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:n.terminal_identifier||c,isHexOnly:!0}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:n.private_domain_name||c,value:[new r.Choice({value:[new r.NumericString,new r.PrintableString]})]}),new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:n.organization_name||c,isHexOnly:!0}),new r.Primitive({optional:!0,name:n.numeric_user_identifier||c,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new r.Constructed({optional:!0,name:n.personal_name||c,idBlock:{tagClass:3,tagNumber:5},value:[new r.Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new r.Constructed({optional:!0,name:n.organizational_unit_names||c,idBlock:{tagClass:3,tagNumber:6},value:[new r.Repeated({value:new r.PrintableString})]})]})}function N(e=!1){return new r.Sequence({optional:e,value:[new r.PrintableString,new r.PrintableString]})}function C(e=!1){return new r.Set({optional:e,value:[new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.Any]})]})}class x extends m{constructor(e={}){super(),this.type=i.H$(e,q,x.defaultValues(q)),this.value=i.H$(e,k,x.defaultValues(k)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case q:return 9;case k:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case q:return t===x.defaultValues(e);case k:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Choice({value:[new r.Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||c,value:[new r.ObjectIdentifier,new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Any]})]}),new r.Primitive({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:1}}),new r.Primitive({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:2}}),new r.Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||c,value:[A(t.builtInStandardAttributes||{},!1),N(!0),C(!0)]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||c,value:[S.schema(t.directoryName||{})]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||c,value:[new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Choice({value:[new r.TeletexString,new r.PrintableString,new r.UniversalString,new r.Utf8String,new r.BmpString]})]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new r.Choice({value:[new r.TeletexString,new r.PrintableString,new r.UniversalString,new r.Utf8String,new r.BmpString]})]})]}),new r.Primitive({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:6}}),new r.Primitive({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:7}}),new r.Primitive({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){i.ze(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=r.compareSchema(e,e,x.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(d.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:case 3:this.value=t.result.blockName;break;case 1:case 2:case 6:{const e=t.result.blockName;e.idBlock.tagClass=1,e.idBlock.tagNumber=22;const n=e.toBER(!1),s=r.fromBER(n);d.assert(s,"GeneralName value"),this.value=s.result.valueBlock.value}break;case 4:this.value=new S({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new r.OctetString({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const e=t.result.blockName;e.idBlock.tagClass=1,e.idBlock.tagNumber=6;const n=e.toBER(!1),s=r.fromBER(n);d.assert(s,"GeneralName registeredID"),this.value=s.result.valueBlock.toString()}}}toSchema(){switch(this.type){case 0:case 3:case 5:return new r.Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new r.IA5String({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new r.Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new r.ObjectIdentifier({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return x.schema()}}toJSON(){const e={type:this.type,value:c};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch(e){}return e}}x.CLASS_NAME="GeneralName";const E="accessMethod",B="accessLocation",I=[E,B];class V extends m{constructor(e={}){super(),this.accessMethod=i.H$(e,E,V.defaultValues(E)),this.accessLocation=i.H$(e,B,V.defaultValues(B)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case E:return c;case B:return new x;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.accessMethod||c}),x.schema(t.accessLocation||{})]})}fromSchema(e){i.ze(e,I);const t=r.compareSchema(e,e,V.schema({names:{accessMethod:E,accessLocation:{names:{blockName:B}}}}));d.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new x({schema:t.result.accessLocation})}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}V.CLASS_NAME="AccessDescription";const O="seconds",H="millis",D="micros";class P extends m{constructor(e={}){super(),O in e&&(this.seconds=i.H$(e,O,P.defaultValues(O))),H in e&&(this.millis=i.H$(e,H,P.defaultValues(H))),D in e&&(this.micros=i.H$(e,D,P.defaultValues(D))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case O:case H:case D:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case O:case H:case D:return t===P.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,optional:!0,value:[new r.Integer({optional:!0,name:t.seconds||c}),new r.Primitive({name:t.millis||c,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new r.Primitive({name:t.micros||c,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){i.ze(e,[O,H,D]);const t=r.compareSchema(e,e,P.schema({names:{seconds:O,millis:H,micros:D}}));if(d.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const e=new r.Integer({valueHex:t.result.millis.valueBlock.valueHex});this.millis=e.valueBlock.valueDec}if("micros"in t.result){const e=new r.Integer({valueHex:t.result.micros.valueBlock.valueHex});this.micros=e.valueBlock.valueDec}}toSchema(){const e=[];if(void 0!==this.seconds&&e.push(new r.Integer({value:this.seconds})),void 0!==this.millis){const t=new r.Integer({value:this.millis});e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(void 0!==this.micros){const t=new r.Integer({value:this.micros});e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new r.Sequence({value:e})}toJSON(){const e={};return void 0!==this.seconds&&(e.seconds=this.seconds),void 0!==this.millis&&(e.millis=this.millis),void 0!==this.micros&&(e.micros=this.micros),e}}P.CLASS_NAME="Accuracy";const T="algorithmId",R="algorithmParams",L="algorithm",U="params",$=[L,U];class _ extends m{constructor(e={}){super(),this.algorithmId=i.H$(e,T,_.defaultValues(T)),R in e&&(this.algorithmParams=i.H$(e,R,_.defaultValues(R))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case T:return c;case R:return new r.Any;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case T:return t===c;case R:return t instanceof r.Any;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,optional:t.optional||!1,value:[new r.ObjectIdentifier({name:t.algorithmIdentifier||c}),new r.Any({name:t.algorithmParams||c,optional:!0})]})}fromSchema(e){i.ze(e,$);const t=r.compareSchema(e,e,_.schema({names:{algorithmIdentifier:L,algorithmParams:U}}));d.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),U in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new r.ObjectIdentifier({value:this.algorithmId})),!this.algorithmParams||this.algorithmParams instanceof r.Any||e.push(this.algorithmParams),new r.Sequence({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return!this.algorithmParams||this.algorithmParams instanceof r.Any||(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return e instanceof _&&this.algorithmId===e.algorithmId&&(this.algorithmParams?!!e.algorithmParams&&JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!e.algorithmParams)}}_.CLASS_NAME="AlgorithmIdentifier";const j="altNames",M=[j];class K extends m{constructor(e={}){super(),this.altNames=i.H$(e,j,K.defaultValues(j)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===j?[]:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.altNames||c,value:x.schema()})]})}fromSchema(e){i.ze(e,M);const t=r.compareSchema(e,e,K.schema({names:{altNames:j}}));d.assertSchema(t,this.className),j in t.result&&(this.altNames=Array.from(t.result.altNames,(e=>new x({schema:e}))))}toSchema(){return new r.Sequence({value:Array.from(this.altNames,(e=>e.toSchema()))})}toJSON(){return{altNames:Array.from(this.altNames,(e=>e.toJSON()))}}}K.CLASS_NAME="AltName";const J="type",F="values",z=[J,F];class W extends m{constructor(e={}){super(),this.type=i.H$(e,J,W.defaultValues(J)),this.values=i.H$(e,F,W.defaultValues(F)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case J:return c;case F:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case J:return t===c;case F:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.type||c}),new r.Set({name:t.setName||c,value:[new r.Repeated({name:t.values||c,value:new r.Any})]})]})}fromSchema(e){i.ze(e,z);const t=r.compareSchema(e,e,W.schema({names:{type:J,values:F}}));d.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.type}),new r.Set({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,(e=>e.toJSON()))}}}W.CLASS_NAME="Attribute";const G="notBeforeTime",Z="notAfterTime",Q=[G,Z];class Y extends m{constructor(e={}){super(),this.notBeforeTime=i.H$(e,G,Y.defaultValues(G)),this.notAfterTime=i.H$(e,Z,Y.defaultValues(Z)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case G:case Z:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.GeneralizedTime({name:t.notBeforeTime||c}),new r.GeneralizedTime({name:t.notAfterTime||c})]})}fromSchema(e){i.ze(e,Q);const t=r.compareSchema(e,e,Y.schema({names:{notBeforeTime:G,notAfterTime:Z}}));d.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new r.Sequence({value:[new r.GeneralizedTime({valueDate:this.notBeforeTime}),new r.GeneralizedTime({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}Y.CLASS_NAME="AttCertValidityPeriod";const X="names",ee="generalNames";class te extends m{constructor(e={}){super(),this.names=i.H$(e,X,te.defaultValues(X)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return"names"===e?[]:super.defaultValues(e)}static schema(e={},t=!1){const n=i.H$(e,X,{});return new r.Sequence({optional:t,name:n.blockName||c,value:[new r.Repeated({name:n.generalNames||c,value:x.schema()})]})}fromSchema(e){i.ze(e,[X,ee]);const t=r.compareSchema(e,e,te.schema({names:{blockName:X,generalNames:ee}}));d.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,(e=>new x({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.names,(e=>e.toSchema()))})}toJSON(){return{names:Array.from(this.names,(e=>e.toJSON()))}}}te.CLASS_NAME="GeneralNames";const ne="2.5.29.9",re="2.5.29.14",se="2.5.29.15",ie="2.5.29.16",ae="2.5.29.17",oe="2.5.29.18",le="2.5.29.19",ce="2.5.29.20",ue="2.5.29.27",he="2.5.29.21",de="2.5.29.24",me="2.5.29.28",fe="2.5.29.29",pe="2.5.29.30",ge="2.5.29.31",be="2.5.29.46",ye="2.5.29.32",ve="2.5.29.32.0",we="1.3.6.1.4.1.311.21.10",Se="2.5.29.33",qe="2.5.29.35",ke="2.5.29.36",Ae="2.5.29.37",Ne="2.5.29.54",Ce="1.3.6.1.5.5.7.1.1",xe="1.3.6.1.5.5.7.1.11",Ee="1.3.6.1.4.1.11129.2.4.2",Be="1.3.6.1.4.1.311.20.2",Ie="1.3.6.1.4.1.311.21.2",Ve="1.3.6.1.4.1.311.21.7",Oe="1.3.6.1.4.1.311.21.1",He="1.3.6.1.5.5.7.1.3",De="1.2.840.113549.1.7.1",Pe="1.2.840.113549.1.7.2",Te="1.2.840.113549.1.7.3",Re="1.2.840.113549.1.7.6",Le="1.2.840.113549.1.9.16.1.4",Ue="1.2.840.113549.1.9.22.1",$e="1.2.840.113549.1.9.22.2",_e="1.2.840.113549.1.9.22.3",je="1.2.840.113549.1.9.23.1",Me="1.3.6.1.5.5.7",Ke=`${Me}.48`,Je=`${Ke}.1.1`,Fe=`${Ke}.2`,ze=`${Ke}.1`,We="1.3.14.3.2.26",Ge="2.16.840.1.101.3.4.2.1",Ze="2.16.840.1.101.3.4.2.2",Qe="2.16.840.1.101.3.4.2.3",Ye="keyIdentifier",Xe="authorityCertIssuer",et="authorityCertSerialNumber",tt=[Ye,Xe,et];class nt extends m{constructor(e={}){super(),Ye in e&&(this.keyIdentifier=i.H$(e,Ye,nt.defaultValues(Ye))),Xe in e&&(this.authorityCertIssuer=i.H$(e,Xe,nt.defaultValues(Xe))),et in e&&(this.authorityCertSerialNumber=i.H$(e,et,nt.defaultValues(et))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ye:return new r.OctetString;case Xe:return[];case et:return new r.Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Primitive({name:t.keyIdentifier||c,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.Repeated({name:t.authorityCertIssuer||c,value:x.schema()})]}),new r.Primitive({name:t.authorityCertSerialNumber||c,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){i.ze(e,tt);const t=r.compareSchema(e,e,nt.schema({names:{keyIdentifier:Ye,authorityCertIssuer:Xe,authorityCertSerialNumber:et}}));d.assertSchema(t,this.className),Ye in t.result&&(this.keyIdentifier=new r.OctetString({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),Xe in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,(e=>new x({schema:e})))),et in t.result&&(this.authorityCertSerialNumber=new r.Integer({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,(e=>e.toSchema()))})),this.authorityCertSerialNumber&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new r.Sequence({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,(e=>e.toJSON()))),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}nt.CLASS_NAME="AuthorityKeyIdentifier";const rt="pathLenConstraint",st="cA";class it extends m{constructor(e={}){super(),this.cA=i.H$(e,st,!1),rt in e&&(this.pathLenConstraint=i.H$(e,rt,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e!==st&&super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Boolean({optional:!0,name:t.cA||c}),new r.Integer({optional:!0,name:t.pathLenConstraint||c})]})}fromSchema(e){i.ze(e,[st,rt]);const t=r.compareSchema(e,e,it.schema({names:{cA:st,pathLenConstraint:rt}}));d.assertSchema(t,this.className),st in t.result&&(this.cA=t.result.cA.valueBlock.value),rt in t.result&&(t.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=t.result.pathLenConstraint:this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==it.defaultValues(st)&&e.push(new r.Boolean({value:this.cA})),rt in this&&(this.pathLenConstraint instanceof r.Integer?e.push(this.pathLenConstraint):e.push(new r.Integer({value:this.pathLenConstraint}))),new r.Sequence({value:e})}toJSON(){const e={};return this.cA!==it.defaultValues(st)&&(e.cA=this.cA),rt in this&&(this.pathLenConstraint instanceof r.Integer?e.pathLenConstraint=this.pathLenConstraint.toJSON():e.pathLenConstraint=this.pathLenConstraint),e}}it.CLASS_NAME="BasicConstraints";const at="certificateIndex",ot="keyIndex";class lt extends m{constructor(e={}){super(),this.certificateIndex=i.H$(e,at,lt.defaultValues(at)),this.keyIndex=i.H$(e,ot,lt.defaultValues(ot)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case at:case ot:return 0;default:return super.defaultValues(e)}}static schema(){return new r.Integer}fromSchema(e){if(e.constructor.blockName()!==r.Integer.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const n=new Uint8Array(t);switch(!0){case t.byteLength<4:{const e=new ArrayBuffer(4);new Uint8Array(e).set(n,4-t.byteLength),t=e.slice(0)}break;case t.byteLength>4:{const e=new ArrayBuffer(4);new Uint8Array(e).set(n.slice(0,4)),t=e.slice(0)}}const s=t.slice(0,2),i=new Uint8Array(s);let a=i[0];i[0]=i[1],i[1]=a;const o=new Uint16Array(s);this.keyIndex=o[0];const l=t.slice(2),c=new Uint8Array(l);a=c[0],c[0]=c[1],c[1]=a;const u=new Uint16Array(l);this.certificateIndex=u[0]}toSchema(){const e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;const t=new Uint8Array(e);let n=t[0];t[0]=t[1],t[1]=n;const s=new ArrayBuffer(2);new Uint16Array(s)[0]=this.keyIndex;const a=new Uint8Array(s);return n=a[0],a[0]=a[1],a[1]=n,new r.Integer({valueHex:i.hk(s,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}lt.CLASS_NAME="CAVersion";const ct="policyQualifierId",ut="qualifier",ht=[ct,ut];class dt extends m{constructor(e={}){super(),this.policyQualifierId=i.H$(e,ct,dt.defaultValues(ct)),this.qualifier=i.H$(e,ut,dt.defaultValues(ut)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ct:return c;case ut:return new r.Any;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.policyQualifierId||c}),new r.Any({name:t.qualifier||c})]})}fromSchema(e){i.ze(e,ht);const t=r.compareSchema(e,e,dt.schema({names:{policyQualifierId:ct,qualifier:ut}}));d.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}dt.CLASS_NAME="PolicyQualifierInfo";const mt="policyIdentifier",ft="policyQualifiers",pt=[mt,ft];class gt extends m{constructor(e={}){super(),this.policyIdentifier=i.H$(e,mt,gt.defaultValues(mt)),ft in e&&(this.policyQualifiers=i.H$(e,ft,gt.defaultValues(ft))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mt:return c;case ft:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.policyIdentifier||c}),new r.Sequence({optional:!0,value:[new r.Repeated({name:t.policyQualifiers||c,value:dt.schema()})]})]})}fromSchema(e){i.ze(e,pt);const t=r.compareSchema(e,e,gt.schema({names:{policyIdentifier:mt,policyQualifiers:ft}}));d.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),ft in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,(e=>new dt({schema:e}))))}toSchema(){const e=[];return e.push(new r.ObjectIdentifier({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new r.Sequence({value:Array.from(this.policyQualifiers,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,(e=>e.toJSON()))),e}}gt.CLASS_NAME="PolicyInformation";const bt="certificatePolicies",yt=[bt];class vt extends m{constructor(e={}){super(),this.certificatePolicies=i.H$(e,bt,vt.defaultValues(bt)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===bt?[]:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.certificatePolicies||c,value:gt.schema()})]})}fromSchema(e){i.ze(e,yt);const t=r.compareSchema(e,e,vt.schema({names:{certificatePolicies:bt}}));d.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,(e=>new gt({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.certificatePolicies,(e=>e.toSchema()))})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,(e=>e.toJSON()))}}}vt.CLASS_NAME="CertificatePolicies";const wt="templateID",St="templateMajorVersion",qt="templateMinorVersion",kt=[wt,St,qt];class At extends m{constructor(e={}){super(),this.templateID=i.H$(e,wt,At.defaultValues(wt)),St in e&&(this.templateMajorVersion=i.H$(e,St,At.defaultValues(St))),qt in e&&(this.templateMinorVersion=i.H$(e,qt,At.defaultValues(qt))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wt:return c;case St:case qt:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.templateID||c}),new r.Integer({name:t.templateMajorVersion||c,optional:!0}),new r.Integer({name:t.templateMinorVersion||c,optional:!0})]})}fromSchema(e){i.ze(e,kt);const t=r.compareSchema(e,e,At.schema({names:{templateID:wt,templateMajorVersion:St,templateMinorVersion:qt}}));d.assertSchema(t,this.className),this.templateID=t.result.templateID.valueBlock.toString(),St in t.result&&(this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec),qt in t.result&&(this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const e=[];return e.push(new r.ObjectIdentifier({value:this.templateID})),St in this&&e.push(new r.Integer({value:this.templateMajorVersion})),qt in this&&e.push(new r.Integer({value:this.templateMinorVersion})),new r.Sequence({value:e})}toJSON(){const e={templateID:this.templateID};return St in this&&(e.templateMajorVersion=this.templateMajorVersion),qt in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}const Nt="distributionPoint",Ct="distributionPointNames",xt="reasons",Et="cRLIssuer",Bt="cRLIssuerNames",It=[Nt,Ct,xt,Et,Bt];class Vt extends m{constructor(e={}){super(),Nt in e&&(this.distributionPoint=i.H$(e,Nt,Vt.defaultValues(Nt))),xt in e&&(this.reasons=i.H$(e,xt,Vt.defaultValues(xt))),Et in e&&(this.cRLIssuer=i.H$(e,Et,Vt.defaultValues(Et))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Nt:return[];case xt:return new r.BitString;case Et:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Choice({value:[new r.Constructed({name:t.distributionPoint||c,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Repeated({name:t.distributionPointNames||c,value:x.schema()})]}),new r.Constructed({name:t.distributionPoint||c,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:S.schema().valueBlock.value})]})]}),new r.Primitive({name:t.reasons||c,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new r.Constructed({name:t.cRLIssuer||c,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new r.Repeated({name:t.cRLIssuerNames||c,value:x.schema()})]})]})}fromSchema(e){i.ze(e,It);const t=r.compareSchema(e,e,Vt.schema({names:{distributionPoint:Nt,distributionPointNames:Ct,reasons:xt,cRLIssuer:Et,cRLIssuerNames:Bt}}));d.assertSchema(t,this.className),Nt in t.result&&(0===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new x({schema:e})))),1===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new S({schema:new r.Sequence({value:t.result.distributionPoint.valueBlock.value})}))),xt in t.result&&(this.reasons=new r.BitString({valueHex:t.result.reasons.valueBlock.valueHex})),Et in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,(e=>new x({schema:e}))))}toSchema(){const e=[];if(this.distributionPoint){let t;t=this.distributionPoint instanceof Array?new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))}):new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON())):e.distributionPoint=this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,(e=>e.toJSON()))),e}}Vt.CLASS_NAME="DistributionPoint";const Ot="distributionPoints",Ht=[Ot];class Dt extends m{constructor(e={}){super(),this.distributionPoints=i.H$(e,Ot,Dt.defaultValues(Ot)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ot?[]:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.distributionPoints||c,value:Vt.schema()})]})}fromSchema(e){i.ze(e,Ht);const t=r.compareSchema(e,e,Dt.schema({names:{distributionPoints:Ot}}));d.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,(e=>new Vt({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.distributionPoints,(e=>e.toSchema()))})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,(e=>e.toJSON()))}}}Dt.CLASS_NAME="CRLDistributionPoints";const Pt="keyPurposes",Tt=[Pt];class Rt extends m{constructor(e={}){super(),this.keyPurposes=i.H$(e,Pt,Rt.defaultValues(Pt)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Pt?[]:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.keyPurposes||c,value:new r.ObjectIdentifier})]})}fromSchema(e){i.ze(e,Tt);const t=r.compareSchema(e,e,Rt.schema({names:{keyPurposes:Pt}}));d.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,(e=>e.valueBlock.toString()))}toSchema(){return new r.Sequence({value:Array.from(this.keyPurposes,(e=>new r.ObjectIdentifier({value:e})))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}Rt.CLASS_NAME="ExtKeyUsage";const Lt="accessDescriptions";class Ut extends m{constructor(e={}){super(),this.accessDescriptions=i.H$(e,Lt,Ut.defaultValues(Lt)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Lt?[]:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.accessDescriptions||c,value:V.schema()})]})}fromSchema(e){i.ze(e,[Lt]);const t=r.compareSchema(e,e,Ut.schema({names:{accessDescriptions:Lt}}));d.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,(e=>new V({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.accessDescriptions,(e=>e.toSchema()))})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,(e=>e.toJSON()))}}}Ut.CLASS_NAME="InfoAccess";const $t="distributionPoint",_t="distributionPointNames",jt="onlyContainsUserCerts",Mt="onlyContainsCACerts",Kt="onlySomeReasons",Jt="indirectCRL",Ft="onlyContainsAttributeCerts",zt=[$t,_t,jt,Mt,Kt,Jt,Ft];class Wt extends m{constructor(e={}){super(),$t in e&&(this.distributionPoint=i.H$(e,$t,Wt.defaultValues($t))),this.onlyContainsUserCerts=i.H$(e,jt,Wt.defaultValues(jt)),this.onlyContainsCACerts=i.H$(e,Mt,Wt.defaultValues(Mt)),Kt in e&&(this.onlySomeReasons=i.H$(e,Kt,Wt.defaultValues(Kt))),this.indirectCRL=i.H$(e,Jt,Wt.defaultValues(Jt)),this.onlyContainsAttributeCerts=i.H$(e,Ft,Wt.defaultValues(Ft)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $t:return[];case jt:case Mt:return!1;case Kt:return 0;case Jt:case Ft:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Choice({value:[new r.Constructed({name:t.distributionPoint||c,idBlock:{tagClass:3,tagNumber:0},value:[new r.Repeated({name:t.distributionPointNames||c,value:x.schema()})]}),new r.Constructed({name:t.distributionPoint||c,idBlock:{tagClass:3,tagNumber:1},value:S.schema().valueBlock.value})]})]}),new r.Primitive({name:t.onlyContainsUserCerts||c,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new r.Primitive({name:t.onlyContainsCACerts||c,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new r.Primitive({name:t.onlySomeReasons||c,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new r.Primitive({name:t.indirectCRL||c,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new r.Primitive({name:t.onlyContainsAttributeCerts||c,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){i.ze(e,zt);const t=r.compareSchema(e,e,Wt.schema({names:{distributionPoint:$t,distributionPointNames:_t,onlyContainsUserCerts:jt,onlyContainsCACerts:Mt,onlySomeReasons:Kt,indirectCRL:Jt,onlyContainsAttributeCerts:Ft}}));if(d.assertSchema(t,this.className),$t in t.result)switch(!0){case 0===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new x({schema:e})));break;case 1===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new S({schema:new r.Sequence({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(jt in t.result){const e=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==e[0]}if(Mt in t.result){const e=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==e[0]}if(Kt in t.result){const e=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=e[0]}if(Jt in t.result){const e=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==e[0]}if(Ft in t.result){const e=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==e[0]}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==Wt.defaultValues(jt)&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==Wt.defaultValues(Mt)&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),void 0!==this.onlySomeReasons){const t=new ArrayBuffer(1);new Uint8Array(t)[0]=this.onlySomeReasons,e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==Wt.defaultValues(Jt)&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==Wt.defaultValues(Ft)&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new r.Sequence({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON())):e.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==Wt.defaultValues(jt)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==Wt.defaultValues(Mt)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),Kt in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==Wt.defaultValues(Jt)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==Wt.defaultValues(Ft)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}Wt.CLASS_NAME="IssuingDistributionPoint";const Gt="base",Zt="minimum",Qt="maximum",Yt=[Gt,Zt,Qt];class Xt extends m{constructor(e={}){super(),this.base=i.H$(e,Gt,Xt.defaultValues(Gt)),this.minimum=i.H$(e,Zt,Xt.defaultValues(Zt)),Qt in e&&(this.maximum=i.H$(e,Qt,Xt.defaultValues(Qt))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Gt:return new x;case Zt:case Qt:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[x.schema(t.base||{}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Integer({name:t.minimum||c})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.Integer({name:t.maximum||c})]})]})}fromSchema(e){i.ze(e,Yt);const t=r.compareSchema(e,e,Xt.schema({names:{base:{names:{blockName:Gt}},minimum:Zt,maximum:Qt}}));d.assertSchema(t,this.className),this.base=new x({schema:t.result.base}),Zt in t.result&&(t.result.minimum.valueBlock.isHexOnly?this.minimum=t.result.minimum:this.minimum=t.result.minimum.valueBlock.valueDec),Qt in t.result&&(t.result.maximum.valueBlock.isHexOnly?this.maximum=t.result.maximum:this.maximum=t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),0!==this.minimum){let t=0;t=this.minimum instanceof r.Integer?this.minimum:new r.Integer({value:this.minimum}),e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(Qt in this){let t=0;t=this.maximum instanceof r.Integer?this.maximum:new r.Integer({value:this.maximum}),e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new r.Sequence({value:e})}toJSON(){const e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),void 0!==this.maximum&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}Xt.CLASS_NAME="GeneralSubtree";const en="permittedSubtrees",tn="excludedSubtrees",nn=[en,tn];class rn extends m{constructor(e={}){super(),en in e&&(this.permittedSubtrees=i.H$(e,en,rn.defaultValues(en))),tn in e&&(this.excludedSubtrees=i.H$(e,tn,rn.defaultValues(tn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case en:case tn:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Repeated({name:t.permittedSubtrees||c,value:Xt.schema()})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.Repeated({name:t.excludedSubtrees||c,value:Xt.schema()})]})]})}fromSchema(e){i.ze(e,nn);const t=r.compareSchema(e,e,rn.schema({names:{permittedSubtrees:en,excludedSubtrees:tn}}));d.assertSchema(t,this.className),en in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,(e=>new Xt({schema:e})))),tn in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,(e=>new Xt({schema:e}))))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,(e=>e.toSchema()))})),this.excludedSubtrees&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,(e=>e.toJSON()))),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,(e=>e.toJSON()))),e}}rn.CLASS_NAME="NameConstraints";const sn="requireExplicitPolicy",an="inhibitPolicyMapping",on=[sn,an];class ln extends m{constructor(e={}){super(),sn in e&&(this.requireExplicitPolicy=i.H$(e,sn,ln.defaultValues(sn))),an in e&&(this.inhibitPolicyMapping=i.H$(e,an,ln.defaultValues(an))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case sn:case an:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Primitive({name:t.requireExplicitPolicy||c,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new r.Primitive({name:t.inhibitPolicyMapping||c,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){i.ze(e,on);const t=r.compareSchema(e,e,ln.schema({names:{requireExplicitPolicy:sn,inhibitPolicyMapping:an}}));if(d.assertSchema(t,this.className),sn in t.result){const e=t.result.requireExplicitPolicy;e.idBlock.tagClass=1,e.idBlock.tagNumber=2;const n=e.toBER(!1),s=r.fromBER(n);d.assert(s,"Integer"),this.requireExplicitPolicy=s.result.valueBlock.valueDec}if(an in t.result){const e=t.result.inhibitPolicyMapping;e.idBlock.tagClass=1,e.idBlock.tagNumber=2;const n=e.toBER(!1),s=r.fromBER(n);d.assert(s,"Integer"),this.inhibitPolicyMapping=s.result.valueBlock.valueDec}}toSchema(){const e=[];if(sn in this){const t=new r.Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(an in this){const t=new r.Integer({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new r.Sequence({value:e})}toJSON(){const e={};return sn in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),an in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}ln.CLASS_NAME="PolicyConstraints";const cn="issuerDomainPolicy",un="subjectDomainPolicy",hn=[cn,un];class dn extends m{constructor(e={}){super(),this.issuerDomainPolicy=i.H$(e,cn,dn.defaultValues(cn)),this.subjectDomainPolicy=i.H$(e,un,dn.defaultValues(un)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cn:case un:return c;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.issuerDomainPolicy||c}),new r.ObjectIdentifier({name:t.subjectDomainPolicy||c})]})}fromSchema(e){i.ze(e,hn);const t=r.compareSchema(e,e,dn.schema({names:{issuerDomainPolicy:cn,subjectDomainPolicy:un}}));d.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.issuerDomainPolicy}),new r.ObjectIdentifier({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}dn.CLASS_NAME="PolicyMapping";const mn="mappings",fn=[mn];class pn extends m{constructor(e={}){super(),this.mappings=i.H$(e,mn,pn.defaultValues(mn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===mn?[]:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.mappings||c,value:dn.schema()})]})}fromSchema(e){i.ze(e,fn);const t=r.compareSchema(e,e,pn.schema({names:{mappings:mn}}));d.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,(e=>new dn({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.mappings,(e=>e.toSchema()))})}toJSON(){return{mappings:Array.from(this.mappings,(e=>e.toJSON()))}}}pn.CLASS_NAME="PolicyMappings";const gn="notBefore",bn="notAfter",yn=[gn,bn];class vn extends m{constructor(e={}){super(),gn in e&&(this.notBefore=i.H$(e,gn,vn.defaultValues(gn))),bn in e&&(this.notAfter=i.H$(e,bn,vn.defaultValues(bn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gn:case bn:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Primitive({name:t.notBefore||c,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new r.Primitive({name:t.notAfter||c,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){i.ze(e,yn);const t=r.compareSchema(e,e,vn.schema({names:{notBefore:gn,notAfter:bn}}));if(d.assertSchema(t,this.className),gn in t.result){const e=new r.GeneralizedTime;e.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=e.toDate()}if(bn in t.result){const e=new r.GeneralizedTime({valueHex:t.result.notAfter.valueBlock.valueHex});e.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=e.toDate()}}toSchema(){const e=[];return gn in this&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new r.GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHexView})),bn in this&&e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new r.GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHexView})),new r.Sequence({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}vn.CLASS_NAME="PrivateKeyUsagePeriod";const wn="id",Sn="type",qn="values",kn=[wn,Sn],An=[qn];class Nn extends m{constructor(e={}){super(),this.id=i.H$(e,wn,Nn.defaultValues(wn)),Sn in e&&(this.type=i.H$(e,Sn,Nn.defaultValues(Sn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wn:return c;case Sn:return new r.Null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wn:return t===c;case Sn:return t instanceof r.Null;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.id||c}),new r.Any({name:t.type||c,optional:!0})]})}fromSchema(e){i.ze(e,kn);const t=r.compareSchema(e,e,Nn.schema({names:{id:wn,type:Sn}}));d.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),Sn in t.result&&(this.type=t.result.type)}toSchema(){const e=[new r.ObjectIdentifier({value:this.id})];return Sn in this&&e.push(this.type),new r.Sequence({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}Nn.CLASS_NAME="QCStatement";class Cn extends m{constructor(e={}){super(),this.values=i.H$(e,qn,Cn.defaultValues(qn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===qn?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===qn?0===t.length:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.values||c,value:Nn.schema(t.value||{})})]})}fromSchema(e){i.ze(e,An);const t=r.compareSchema(e,e,Cn.schema({names:{values:qn}}));d.assertSchema(t,this.className),this.values=Array.from(t.result.values,(e=>new Nn({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.values,(e=>e.toSchema()))})}toJSON(){return{values:Array.from(this.values,(e=>e.toJSON()))}}}var xn;Cn.CLASS_NAME="QCStatements";class En{static register(e,t,n){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:n}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}xn=En,En.namedCurves={},xn.register("P-256","1.2.840.10045.3.1.7",32),xn.register("P-384","1.3.132.0.34",48),xn.register("P-521","1.3.132.0.35",66),xn.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),xn.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),xn.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const Bn="x",In="y",Vn="namedCurve";class On extends m{constructor(e={}){super(),this.x=i.H$(e,Bn,On.defaultValues(Bn)),this.y=i.H$(e,In,On.defaultValues(In)),this.namedCurve=i.H$(e,Vn,On.defaultValues(Vn)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bn:case In:return l;case Vn:return c;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Bn:case In:return t instanceof ArrayBuffer&&i.dN(t,On.defaultValues(e));case Vn:return"string"==typeof t&&t===On.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new r.RawData}fromSchema(e){const t=s.vJ.toUint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");const n=En.find(this.namedCurve);if(!n)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const r=n.size;if(t.byteLength!==2*r+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=n.name,this.x=t.slice(1,r+1).buffer,this.y=t.slice(1+r,2*r+1).buffer}toSchema(){return new r.RawData({data:i.hk(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=En.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:i.s3(i.lE(this.x),!0,!0,!1),y:i.s3(i.lE(this.y),!0,!0,!1)}}fromJSON(e){h.assert("json",e,"crv","x","y");let t=0;const n=En.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=i.gG(i.Gh(e.x,!0));if(r.byteLength<t){this.x=new ArrayBuffer(t);const e=new Uint8Array(this.x),n=new Uint8Array(r);e.set(n,1)}else this.x=r.slice(0,t);const s=i.gG(i.Gh(e.y,!0));if(s.byteLength<t){this.y=new ArrayBuffer(t);const e=new Uint8Array(this.y),n=new Uint8Array(s);e.set(n,1)}else this.y=s.slice(0,t)}}On.CLASS_NAME="ECPublicKey";const Hn="modulus",Dn="publicExponent",Pn=[Hn,Dn];class Tn extends m{constructor(e={}){super(),this.modulus=i.H$(e,Hn,Tn.defaultValues(Hn)),this.publicExponent=i.H$(e,Dn,Tn.defaultValues(Dn)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hn:case Dn:return new r.Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.modulus||c}),new r.Integer({name:t.publicExponent||c})]})}fromSchema(e){i.ze(e,Pn);const t=r.compareSchema(e,e,Tn.schema({names:{modulus:Hn,publicExponent:Dn}}));d.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new r.Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:s.ep.ToBase64Url(this.modulus.valueBlock.valueHexView),e:s.ep.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){h.assert("json",e,"n","e");const t=i.gG(i.Gh(e.n,!0));this.modulus=new r.Integer({valueHex:t.slice(0,Math.pow(2,i.J$(t.byteLength)))}),this.publicExponent=new r.Integer({valueHex:i.gG(i.Gh(e.e,!0)).slice(0,3)})}}Tn.CLASS_NAME="RSAPublicKey";const Rn="algorithm",Ln="subjectPublicKey",Un=[Rn,Ln];class $n extends m{constructor(e={}){super(),this.algorithm=i.H$(e,Rn,$n.defaultValues(Rn)),this.subjectPublicKey=i.H$(e,Ln,$n.defaultValues(Ln));const t=i.H$(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}get parsedKey(){if(void 0===this._parsedKey){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===r.ObjectIdentifier.blockName())try{this._parsedKey=new On({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch(e){}break;case"1.2.840.113549.1.1.1":{const e=r.fromBER(this.subjectPublicKey.valueBlock.valueHexView);if(-1!==e.offset)try{this._parsedKey=new Tn({schema:e.result})}catch(e){}}}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}static defaultValues(e){switch(e){case Rn:return new _;case Ln:return new r.BitString;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.algorithm||{}),new r.BitString({name:t.subjectPublicKey||c})]})}fromSchema(e){i.ze(e,Un);const t=r.compareSchema(e,e,$n.schema({names:{algorithm:{names:{blockName:Rn}},subjectPublicKey:Ln}}));d.assertSchema(t,this.className),this.algorithm=new _({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new r.Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new On({json:e}),this.algorithm=new _({algorithmId:"1.2.840.10045.2.1",algorithmParams:new r.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new Tn({json:e}),this.algorithm=new _({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new r.Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new r.BitString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}async importKey(e,t=Fr(!0)){try{if(!e)throw new Error("Need to provide publicKey input parameter");const n=await t.exportKey("spki",e),s=r.fromBER(n);try{this.fromSchema(s.result)}catch(e){throw new Error("Error during initializing object from schema")}}catch(e){const t=e instanceof Error?e.message:`${e}`;throw new Error(`Error during exporting public key: ${t}`)}}}$n.CLASS_NAME="PublicKeyInfo";const _n="version",jn="privateKey",Mn="namedCurve",Kn="publicKey",Jn=[_n,jn,Mn,Kn];class Fn extends m{constructor(e={}){super(),this.version=i.H$(e,_n,Fn.defaultValues(_n)),this.privateKey=i.H$(e,jn,Fn.defaultValues(jn)),Mn in e&&(this.namedCurve=i.H$(e,Mn,Fn.defaultValues(Mn))),Kn in e&&(this.publicKey=i.H$(e,Kn,Fn.defaultValues(Kn))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _n:return 1;case jn:return new r.OctetString;case Mn:return c;case Kn:return new On;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case _n:return t===Fn.defaultValues(e);case jn:return t.isEqual(Fn.defaultValues(e));case Mn:return t===c;case Kn:return On.compareWithDefault(Mn,t.namedCurve)&&On.compareWithDefault("x",t.x)&&On.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),new r.OctetString({name:t.privateKey||c}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.ObjectIdentifier({name:t.namedCurve||c})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.BitString({name:t.publicKey||c})]})]})}fromSchema(e){i.ze(e,Jn);const t=r.compareSchema(e,e,Fn.schema({names:{version:_n,privateKey:jn,namedCurve:Mn,publicKey:Kn}}));if(d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,Mn in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),Kn in t.result){const e={schema:t.result.publicKey.valueBlock.valueHex};Mn in this&&(e.namedCurve=this.namedCurve),this.publicKey=new On(e)}}toSchema(){const e=[new r.Integer({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.ObjectIdentifier({value:this.namedCurve})]})),this.publicKey&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new r.BitString({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new r.Sequence({value:e})}toJSON(){if(!this.namedCurve||Fn.compareWithDefault(Mn,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=En.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:s.ep.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const e=this.publicKey.toJSON();t.x=e.x,t.y=e.y}return t}fromJSON(e){h.assert("json",e,"crv","d");let t=0;const n=En.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const i=s.ep.FromBase64Url(e.d);if(i.byteLength<t){const e=new ArrayBuffer(t),n=new Uint8Array(e),s=new Uint8Array(i);n.set(s,1),this.privateKey=new r.OctetString({valueHex:e})}else this.privateKey=new r.OctetString({valueHex:i.slice(0,t)});e.x&&e.y&&(this.publicKey=new On({json:e}))}}Fn.CLASS_NAME="ECPrivateKey";const zn="prime",Wn="exponent",Gn="coefficient",Zn=[zn,Wn,Gn];class Qn extends m{constructor(e={}){super(),this.prime=i.H$(e,zn,Qn.defaultValues(zn)),this.exponent=i.H$(e,Wn,Qn.defaultValues(Wn)),this.coefficient=i.H$(e,Gn,Qn.defaultValues(Gn)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zn:case Wn:case Gn:return new r.Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.prime||c}),new r.Integer({name:t.exponent||c}),new r.Integer({name:t.coefficient||c})]})}fromSchema(e){i.ze(e,Zn);const t=r.compareSchema(e,e,Qn.schema({names:{prime:zn,exponent:Wn,coefficient:Gn}}));d.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new r.Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:s.ep.ToBase64Url(this.prime.valueBlock.valueHexView),d:s.ep.ToBase64Url(this.exponent.valueBlock.valueHexView),t:s.ep.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){h.assert("json",e,"r","d","r"),this.prime=new r.Integer({valueHex:s.ep.FromBase64Url(e.r)}),this.exponent=new r.Integer({valueHex:s.ep.FromBase64Url(e.d)}),this.coefficient=new r.Integer({valueHex:s.ep.FromBase64Url(e.t)})}}Qn.CLASS_NAME="OtherPrimeInfo";const Yn="version",Xn="modulus",er="publicExponent",tr="privateExponent",nr="prime1",rr="prime2",sr="exponent1",ir="exponent2",ar="coefficient",or="otherPrimeInfos",lr=[Yn,Xn,er,tr,nr,rr,sr,ir,ar,or];class cr extends m{constructor(e={}){super(),this.version=i.H$(e,Yn,cr.defaultValues(Yn)),this.modulus=i.H$(e,Xn,cr.defaultValues(Xn)),this.publicExponent=i.H$(e,er,cr.defaultValues(er)),this.privateExponent=i.H$(e,tr,cr.defaultValues(tr)),this.prime1=i.H$(e,nr,cr.defaultValues(nr)),this.prime2=i.H$(e,rr,cr.defaultValues(rr)),this.exponent1=i.H$(e,sr,cr.defaultValues(sr)),this.exponent2=i.H$(e,ir,cr.defaultValues(ir)),this.coefficient=i.H$(e,ar,cr.defaultValues(ar)),or in e&&(this.otherPrimeInfos=i.H$(e,or,cr.defaultValues(or))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yn:return 0;case Xn:case er:case tr:case nr:case rr:case sr:case ir:case ar:return new r.Integer;case or:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),new r.Integer({name:t.modulus||c}),new r.Integer({name:t.publicExponent||c}),new r.Integer({name:t.privateExponent||c}),new r.Integer({name:t.prime1||c}),new r.Integer({name:t.prime2||c}),new r.Integer({name:t.exponent1||c}),new r.Integer({name:t.exponent2||c}),new r.Integer({name:t.coefficient||c}),new r.Sequence({optional:!0,value:[new r.Repeated({name:t.otherPrimeInfosName||c,value:Qn.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){i.ze(e,lr);const t=r.compareSchema(e,e,cr.schema({names:{version:Yn,modulus:Xn,publicExponent:er,privateExponent:tr,prime1:nr,prime2:rr,exponent1:sr,exponent2:ir,coefficient:ar,otherPrimeInfo:{names:{blockName:or}}}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),or in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,(e=>new Qn({schema:e}))))}toSchema(){const e=[];return e.push(new r.Integer({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new r.Sequence({value:Array.from(this.otherPrimeInfos,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={n:s.ep.ToBase64Url(this.modulus.valueBlock.valueHexView),e:s.ep.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:s.ep.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:s.ep.ToBase64Url(this.prime1.valueBlock.valueHexView),q:s.ep.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:s.ep.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:s.ep.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:s.ep.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,(e=>e.toJSON()))),e}fromJSON(e){h.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new r.Integer({valueHex:s.ep.FromBase64Url(e.n)}),this.publicExponent=new r.Integer({valueHex:s.ep.FromBase64Url(e.e)}),this.privateExponent=new r.Integer({valueHex:s.ep.FromBase64Url(e.d)}),this.prime1=new r.Integer({valueHex:s.ep.FromBase64Url(e.p)}),this.prime2=new r.Integer({valueHex:s.ep.FromBase64Url(e.q)}),this.exponent1=new r.Integer({valueHex:s.ep.FromBase64Url(e.dp)}),this.exponent2=new r.Integer({valueHex:s.ep.FromBase64Url(e.dq)}),this.coefficient=new r.Integer({valueHex:s.ep.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,(e=>new Qn({json:e}))))}}cr.CLASS_NAME="RSAPrivateKey";const ur="version",hr="privateKeyAlgorithm",dr="privateKey",mr="attributes",fr="parsedKey",pr=[ur,hr,dr,mr];class gr extends m{constructor(e={}){super(),this.version=i.H$(e,ur,gr.defaultValues(ur)),this.privateKeyAlgorithm=i.H$(e,hr,gr.defaultValues(hr)),this.privateKey=i.H$(e,dr,gr.defaultValues(dr)),mr in e&&(this.attributes=i.H$(e,mr,gr.defaultValues(mr))),fr in e&&(this.parsedKey=i.H$(e,fr,gr.defaultValues(fr))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ur:return 0;case hr:return new _;case dr:return new r.OctetString;case mr:return[];case fr:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),_.schema(t.privateKeyAlgorithm||{}),new r.OctetString({name:t.privateKey||c}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Repeated({name:t.attributes||c,value:W.schema()})]})]})}fromSchema(e){i.ze(e,pr);const t=r.compareSchema(e,e,gr.schema({names:{version:ur,privateKeyAlgorithm:{names:{blockName:hr}},privateKey:dr,attributes:mr}}));switch(d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new _({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,mr in t.result&&(this.attributes=Array.from(t.result.attributes,(e=>new W({schema:e})))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const e=r.fromBER(this.privateKey.valueBlock.valueHexView);-1!==e.offset&&(this.parsedKey=new cr({schema:e.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof r.ObjectIdentifier){const e=r.fromBER(this.privateKey.valueBlock.valueHexView);-1!==e.offset&&(this.parsedKey=new Fn({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:e.result}))}}}toSchema(){const e=[new r.Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){if(!this.parsedKey){const e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(e.attributes=Array.from(this.attributes,(e=>e.toJSON()))),e}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Fn({json:e}),this.privateKeyAlgorithm=new _({algorithmId:"1.2.840.10045.2.1",algorithmParams:new r.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new cr({json:e}),this.privateKeyAlgorithm=new _({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new r.Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new r.OctetString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}gr.CLASS_NAME="PrivateKeyInfo";const br="contentType",yr="contentEncryptionAlgorithm",vr="encryptedContent",wr=[br,yr,vr];class Sr extends m{constructor(e={}){if(super(),this.contentType=i.H$(e,br,Sr.defaultValues(br)),this.contentEncryptionAlgorithm=i.H$(e,yr,Sr.defaultValues(yr)),vr in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed&&!e.disableSplit)){const e=new r.OctetString({idBlock:{isConstructed:!0},isConstructed:!0});let t=0;const n=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let s=n.byteLength;for(;s>0;){const i=new Uint8Array(n,t,t+1024>n.byteLength?n.byteLength-t:1024),a=new ArrayBuffer(i.length),o=new Uint8Array(a);for(let e=0;e<o.length;e++)o[e]=i[e];e.valueBlock.value.push(new r.OctetString({valueHex:a})),s-=i.length,t+=i.length}this.encryptedContent=e}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case br:return c;case yr:return new _;case vr:return new r.OctetString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case br:return t===c;case yr:return t.algorithmId===c&&"algorithmParams"in t==0;case vr:return t.isEqual(Sr.defaultValues(vr));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.contentType||c}),_.schema(t.contentEncryptionAlgorithm||{}),new r.Choice({value:[new r.Constructed({name:t.encryptedContent||c,idBlock:{tagClass:3,tagNumber:0},value:[new r.Repeated({value:new r.OctetString})]}),new r.Primitive({name:t.encryptedContent||c,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){i.ze(e,wr);const t=r.compareSchema(e,e,Sr.schema({names:{contentType:br,contentEncryptionAlgorithm:{names:{blockName:yr}},encryptedContent:vr}}));d.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new _({schema:t.result.contentEncryptionAlgorithm}),vr in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new r.ObjectIdentifier({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const n=this.encryptedContent;n.idBlock.tagClass=3,n.idBlock.tagNumber=0,n.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(n)}return new r.Sequence({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return r.OctetString.prototype.getValue.call(this.encryptedContent)}}Sr.CLASS_NAME="EncryptedContentInfo";const qr="hashAlgorithm",kr="maskGenAlgorithm",Ar="saltLength",Nr="trailerField",Cr=[qr,kr,Ar,Nr];class xr extends m{constructor(e={}){super(),this.hashAlgorithm=i.H$(e,qr,xr.defaultValues(qr)),this.maskGenAlgorithm=i.H$(e,kr,xr.defaultValues(kr)),this.saltLength=i.H$(e,Ar,xr.defaultValues(Ar)),this.trailerField=i.H$(e,Nr,xr.defaultValues(Nr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qr:return new _({algorithmId:"1.3.14.3.2.26",algorithmParams:new r.Null});case kr:return new _({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new _({algorithmId:"1.3.14.3.2.26",algorithmParams:new r.Null}).toSchema()});case Ar:return 20;case Nr:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[_.schema(t.hashAlgorithm||{})]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[_.schema(t.maskGenAlgorithm||{})]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new r.Integer({name:t.saltLength||c})]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new r.Integer({name:t.trailerField||c})]})]})}fromSchema(e){i.ze(e,Cr);const t=r.compareSchema(e,e,xr.schema({names:{hashAlgorithm:{names:{blockName:qr}},maskGenAlgorithm:{names:{blockName:kr}},saltLength:Ar,trailerField:Nr}}));d.assertSchema(t,this.className),qr in t.result&&(this.hashAlgorithm=new _({schema:t.result.hashAlgorithm})),kr in t.result&&(this.maskGenAlgorithm=new _({schema:t.result.maskGenAlgorithm})),Ar in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),Nr in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(xr.defaultValues(qr))||e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(xr.defaultValues(kr))||e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==xr.defaultValues(Ar)&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new r.Integer({value:this.saltLength})]})),this.trailerField!==xr.defaultValues(Nr)&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new r.Integer({value:this.trailerField})]})),new r.Sequence({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(xr.defaultValues(qr))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(xr.defaultValues(kr))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==xr.defaultValues(Ar)&&(e.saltLength=this.saltLength),this.trailerField!==xr.defaultValues(Nr)&&(e.trailerField=this.trailerField),e}}xr.CLASS_NAME="RSASSAPSSParams";const Er="salt",Br="iterationCount",Ir="keyLength",Vr="prf",Or=[Er,Br,Ir,Vr];class Hr extends m{constructor(e={}){super(),this.salt=i.H$(e,Er,Hr.defaultValues(Er)),this.iterationCount=i.H$(e,Br,Hr.defaultValues(Br)),Ir in e&&(this.keyLength=i.H$(e,Ir,Hr.defaultValues(Ir))),Vr in e&&(this.prf=i.H$(e,Vr,Hr.defaultValues(Vr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Er:return{};case Br:return-1;case Ir:return 0;case Vr:return new _({algorithmId:"1.3.14.3.2.26",algorithmParams:new r.Null});default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Choice({value:[new r.OctetString({name:t.saltPrimitive||c}),_.schema(t.saltConstructed||{})]}),new r.Integer({name:t.iterationCount||c}),new r.Integer({name:t.keyLength||c,optional:!0}),_.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){i.ze(e,Or);const t=r.compareSchema(e,e,Hr.schema({names:{saltPrimitive:Er,saltConstructed:{names:{blockName:Er}},iterationCount:Br,keyLength:Ir,prf:{names:{blockName:Vr,optional:!0}}}}));d.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,Ir in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),Vr in t.result&&(this.prf=new _({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new r.Integer({value:this.iterationCount})),Ir in this&&Hr.defaultValues(Ir)!==this.keyLength&&e.push(new r.Integer({value:this.keyLength})),this.prf&&!1===Hr.defaultValues(Vr).isEqual(this.prf)&&e.push(this.prf.toSchema()),new r.Sequence({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return Ir in this&&Hr.defaultValues(Ir)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&!1===Hr.defaultValues(Vr).isEqual(this.prf)&&(e.prf=this.prf.toJSON()),e}}Hr.CLASS_NAME="PBKDF2Params";const Dr="keyDerivationFunc",Pr="encryptionScheme",Tr=[Dr,Pr];class Rr extends m{constructor(e={}){super(),this.keyDerivationFunc=i.H$(e,Dr,Rr.defaultValues(Dr)),this.encryptionScheme=i.H$(e,Pr,Rr.defaultValues(Pr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dr:case Pr:return new _;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.keyDerivationFunc||{}),_.schema(t.encryptionScheme||{})]})}fromSchema(e){i.ze(e,Tr);const t=r.compareSchema(e,e,Rr.schema({names:{keyDerivationFunc:{names:{blockName:Dr}},encryptionScheme:{names:{blockName:Pr}}}}));d.assertSchema(t,this.className),this.keyDerivationFunc=new _({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new _({schema:t.result.encryptionScheme})}toSchema(){return new r.Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}Rr.CLASS_NAME="PBES2Params";class Lr{constructor(e){this.crypto=e.crypto,this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle,this.name=i.H$(e,"name",c)}async encrypt(...e){return this.subtle.encrypt(...e)}async decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}async verify(...e){return this.subtle.verify(...e)}async digest(...e){return this.subtle.digest(...e)}async generateKey(...e){return this.subtle.generateKey(...e)}async deriveKey(...e){return this.subtle.deriveKey(...e)}async deriveBits(...e){return this.subtle.deriveBits(...e)}async wrapKey(...e){return this.subtle.wrapKey(...e)}async unwrapKey(...e){return this.subtle.unwrapKey(...e)}exportKey(...e){return this.subtle.exportKey(...e)}importKey(...e){return this.subtle.importKey(...e)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function Ur(e,t,n,r,s,i){let a,o;const l=[];switch(t.toUpperCase()){case"SHA-1":a=20,o=64;break;case"SHA-256":a=32,o=64;break;case"SHA-384":a=48,o=128;break;case"SHA-512":a=64,o=128;break;default:throw new Error("Unsupported hashing algorithm")}const c=new Uint8Array(r),u=new ArrayBuffer(2*r.byteLength+2),h=new Uint8Array(u);for(let e=0;e<c.length;e++)h[2*e]=0,h[2*e+1]=c[e];h[h.length-2]=0,h[h.length-1]=0,r=u.slice(0);const d=new ArrayBuffer(o),m=new Uint8Array(d);for(let e=0;e<d.byteLength;e++)m[e]=3;const f=s.byteLength,p=o*Math.ceil(f/o),g=new ArrayBuffer(p),b=new Uint8Array(g),y=new Uint8Array(s);for(let e=0;e<p;e++)b[e]=y[e%f];const v=r.byteLength,w=o*Math.ceil(v/o),S=new ArrayBuffer(w),q=new Uint8Array(S),k=new Uint8Array(r);for(let e=0;e<w;e++)q[e]=k[e%v];const A=g.byteLength+S.byteLength;let N=new ArrayBuffer(A),C=new Uint8Array(N);C.set(b),C.set(q,b.length);const x=Math.ceil((n>>3)/a);let E=Promise.resolve(N);for(let n=0;n<=x;n++){E=E.then((e=>{const t=new ArrayBuffer(d.byteLength+e.byteLength),n=new Uint8Array(t);return n.set(m),n.set(C,m.length),t}));for(let n=0;n<i;n++)E=E.then((n=>e.digest({name:t},new Uint8Array(n))));E=E.then((e=>{const t=new ArrayBuffer(o),n=new Uint8Array(t);for(let r=0;r<t.byteLength;r++)n[r]=e[r%e.byteLength];const r=Math.ceil(f/o)+Math.ceil(v/o),s=[];let i=0,a=o;for(let e=0;e<r;e++){const e=Array.from(new Uint8Array(N.slice(i,i+a)));i+=o,i+o>N.byteLength&&(a=N.byteLength-i);let r=511;for(let s=t.byteLength-1;s>=0;s--)r>>=8,r+=n[s]+e[s],e[s]=255&r;s.push(...e)}return N=new ArrayBuffer(s.length),C=new Uint8Array(N),C.set(s),l.push(...new Uint8Array(e)),N}))}return E=E.then((()=>{const e=new ArrayBuffer(n>>3);return new Uint8Array(e).set(new Uint8Array(l).slice(0,n>>3)),e})),E}function $r(e){const t="string"==typeof e?{name:e}:e;return"hash"in t?{...t,hash:$r(t.hash)}:t}class _r extends Lr{async importKey(e,t,n,a,o){var l,c,m,f,p,g;let b={};const y=$r(n);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,n,a,o);case"spki":{const e=r.fromBER(s.vJ.toArrayBuffer(t));d.assert(e,"keyData");const n=new $n;try{n.fromSchema(e.result)}catch{throw new u("Incorrect keyData")}switch(y.name.toUpperCase()){case"RSA-PSS":if(!y.hash)throw new h("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(y.hash.name.toUpperCase()){case"SHA-1":b.alg="PS1";break;case"SHA-256":b.alg="PS256";break;case"SHA-384":b.alg="PS384";break;case"SHA-512":b.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${y.hash.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(o=["verify"],b.kty="RSA",b.ext=a,b.key_ops=o,"1.2.840.113549.1.1.1"!==n.algorithm.algorithmId)throw new Error(`Incorrect public key algorithm: ${n.algorithm.algorithmId}`);if(!b.alg){if(!y.hash)throw new h("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(y.hash.name.toUpperCase()){case"SHA-1":b.alg="RS1";break;case"SHA-256":b.alg="RS256";break;case"SHA-384":b.alg="RS384";break;case"SHA-512":b.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${y.hash.name.toUpperCase()}`)}}const e=n.toJSON();Object.assign(b,e)}break;case"ECDSA":o=["verify"];case"ECDH":{if(b={kty:"EC",ext:a,key_ops:o},"1.2.840.10045.2.1"!==n.algorithm.algorithmId)throw new Error(`Incorrect public key algorithm: ${n.algorithm.algorithmId}`);const e=n.toJSON();Object.assign(b,e)}break;case"RSA-OAEP":{if(b.kty="RSA",b.ext=a,b.key_ops=o,"safari"===this.name.toLowerCase())b.alg="RSA-OAEP";else{if(!y.hash)throw new h("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(y.hash.name.toUpperCase()){case"SHA-1":b.alg="RSA-OAEP";break;case"SHA-256":b.alg="RSA-OAEP-256";break;case"SHA-384":b.alg="RSA-OAEP-384";break;case"SHA-512":b.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${y.hash.name.toUpperCase()}`)}}const e=n.toJSON();Object.assign(b,e)}break;case"RSAES-PKCS1-V1_5":{b.kty="RSA",b.ext=a,b.key_ops=o,b.alg="PS1";const e=n.toJSON();Object.assign(b,e)}break;default:throw new Error(`Incorrect algorithm name: ${y.name.toUpperCase()}`)}}break;case"pkcs8":{const e=new gr,n=r.fromBER(s.vJ.toArrayBuffer(t));d.assert(n,"keyData");try{e.fromSchema(n.result)}catch(e){throw new Error("Incorrect keyData")}if(!e.parsedKey)throw new Error("Incorrect keyData");switch(y.name.toUpperCase()){case"RSA-PSS":switch(null===(l=y.hash)||void 0===l?void 0:l.name.toUpperCase()){case"SHA-1":b.alg="PS1";break;case"SHA-256":b.alg="PS256";break;case"SHA-384":b.alg="PS384";break;case"SHA-512":b.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(c=y.hash)||void 0===c?void 0:c.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(o=["sign"],b.kty="RSA",b.ext=a,b.key_ops=o,"1.2.840.113549.1.1.1"!==e.privateKeyAlgorithm.algorithmId)throw new Error(`Incorrect private key algorithm: ${e.privateKeyAlgorithm.algorithmId}`);if("alg"in b==0)switch(null===(m=y.hash)||void 0===m?void 0:m.name.toUpperCase()){case"SHA-1":b.alg="RS1";break;case"SHA-256":b.alg="RS256";break;case"SHA-384":b.alg="RS384";break;case"SHA-512":b.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(f=y.hash)||void 0===f?void 0:f.name.toUpperCase()}`)}const t=e.toJSON();Object.assign(b,t)}break;case"ECDSA":o=["sign"];case"ECDH":{if(b={kty:"EC",ext:a,key_ops:o},"1.2.840.10045.2.1"!==e.privateKeyAlgorithm.algorithmId)throw new Error(`Incorrect algorithm: ${e.privateKeyAlgorithm.algorithmId}`);const t=e.toJSON();Object.assign(b,t)}break;case"RSA-OAEP":{if(b.kty="RSA",b.ext=a,b.key_ops=o,"safari"===this.name.toLowerCase())b.alg="RSA-OAEP";else switch(null===(p=y.hash)||void 0===p?void 0:p.name.toUpperCase()){case"SHA-1":b.alg="RSA-OAEP";break;case"SHA-256":b.alg="RSA-OAEP-256";break;case"SHA-384":b.alg="RSA-OAEP-384";break;case"SHA-512":b.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${null===(g=y.hash)||void 0===g?void 0:g.name.toUpperCase()}`)}const t=e.toJSON();Object.assign(b,t)}break;case"RSAES-PKCS1-V1_5":{o=["decrypt"],b.kty="RSA",b.ext=a,b.key_ops=o,b.alg="PS1";const t=e.toJSON();Object.assign(b,t)}break;default:throw new Error(`Incorrect algorithm name: ${y.name.toUpperCase()}`)}}break;case"jwk":b=t;break;default:throw new Error(`Incorrect format: ${e}`)}if("safari"===this.name.toLowerCase())try{return this.subtle.importKey("jwk",i.gG(JSON.stringify(b)),n,a,o)}catch{return this.subtle.importKey("jwk",b,n,a,o)}return this.subtle.importKey("jwk",b,n,a,o)}async exportKey(e,t){let n=await this.subtle.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&n instanceof ArrayBuffer&&(n=JSON.parse(i.lE(n))),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const e=new $n;try{e.fromJSON(n)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(!1)}case"pkcs8":{const e=new gr;try{e.fromJSON(n)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(!1)}case"jwk":return n;default:throw new Error(`Incorrect format: ${e}`)}}async convert(e,t,n,r,s,i){if(e.toLowerCase()===t.toLowerCase())return n;const a=await this.importKey(e,n,r,s,i);return this.exportKey(t,a)}getAlgorithmByOID(e,t=!1,n){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(t)throw new Error(`Unsupported algorithm identifier ${n?`for ${n} `:c}: ${e}`);return{}}getOIDByAlgorithm(e,t=!1,n){let r=c;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":r="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.1.1.5";break;case"SHA-256":r="1.2.840.113549.1.1.11";break;case"SHA-384":r="1.2.840.113549.1.1.12";break;case"SHA-512":r="1.2.840.113549.1.1.13"}break;case"RSA-PSS":r="1.2.840.113549.1.1.10";break;case"RSA-OAEP":r="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.10045.4.1";break;case"SHA-256":r="1.2.840.10045.4.3.2";break;case"SHA-384":r="1.2.840.10045.4.3.3";break;case"SHA-512":r="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":r="1.3.133.16.840.63.0.2";break;case"SHA-256":r="1.3.132.1.11.1";break;case"SHA-384":r="1.3.132.1.11.2";break;case"SHA-512":r="1.3.132.1.11.3"}break;case"AES-CTR":case"AES-CMAC":case"CONCAT":case"HKDF":break;case"AES-CBC":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.2";break;case 192:r="2.16.840.1.101.3.4.1.22";break;case 256:r="2.16.840.1.101.3.4.1.42"}break;case"AES-GCM":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.6";break;case 192:r="2.16.840.1.101.3.4.1.26";break;case 256:r="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.4";break;case 192:r="2.16.840.1.101.3.4.1.24";break;case 256:r="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.5";break;case 192:r="2.16.840.1.101.3.4.1.25";break;case 256:r="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.2.7";break;case"SHA-256":r="1.2.840.113549.2.9";break;case"SHA-384":r="1.2.840.113549.2.10";break;case"SHA-512":r="1.2.840.113549.2.11"}break;case"DH":r="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":r="1.3.14.3.2.26";break;case"SHA-256":r="2.16.840.1.101.3.4.2.1";break;case"SHA-384":r="2.16.840.1.101.3.4.2.2";break;case"SHA-512":r="2.16.840.1.101.3.4.2.3";break;case"PBKDF2":r="1.2.840.113549.1.5.12";break;case"P-256":r="1.2.840.10045.3.1.7";break;case"P-384":r="1.3.132.0.34";break;case"P-521":r="1.3.132.0.35"}if(!r&&t)throw new Error(`Unsupported algorithm ${n?`for ${n} `:c}: ${e.name}`);return r}getAlgorithmParameters(e,t){let n={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":n={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":n={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":n={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":n={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":n={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":n={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":n={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":n={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":if("derivekey"!==t.toLowerCase())return{algorithm:{name:"HKDF"},usages:[]};n={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;case"PBKDF2":if("derivekey"!==t.toLowerCase())return{algorithm:{name:"PBKDF2"},usages:[]};n={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]}}return n}getHashAlgorithm(e){let t=c;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{const n=new xr({schema:e.algorithmParams});if(n.hashAlgorithm){const e=this.getAlgorithmByOID(n.hashAlgorithm.algorithmId);if(!("name"in e))return c;t=e.name}else t="SHA-1"}catch{}}return t}async encryptEncryptedContentInfo(e){h.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),n=this.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),s=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),i=new ArrayBuffer(16),a=new Uint8Array(i);this.getRandomValues(a);const o=new ArrayBuffer(64),l=new Uint8Array(o);this.getRandomValues(l);const c=new Uint8Array(e.contentToEncrypt),u=new Hr({salt:new r.OctetString({valueHex:o}),iterationCount:e.iterationCount,prf:new _({algorithmId:s,algorithmParams:new r.Null})}),d=new Uint8Array(e.password),m=await this.importKey("raw",d,"PBKDF2",!1,["deriveKey"]),f=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:l,iterations:e.iterationCount},m,e.contentEncryptionAlgorithm,!1,["encrypt"]),p=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:a},f,c),g=new Rr({keyDerivationFunc:new _({algorithmId:n,algorithmParams:u.toSchema()}),encryptionScheme:new _({algorithmId:t,algorithmParams:new r.OctetString({valueHex:i})})});return new Sr({contentType:e.contentType,contentEncryptionAlgorithm:new _({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:g.toSchema()}),encryptedContent:new r.OctetString({valueHex:p})})}async decryptEncryptedContentInfo(e){if(h.assert(e,"password","encryptedContentInfo"),"1.2.840.113549.1.5.13"!==e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)throw new Error(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t,n;try{t=new Rr({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbes2Parameters"')}try{n=new Hr({schema:t.keyDerivationFunc.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbkdf2Params"')}const r=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),s=t.encryptionScheme.algorithmParams.valueBlock.valueHex,i=new Uint8Array(s),a=n.salt.valueBlock.valueHex,o=new Uint8Array(a),l=n.iterationCount;let c="SHA-1";n.prf&&(c=this.getAlgorithmByOID(n.prf.algorithmId,!0).hash.name);const u=await this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),d=await this.deriveKey({name:"PBKDF2",hash:{name:c},salt:o,iterations:l},u,r,!1,["decrypt"]),m=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:r.name,iv:i},d,m)}async stampDataWithPassword(e){if(e instanceof Object==0)throw new Error('Parameters must have type "Object"');let t;switch(h.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp"),e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await Ur(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),s=await this.importKey("raw",new Uint8Array(r),n,!1,["sign"]);return this.sign(n,s,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){h.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await Ur(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),s=await this.importKey("raw",new Uint8Array(r),n,!1,["verify"]);return this.verify(n,s,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e,t="SHA-1"){this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");const n=new _,s=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(s.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const i=s.algorithm;switch(i.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.algorithmId=this.getOIDByAlgorithm(i,!0);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":i.saltLength=32;break;case"SHA-384":i.saltLength=48;break;case"SHA-512":i.saltLength=64}const e={};if("SHA-1"!==t.toUpperCase()){const n=this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");e.hashAlgorithm=new _({algorithmId:n,algorithmParams:new r.Null}),e.maskGenAlgorithm=new _({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:e.hashAlgorithm.toSchema()})}20!==i.saltLength&&(e.saltLength=i.saltLength);const s=new xr(e);n.algorithmId="1.2.840.113549.1.1.10",n.algorithmParams=s.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${e.algorithm.name}`)}return{signatureAlgorithm:n,parameters:s}}async signWithPrivateKey(e,t,n){const r=await this.sign(n.algorithm,t,e);return"ECDSA"===n.algorithm.name?Zr(r):r}fillPublicKeyParameters(e,t){const n={},r=this.getHashAlgorithm(t);if(r===c)throw new Error(`Unsupported signature algorithm: ${t.algorithmId}`);let s;s="1.2.840.113549.1.1.10"===t.algorithmId?t.algorithmId:e.algorithm.algorithmId;const i=this.getAlgorithmByOID(s,!0);if(n.algorithm=this.getAlgorithmParameters(i.name,"importKey"),"hash"in n.algorithm.algorithm&&(n.algorithm.algorithm.hash.name=r),"ECDSA"===i.name){const t=e.algorithm;if(!t.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const r=t.algorithmParams;if("idBlock"in t.algorithmParams&&(1!==r.idBlock.tagClass||6!==r.idBlock.tagNumber))throw new Error("Incorrect type for ECDSA public key parameters");const s=this.getAlgorithmByOID(r.valueBlock.toString(),!0);n.algorithm.algorithm.namedCurve=s.name}return n}async getPublicKey(e,t,n){n||(n=this.fillPublicKeyParameters(e,t));const r=e.toSchema().toBER(!1);return this.importKey("spki",r,n.algorithm.algorithm,!0,n.algorithm.usages)}async verifyWithPublicKey(e,t,n,s,i){let a;if(i){const e={};let t;t="1.2.840.113549.1.1.10"===s.algorithmId?s.algorithmId:n.algorithm.algorithmId;const r=this.getAlgorithmByOID(t,!0);if(e.algorithm=this.getAlgorithmParameters(r.name,"importKey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=i),"ECDSA"===r.name){let t=!1;if("algorithmParams"in n.algorithm==1&&"idBlock"in n.algorithm.algorithmParams&&1===n.algorithm.algorithmParams.idBlock.tagClass&&6===n.algorithm.algorithmParams.idBlock.tagNumber&&(t=!0),!1===t)throw new Error("Incorrect type for ECDSA public key parameters");const r=this.getAlgorithmByOID(n.algorithm.algorithmParams.valueBlock.toString(),!0);e.algorithm.algorithm.namedCurve=r.name}a=await this.getPublicKey(n,null,e)}else{if(!(i=this.getHashAlgorithm(s)))throw new Error(`Unsupported signature algorithm: ${s.algorithmId}`);a=await this.getPublicKey(n,s)}const o=this.getAlgorithmParameters(a.algorithm.name,"verify");"hash"in o.algorithm&&(o.algorithm.hash.name=i);let l=t.valueBlock.valueHexView;if("ECDSA"===a.algorithm.name){const e=En.find(a.algorithm.namedCurve);if(!e)throw new Error("Unsupported named curve in use");const t=r.fromBER(l);d.assert(t,"Signature value"),l=Qr(t.result,e.size)}if("RSA-PSS"===a.algorithm.name){const e=new xr({schema:s.algorithmParams});o.algorithm.saltLength="saltLength"in e?e.saltLength:20;let t="SHA-1";"hashAlgorithm"in e&&(t=this.getAlgorithmByOID(e.hashAlgorithm.algorithmId,!0).name),o.algorithm.hash.name=t}return this.verify(o.algorithm,a,l,e)}}let jr={name:"none",crypto:null};function Mr(e){return!(!e||"object"!=typeof e||!("crypto"in e))}function Kr(e,...t){let r=null;if(t.length<2)r=t.length?t[0]:"undefined"!=typeof self&&self.crypto?new _r({name:"browser",crypto:self.crypto}):null;else{const e=t[0],n=t[1];Mr(n)?r=n:Mr(e)?r=e:"subtle"in e&&"getRandomValues"in e&&(r=new _r({crypto:e}))}if("undefined"!=typeof process&&"pid"in process&&void 0!==n.g&&"undefined"==typeof window){if(void 0===n.g[process.pid])n.g[process.pid]={};else if("object"!=typeof n.g[process.pid])throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(void 0===n.g[process.pid].pkijs)n.g[process.pid].pkijs={};else if("object"!=typeof n.g[process.pid].pkijs)throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);n.g[process.pid].pkijs.engine={name:e,crypto:r}}else jr={name:e,crypto:r}}function Jr(){if("undefined"!=typeof process&&"pid"in process&&void 0!==n.g&&"undefined"==typeof window){let e;try{e=n.g[process.pid].pkijs.engine}catch(e){throw new Error("Please call 'setEngine' before call to 'getEngine'")}return e}return jr}function Fr(e=!1){const t=Jr();if(!t.crypto&&e)throw new Error("Unable to create WebCrypto object");return t.crypto}function zr(e){return Fr(!0).getRandomValues(e)}function Wr(e,t,n){return Fr(!0).getOIDByAlgorithm(e,t,n)}function Gr(e,t){return Fr(!0).getAlgorithmParameters(e,t)}function Zr(e){if(e.byteLength%2!=0)return l;const t=e.byteLength/2,n=new ArrayBuffer(t);new Uint8Array(n).set(new Uint8Array(e,0,t));const s=new r.Integer({valueHex:n}),i=new ArrayBuffer(t);new Uint8Array(i).set(new Uint8Array(e,t,t));const a=new r.Integer({valueHex:i});return new r.Sequence({value:[s.convertToDER(),a.convertToDER()]}).toBER(!1)}function Qr(e,t){if(!(e instanceof r.Sequence&&2===e.valueBlock.value.length&&e.valueBlock.value[0]instanceof r.Integer&&e.valueBlock.value[1]instanceof r.Integer))return l;const n=e.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,s=e.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,i=new Uint8Array(2*t);return i.set(n,t-n.byteLength),i.set(s,2*t-s.byteLength),i.buffer}function Yr(e,t=!1,n){return Fr(!0).getAlgorithmByOID(e,t,n)}function Xr(e){return Fr(!0).getHashAlgorithm(e)}async function es(e,t,n,r,s){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new u(`Unknown hash function: ${e}`)}if(u.assert(t,"zBuffer","ArrayBuffer"),0===t.byteLength)throw new u("'zBuffer' has zero length, error");if(u.assert(r,"SharedInfo","ArrayBuffer"),n>255)throw new u("Please set 'Counter' argument to value less or equal to 255");const a=new ArrayBuffer(4),o=new Uint8Array(a);o[0]=0,o[1]=0,o[2]=0,o[3]=n;let c=l;return c=i.hk(c,t),c=i.hk(c,a),c=i.hk(c,r),{counter:n,result:await s.digest({name:e},c)}}async function ts(e,t,n,r,s=Fr(!0)){let a=0,o=1;switch(e.toUpperCase()){case"SHA-1":a=160;break;case"SHA-256":a=256;break;case"SHA-384":a=384;break;case"SHA-512":a=512;break;default:throw new u(`Unknown hash function: ${e}`)}if(u.assert(t,"Zbuffer","ArrayBuffer"),0===t.byteLength)throw new u("'Zbuffer' has zero length, error");u.assert(r,"SharedInfo","ArrayBuffer");const c=n/a;Math.floor(c)>0&&(o=Math.floor(c),c-o>0&&o++);const h=[];for(let n=1;n<=o;n++)h.push(await es(e,t,n,r,s));let d=l,m=1,f=!0;for(;f;){f=!1;for(const e of h)if(e.counter===m){d=i.hk(d,e.result),f=!0;break}m++}if(n>>=3,d.byteLength>n){const e=new ArrayBuffer(n),t=new Uint8Array(e),r=new Uint8Array(d);for(let e=0;e<n;e++)t[e]=r[e];return e}return d}const ns="version",rs="logID",ss="extensions",is="timestamp",as="hashAlgorithm",os="signatureAlgorithm",ls="signature",cs="none",us="sha1",hs="sha224",ds="sha256",ms="sha384",fs="sha512",ps="anonymous",gs="ecdsa";class bs extends m{constructor(e={}){super(),this.version=i.H$(e,ns,bs.defaultValues(ns)),this.logID=i.H$(e,rs,bs.defaultValues(rs)),this.timestamp=i.H$(e,is,bs.defaultValues(is)),this.extensions=i.H$(e,ss,bs.defaultValues(ss)),this.hashAlgorithm=i.H$(e,as,bs.defaultValues(as)),this.signatureAlgorithm=i.H$(e,os,bs.defaultValues(os)),this.signature=i.H$(e,ls,bs.defaultValues(ls)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ns:return 0;case rs:case ss:return l;case is:return new Date(0);case as:case os:return c;case ls:return new r.Any;default:return super.defaultValues(e)}}fromSchema(e){if(e instanceof r.RawData==0)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new o({stream:new a({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(i.r9(new Uint8Array(e.getBlock(8)),8));const n=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(n)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm=cs;break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm=us;break;case 3:this.hashAlgorithm=hs;break;case 4:this.hashAlgorithm=ds;break;case 5:this.hashAlgorithm=ms;break;case 6:this.hashAlgorithm=fs;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=ps;break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm=gs;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const s=e.getUint16(),a=new Uint8Array(e.getBlock(s)).buffer.slice(0),o=r.fromBER(a);if(d.assert(o,"SignedCertificateTimestamp"),this.signature=o.result,t!==47+n+s)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new r.RawData({data:e.stream.buffer})}toStream(){const e=new o;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),n=new Uint8Array(t),r=i.lL(this.timestamp.valueOf(),8);let s,a;switch(n.set(new Uint8Array(r),8-r.byteLength),e.appendView(n),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case cs:s=0;break;case"md5":s=1;break;case us:s=2;break;case hs:s=3;break;case ds:s=4;break;case ms:s=5;break;case fs:s=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}switch(e.appendChar(s),this.signatureAlgorithm.toLowerCase()){case ps:a=0;break;case"rsa":a=1;break;case"dsa":a=2;break;case gs:a=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(a);const l=this.signature.toBER(!1);return e.appendUint16(l.byteLength),e.appendView(new Uint8Array(l)),e}toJSON(){return{version:this.version,logID:i.RH(this.logID),timestamp:this.timestamp,extensions:i.RH(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t,n=0,s=Fr(!0)){const a=i.s3(i.lE(this.logID));let l=null;const u=new o;for(const t of e)if(t.log_id===a){l=t.key;break}if(!l)throw new Error(`Public key not found for CT with logId: ${a}`);const h=i.gG(i.Gh(l)),d=$n.fromBER(h);u.appendChar(0),u.appendChar(0);const m=new ArrayBuffer(8),f=new Uint8Array(m),p=i.lL(this.timestamp.valueOf(),8);return f.set(new Uint8Array(p),8-p.byteLength),u.appendView(f),u.appendUint16(n),0===n&&u.appendUint24(t.byteLength),u.appendView(new Uint8Array(t)),u.appendUint16(this.extensions.byteLength),0!==this.extensions.byteLength&&u.appendView(new Uint8Array(this.extensions)),s.verifyWithPublicKey(u.buffer.slice(0,u.length),new r.OctetString({valueHex:this.signature.toBER(!1)}),d,{algorithmId:c},"SHA-256")}}async function ys(e,t,n,r=-1,s=Fr(!0)){let i=null;const a=new o;for(let t=0;e.extensions&&t<e.extensions.length;t++)if(e.extensions[t].extnID===Ee){if(i=e.extensions[t].parsedValue,!i||0===i.timestamps.length)throw new Error("Nothing to verify in the certificate");e.extensions.splice(t,1)}if(null===i)throw new Error("No SignedCertificateTimestampList extension in the specified certificate");const l=e.encodeTBS().toBER(),c=await s.digest({name:"SHA-256"},new Uint8Array(t.subjectPublicKeyInfo.toSchema().toBER(!1)));a.appendView(new Uint8Array(c)),a.appendUint24(l.byteLength),a.appendView(new Uint8Array(l));const u=a.stream.slice(0,a.length);if(-1===r){const e=[];for(const t of i.timestamps){const r=await t.verify(n,u.buffer,1,s);e.push(r)}return e}return r>=i.timestamps.length&&(r=i.timestamps.length-1),[await i.timestamps[r].verify(n,u.buffer,1,s)]}bs.CLASS_NAME="SignedCertificateTimestamp";const vs="timestamps";class ws extends m{constructor(e={}){super(),this.timestamps=i.H$(e,vs,ws.defaultValues(vs)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===vs?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===vs?0===t.length:super.defaultValues(e)}static schema(e={}){var t;const n=i.H$(e,"names",{});return null!==(t=n.optional)&&void 0!==t||(n.optional=!1),new r.OctetString({name:n.blockName||"SignedCertificateTimestampList",optional:n.optional})}fromSchema(e){if(e instanceof r.OctetString==0)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new o({stream:new a({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new bs({stream:t}))}toSchema(){const e=new o;let t=0;const n=[];for(const e of this.timestamps){const r=e.toStream();n.push(r),t+=r.stream.buffer.byteLength}e.appendUint16(t);for(const t of n)e.appendView(t.stream.view);return new r.OctetString({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,(e=>e.toJSON()))}}}ws.CLASS_NAME="SignedCertificateTimestampList";const Ss="attributes",qs=[Ss];class ks extends m{constructor(e={}){super(),this.attributes=i.H$(e,Ss,ks.defaultValues(Ss)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ss?[]:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.attributes||c,value:W.schema()})]})}fromSchema(e){i.ze(e,qs);const t=r.compareSchema(e,e,ks.schema({names:{attributes:Ss}}));d.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,(e=>new W({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){return{attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}ks.CLASS_NAME="SubjectDirectoryAttributes";class As{static getItems(){return this.types||(this.types={},As.register(ae,"SubjectAltName",K),As.register(oe,"IssuerAltName",K),As.register(qe,"AuthorityKeyIdentifier",nt),As.register(le,"BasicConstraints",it),As.register(Oe,"MicrosoftCaVersion",lt),As.register(ye,"CertificatePolicies",vt),As.register(we,"CertificatePoliciesMicrosoft",vt),As.register(Ve,"MicrosoftCertTemplateV2",At),As.register(ge,"CRLDistributionPoints",Dt),As.register(be,"FreshestCRL",Dt),As.register(Ae,"ExtKeyUsage",Rt),As.register(fe,"CertificateIssuer",te),As.register(Ce,"AuthorityInfoAccess",Ut),As.register(xe,"SubjectInfoAccess",Ut),As.register(me,"IssuingDistributionPoint",Wt),As.register(pe,"NameConstraints",rn),As.register(ke,"PolicyConstraints",ln),As.register(Se,"PolicyMappings",pn),As.register(ie,"PrivateKeyUsagePeriod",vn),As.register(He,"QCStatements",Cn),As.register(Ee,"SignedCertificateTimestampList",ws),As.register(ne,"SubjectDirectoryAttributes",ks)),this.types}static fromBER(e,t){const n=r.fromBER(t);if(-1===n.offset)return null;const s=this.find(e);if(s)try{return new s.type({schema:n.result})}catch(t){const n=new s.type;return n.parsingError=`Incorrectly formatted value of extension ${s.name} (${e})`,n}return n.result}static find(e){return this.getItems()[e]||null}static register(e,t,n){this.getItems()[e]={name:t,type:n}}}const Ns="extnID",Cs="critical",xs="extnValue",Es="parsedValue",Bs=[Ns,Cs,xs];class Is extends m{constructor(e={}){super(),this.extnID=i.H$(e,Ns,Is.defaultValues(Ns)),this.critical=i.H$(e,Cs,Is.defaultValues(Cs)),this.extnValue=xs in e?new r.OctetString({valueHex:e.extnValue}):Is.defaultValues(xs),Es in e&&(this.parsedValue=i.H$(e,Es,Is.defaultValues(Es))),e.schema&&this.fromSchema(e.schema)}get parsedValue(){if(void 0===this._parsedValue){const e=As.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}static defaultValues(e){switch(e){case Ns:return c;case Cs:return!1;case xs:return new r.OctetString;case Es:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.extnID||c}),new r.Boolean({name:t.critical||c,optional:!0}),new r.OctetString({name:t.extnValue||c})]})}fromSchema(e){i.ze(e,Bs);const t=r.compareSchema(e,e,Is.schema({names:{extnID:Ns,critical:Cs,extnValue:xs}}));d.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),Cs in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new r.ObjectIdentifier({value:this.extnID})),this.critical!==Is.defaultValues(Cs)&&e.push(new r.Boolean({value:this.critical})),e.push(this.extnValue),new r.Sequence({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==Is.defaultValues(Cs)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}Is.CLASS_NAME="Extension";const Vs="extensions",Os=[Vs];class Hs extends m{constructor(e={}){super(),this.extensions=i.H$(e,Vs,Hs.defaultValues(Vs)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Vs?[]:super.defaultValues(e)}static schema(e={},t=!1){const n=i.H$(e,"names",{});return new r.Sequence({optional:t,name:n.blockName||c,value:[new r.Repeated({name:n.extensions||c,value:Is.schema(n.extension||{})})]})}fromSchema(e){i.ze(e,Os);const t=r.compareSchema(e,e,Hs.schema({names:{extensions:Vs}}));d.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,(e=>new Is({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.extensions,(e=>e.toSchema()))})}toJSON(){return{extensions:this.extensions.map((e=>e.toJSON()))}}}Hs.CLASS_NAME="Extensions";const Ds="issuer",Ps="serialNumber",Ts="issuerUID",Rs=[Ds,Ps,Ts];class Ls extends m{constructor(e={}){super(),this.issuer=i.H$(e,Ds,Ls.defaultValues(Ds)),this.serialNumber=i.H$(e,Ps,Ls.defaultValues(Ps)),Ts in e&&(this.issuerUID=i.H$(e,Ts,Ls.defaultValues(Ts))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ds:return new te;case Ps:return new r.Integer;case Ts:return new r.BitString;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[te.schema(t.issuer||{}),new r.Integer({name:t.serialNumber||c}),new r.BitString({optional:!0,name:t.issuerUID||c})]})}fromSchema(e){i.ze(e,Rs);const t=r.compareSchema(e,e,Ls.schema({names:{issuer:{names:{blockName:Ds}},serialNumber:Ps,issuerUID:Ts}}));d.assertSchema(t,this.className),this.issuer=new te({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,Ts in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new r.Sequence({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}Ls.CLASS_NAME="IssuerSerial";const Us="version",$s="baseCertificateID",_s="subjectName",js="issuer",Ms="signature",Ks="serialNumber",Js="attrCertValidityPeriod",Fs="attributes",zs="issuerUniqueID",Ws="extensions",Gs=[Us,$s,_s,js,Ms,Ks,Js,Fs,zs,Ws];class Zs extends m{constructor(e={}){super(),this.version=i.H$(e,Us,Zs.defaultValues(Us)),$s in e&&(this.baseCertificateID=i.H$(e,$s,Zs.defaultValues($s))),_s in e&&(this.subjectName=i.H$(e,_s,Zs.defaultValues(_s))),this.issuer=i.H$(e,js,Zs.defaultValues(js)),this.signature=i.H$(e,Ms,Zs.defaultValues(Ms)),this.serialNumber=i.H$(e,Ks,Zs.defaultValues(Ks)),this.attrCertValidityPeriod=i.H$(e,Js,Zs.defaultValues(Js)),this.attributes=i.H$(e,Fs,Zs.defaultValues(Fs)),zs in e&&(this.issuerUniqueID=i.H$(e,zs,Zs.defaultValues(zs))),Ws in e&&(this.extensions=i.H$(e,Ws,Zs.defaultValues(Ws))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Us:return 0;case $s:return new Ls;case _s:case js:return new te;case Ms:return new _;case Ks:return new r.Integer;case Js:return new Y;case Fs:return[];case zs:return new r.BitString;case Ws:return new Hs;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),new r.Choice({value:[new r.Constructed({name:t.baseCertificateID||c,idBlock:{tagClass:3,tagNumber:0},value:Ls.schema().valueBlock.value}),new r.Constructed({name:t.subjectName||c,idBlock:{tagClass:3,tagNumber:1},value:te.schema().valueBlock.value})]}),te.schema({names:{blockName:t.issuer||c}}),_.schema(t.signature||{}),new r.Integer({name:t.serialNumber||c}),Y.schema(t.attrCertValidityPeriod||{}),new r.Sequence({name:t.attributes||c,value:[new r.Repeated({value:W.schema()})]}),new r.BitString({optional:!0,name:t.issuerUniqueID||c}),Hs.schema(t.extensions||{},!0)]})}fromSchema(e){i.ze(e,Gs);const t=r.compareSchema(e,e,Zs.schema({names:{version:Us,baseCertificateID:$s,subjectName:_s,issuer:js,signature:{names:{blockName:Ms}},serialNumber:Ks,attrCertValidityPeriod:{names:{blockName:Js}},attributes:Fs,issuerUniqueID:zs,extensions:{names:{blockName:Ws}}}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,$s in t.result&&(this.baseCertificateID=new Ls({schema:new r.Sequence({value:t.result.baseCertificateID.valueBlock.value})})),_s in t.result&&(this.subjectName=new te({schema:new r.Sequence({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new _({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Y({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,(e=>new W({schema:e}))),zs in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),Ws in t.result&&(this.extensions=new Hs({schema:t.result.extensions}))}toSchema(){const e=new r.Sequence({value:[new r.Integer({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new r.Sequence({value:Array.from(this.attributes,(e=>e.toSchema()))})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,(e=>e.toJSON())),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}Zs.CLASS_NAME="AttributeCertificateInfoV1";const Qs="acinfo",Ys="signatureAlgorithm",Xs="signatureValue",ei=[Qs,Xs,Ys];class ti extends m{constructor(e={}){super(),this.acinfo=i.H$(e,Qs,ti.defaultValues(Qs)),this.signatureAlgorithm=i.H$(e,Ys,ti.defaultValues(Ys)),this.signatureValue=i.H$(e,Xs,ti.defaultValues(Xs)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qs:return new Zs;case Ys:return new _;case Xs:return new r.BitString;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[Zs.schema(t.acinfo||{}),_.schema(t.signatureAlgorithm||{}),new r.BitString({name:t.signatureValue||c})]})}fromSchema(e){i.ze(e,ei);const t=r.compareSchema(e,e,ti.schema({names:{acinfo:{names:{blockName:Qs}},signatureAlgorithm:{names:{blockName:Ys}},signatureValue:Xs}}));d.assertSchema(t,this.className),this.acinfo=new Zs({schema:t.result.acinfo}),this.signatureAlgorithm=new _({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new r.Sequence({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}ti.CLASS_NAME="AttributeCertificateV1";const ni="digestedObjectType",ri="otherObjectTypeID",si="digestAlgorithm",ii="objectDigest",ai=[ni,ri,si,ii];class oi extends m{constructor(e={}){super(),this.digestedObjectType=i.H$(e,ni,oi.defaultValues(ni)),ri in e&&(this.otherObjectTypeID=i.H$(e,ri,oi.defaultValues(ri))),this.digestAlgorithm=i.H$(e,si,oi.defaultValues(si)),this.objectDigest=i.H$(e,ii,oi.defaultValues(ii)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ni:return new r.Enumerated;case ri:return new r.ObjectIdentifier;case si:return new _;case ii:return new r.BitString;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Enumerated({name:t.digestedObjectType||c}),new r.ObjectIdentifier({optional:!0,name:t.otherObjectTypeID||c}),_.schema(t.digestAlgorithm||{}),new r.BitString({name:t.objectDigest||c})]})}fromSchema(e){i.ze(e,ai);const t=r.compareSchema(e,e,oi.schema({names:{digestedObjectType:ni,otherObjectTypeID:ri,digestAlgorithm:{names:{blockName:si}},objectDigest:ii}}));d.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,ri in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new _({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new r.Sequence({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}oi.CLASS_NAME="ObjectDigestInfo";const li="issuerName",ci="baseCertificateID",ui="objectDigestInfo",hi=[li,ci,ui];class di extends m{constructor(e={}){super(),li in e&&(this.issuerName=i.H$(e,li,di.defaultValues(li))),ci in e&&(this.baseCertificateID=i.H$(e,ci,di.defaultValues(ci))),ui in e&&(this.objectDigestInfo=i.H$(e,ui,di.defaultValues(ui))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case li:return new te;case ci:return new Ls;case ui:return new oi;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[te.schema({names:{blockName:t.issuerName}},!0),new r.Constructed({optional:!0,name:t.baseCertificateID||c,idBlock:{tagClass:3,tagNumber:0},value:Ls.schema().valueBlock.value}),new r.Constructed({optional:!0,name:t.objectDigestInfo||c,idBlock:{tagClass:3,tagNumber:1},value:oi.schema().valueBlock.value})]})}fromSchema(e){i.ze(e,hi);const t=r.compareSchema(e,e,di.schema({names:{issuerName:li,baseCertificateID:ci,objectDigestInfo:ui}}));d.assertSchema(t,this.className),li in t.result&&(this.issuerName=new te({schema:t.result.issuerName})),ci in t.result&&(this.baseCertificateID=new Ls({schema:new r.Sequence({value:t.result.baseCertificateID.valueBlock.value})})),ui in t.result&&(this.objectDigestInfo=new oi({schema:new r.Sequence({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new r.Sequence;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}di.CLASS_NAME="V2Form";const mi="baseCertificateID",fi="entityName",pi="objectDigestInfo",gi=[mi,fi,pi];class bi extends m{constructor(e={}){super(),mi in e&&(this.baseCertificateID=i.H$(e,mi,bi.defaultValues(mi))),fi in e&&(this.entityName=i.H$(e,fi,bi.defaultValues(fi))),pi in e&&(this.objectDigestInfo=i.H$(e,pi,bi.defaultValues(pi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mi:return new Ls;case fi:return new te;case pi:return new oi;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Constructed({optional:!0,name:t.baseCertificateID||c,idBlock:{tagClass:3,tagNumber:0},value:Ls.schema().valueBlock.value}),new r.Constructed({optional:!0,name:t.entityName||c,idBlock:{tagClass:3,tagNumber:1},value:te.schema().valueBlock.value}),new r.Constructed({optional:!0,name:t.objectDigestInfo||c,idBlock:{tagClass:3,tagNumber:2},value:oi.schema().valueBlock.value})]})}fromSchema(e){i.ze(e,gi);const t=r.compareSchema(e,e,bi.schema({names:{baseCertificateID:mi,entityName:fi,objectDigestInfo:pi}}));d.assertSchema(t,this.className),mi in t.result&&(this.baseCertificateID=new Ls({schema:new r.Sequence({value:t.result.baseCertificateID.valueBlock.value})})),fi in t.result&&(this.entityName=new te({schema:new r.Sequence({value:t.result.entityName.valueBlock.value})})),pi in t.result&&(this.objectDigestInfo=new oi({schema:new r.Sequence({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new r.Sequence;return this.baseCertificateID&&e.valueBlock.value.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}bi.CLASS_NAME="Holder";const yi="version",vi="holder",wi="issuer",Si="signature",qi="serialNumber",ki="attrCertValidityPeriod",Ai="attributes",Ni="issuerUniqueID",Ci="extensions",xi=[yi,vi,wi,Si,qi,ki,Ai,Ni,Ci];class Ei extends m{constructor(e={}){super(),this.version=i.H$(e,yi,Ei.defaultValues(yi)),this.holder=i.H$(e,vi,Ei.defaultValues(vi)),this.issuer=i.H$(e,wi,Ei.defaultValues(wi)),this.signature=i.H$(e,Si,Ei.defaultValues(Si)),this.serialNumber=i.H$(e,qi,Ei.defaultValues(qi)),this.attrCertValidityPeriod=i.H$(e,ki,Ei.defaultValues(ki)),this.attributes=i.H$(e,Ai,Ei.defaultValues(Ai)),Ni in e&&(this.issuerUniqueID=i.H$(e,Ni,Ei.defaultValues(Ni))),Ci in e&&(this.extensions=i.H$(e,Ci,Ei.defaultValues(Ci))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case yi:return 1;case vi:return new bi;case wi:return{};case Si:return new _;case qi:return new r.Integer;case ki:return new Y;case Ai:return[];case Ni:return new r.BitString;case Ci:return new Hs;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),bi.schema(t.holder||{}),new r.Choice({value:[te.schema({names:{blockName:t.issuer||c}}),new r.Constructed({name:t.issuer||c,idBlock:{tagClass:3,tagNumber:0},value:di.schema().valueBlock.value})]}),_.schema(t.signature||{}),new r.Integer({name:t.serialNumber||c}),Y.schema(t.attrCertValidityPeriod||{}),new r.Sequence({name:t.attributes||c,value:[new r.Repeated({value:W.schema()})]}),new r.BitString({optional:!0,name:t.issuerUniqueID||c}),Hs.schema(t.extensions||{},!0)]})}fromSchema(e){i.ze(e,xi);const t=r.compareSchema(e,e,Ei.schema({names:{version:yi,holder:{names:{blockName:vi}},issuer:wi,signature:{names:{blockName:Si}},serialNumber:qi,attrCertValidityPeriod:{names:{blockName:ki}},attributes:Ai,issuerUniqueID:Ni,extensions:{names:{blockName:Ci}}}}));if(d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new bi({schema:t.result.holder}),3!==t.result.issuer.idBlock.tagClass)throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2");this.issuer=new di({schema:new r.Sequence({value:t.result.issuer.valueBlock.value})}),this.signature=new _({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Y({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,(e=>new W({schema:e}))),Ni in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),Ci in t.result&&(this.extensions=new Hs({schema:t.result.extensions}))}toSchema(){const e=new r.Sequence({value:[new r.Integer({value:this.version}),this.holder.toSchema(),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new r.Sequence({value:Array.from(this.attributes,(e=>e.toSchema()))})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,(e=>e.toJSON()))};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}Ei.CLASS_NAME="AttributeCertificateInfoV2";const Bi="acinfo",Ii="signatureAlgorithm",Vi="signatureValue",Oi=[Bi,Ii,Vi];class Hi extends m{constructor(e={}){super(),this.acinfo=i.H$(e,Bi,Hi.defaultValues(Bi)),this.signatureAlgorithm=i.H$(e,Ii,Hi.defaultValues(Ii)),this.signatureValue=i.H$(e,Vi,Hi.defaultValues(Vi)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bi:return new Ei;case Ii:return new _;case Vi:return new r.BitString;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[Ei.schema(t.acinfo||{}),_.schema(t.signatureAlgorithm||{}),new r.BitString({name:t.signatureValue||c})]})}fromSchema(e){i.ze(e,Oi);const t=r.compareSchema(e,e,Hi.schema({names:{acinfo:{names:{blockName:Bi}},signatureAlgorithm:{names:{blockName:Ii}},signatureValue:Vi}}));d.assertSchema(t,this.className),this.acinfo=new Ei({schema:t.result.acinfo}),this.signatureAlgorithm=new _({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new r.Sequence({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}Hi.CLASS_NAME="AttributeCertificateV2";const Di="contentType",Pi="content",Ti=[Di,Pi];class Ri extends m{constructor(e={}){super(),this.contentType=i.H$(e,Di,Ri.defaultValues(Di)),this.content=i.H$(e,Pi,Ri.defaultValues(Pi)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Di:return c;case Pi:return new r.Any;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Di:return"string"==typeof t&&t===this.defaultValues(Di);case Pi:return t instanceof r.Any;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return"optional"in t==0&&(t.optional=!1),new r.Sequence({name:t.blockName||"ContentInfo",optional:t.optional,value:[new r.ObjectIdentifier({name:t.contentType||Di}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Any({name:t.content||Pi})]})]})}fromSchema(e){i.ze(e,Ti);const t=r.compareSchema(e,e,Ri.schema());d.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.contentType}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof r.Any||(e.content=this.content.toJSON()),e}}Ri.CLASS_NAME="ContentInfo",Ri.DATA=De,Ri.SIGNED_DATA=Pe,Ri.ENVELOPED_DATA=Te,Ri.ENCRYPTED_DATA=Re;const Li="type",Ui="value",$i="utcTimeName",_i="generalTimeName",ji=[$i,_i];var Mi;!function(e){e[e.UTCTime=0]="UTCTime",e[e.GeneralizedTime=1]="GeneralizedTime",e[e.empty=2]="empty"}(Mi||(Mi={}));class Ki extends m{constructor(e={}){super(),this.type=i.H$(e,Li,Ki.defaultValues(Li)),this.value=i.H$(e,Ui,Ki.defaultValues(Ui)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Li:return 0;case Ui:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=i.H$(e,"names",{});return new r.Choice({optional:t,value:[new r.UTCTime({name:n.utcTimeName||c}),new r.GeneralizedTime({name:n.generalTimeName||c})]})}fromSchema(e){i.ze(e,ji);const t=r.compareSchema(e,e,Ki.schema({names:{utcTimeName:$i,generalTimeName:_i}}));d.assertSchema(t,this.className),$i in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),_i in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return 0===this.type?new r.UTCTime({valueDate:this.value}):1===this.type?new r.GeneralizedTime({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}Ki.CLASS_NAME="Time";const Ji="tbs",Fi="version",zi="serialNumber",Wi="signature",Gi="issuer",Zi="notBefore",Qi="notAfter",Yi="subject",Xi="subjectPublicKeyInfo",ea="issuerUniqueID",ta="subjectUniqueID",na="extensions",ra="signatureAlgorithm",sa="signatureValue",ia="tbsCertificate",aa=`${ia}.${Fi}`,oa=`${ia}.${zi}`,la=`${ia}.${Wi}`,ca=`${ia}.${Gi}`,ua=`${ia}.${Zi}`,ha=`${ia}.${Qi}`,da=`${ia}.${Yi}`,ma=`${ia}.${Xi}`,fa=`${ia}.${ea}`,pa=`${ia}.${ta}`,ga=`${ia}.${na}`,ba=[ia,aa,oa,la,ca,ua,ha,da,ma,fa,pa,ga,ra,sa];function ya(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||ia,value:[new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Integer({name:t.tbsCertificateVersion||aa})]}),new r.Integer({name:t.tbsCertificateSerialNumber||oa}),_.schema(t.signature||{names:{blockName:la}}),S.schema(t.issuer||{names:{blockName:ca}}),new r.Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[Ki.schema(t.notBefore||{names:{utcTimeName:ua,generalTimeName:ua}}),Ki.schema(t.notAfter||{names:{utcTimeName:ha,generalTimeName:ha}})]}),S.schema(t.subject||{names:{blockName:da}}),$n.schema(t.subjectPublicKeyInfo||{names:{blockName:ma}}),new r.Primitive({name:t.tbsCertificateIssuerUniqueID||fa,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new r.Primitive({name:t.tbsCertificateSubjectUniqueID||pa,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[Hs.schema(t.extensions||{names:{blockName:ga}})]})]})}class va extends m{constructor(e={}){super(),this.tbsView=new Uint8Array(i.H$(e,Ji,va.defaultValues(Ji))),this.version=i.H$(e,Fi,va.defaultValues(Fi)),this.serialNumber=i.H$(e,zi,va.defaultValues(zi)),this.signature=i.H$(e,Wi,va.defaultValues(Wi)),this.issuer=i.H$(e,Gi,va.defaultValues(Gi)),this.notBefore=i.H$(e,Zi,va.defaultValues(Zi)),this.notAfter=i.H$(e,Qi,va.defaultValues(Qi)),this.subject=i.H$(e,Yi,va.defaultValues(Yi)),this.subjectPublicKeyInfo=i.H$(e,Xi,va.defaultValues(Xi)),ea in e&&(this.issuerUniqueID=i.H$(e,ea,va.defaultValues(ea))),ta in e&&(this.subjectUniqueID=i.H$(e,ta,va.defaultValues(ta))),na in e&&(this.extensions=i.H$(e,na,va.defaultValues(na))),this.signatureAlgorithm=i.H$(e,ra,va.defaultValues(ra)),this.signatureValue=i.H$(e,sa,va.defaultValues(sa)),e.schema&&this.fromSchema(e.schema)}get tbs(){return s.vJ.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Ji:return l;case Fi:return 0;case zi:return new r.Integer;case Wi:return new _;case Gi:return new S;case Zi:case Qi:return new Ki;case Yi:return new S;case Xi:return new $n;case ea:case ta:return l;case na:return[];case ra:return new _;case sa:return new r.BitString;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[ya(t.tbsCertificate),_.schema(t.signatureAlgorithm||{names:{blockName:ra}}),new r.BitString({name:t.signatureValue||sa})]})}fromSchema(e){i.ze(e,ba);const t=r.compareSchema(e,e,va.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:ga}}}}}}));d.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,aa in t.result&&(this.version=t.result[aa].valueBlock.valueDec),this.serialNumber=t.result[oa],this.signature=new _({schema:t.result[la]}),this.issuer=new S({schema:t.result[ca]}),this.notBefore=new Ki({schema:t.result[ua]}),this.notAfter=new Ki({schema:t.result[ha]}),this.subject=new S({schema:t.result[da]}),this.subjectPublicKeyInfo=new $n({schema:t.result[ma]}),fa in t.result&&(this.issuerUniqueID=t.result[fa].valueBlock.valueHex),pa in t.result&&(this.subjectUniqueID=t.result[pa].valueBlock.valueHex),ga in t.result&&(this.extensions=Array.from(t.result[ga],(e=>new Is({schema:e})))),this.signatureAlgorithm=new _({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return Fi in this&&this.version!==va.defaultValues(Fi)&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Integer({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new r.Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new r.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new r.Sequence({value:Array.from(this.extensions,(e=>e.toSchema()))})]})),new r.Sequence({value:e})}toSchema(e=!1){let t;if(!1===e){if(!this.tbsView.byteLength)return va.schema().value[0];const e=r.fromBER(this.tbsView);d.assert(e,"TBS Certificate"),t=e.result}else t=this.encodeTBS();return new r.Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:s.ep.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Fi in this&&this.version!==va.defaultValues(Fi)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=s.ep.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=s.ep.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}async getPublicKey(e,t=Fr(!0)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(e="SHA-1",t=Fr(!0)){return t.digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e,t="SHA-1",n=Fr(!0)){if(!e)throw new Error("Need to provide a private key for signing");const s=await n.getSignatureParameters(e,t),i=s.parameters;this.signature=s.signatureAlgorithm,this.signatureAlgorithm=s.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new r.BitString({valueHex:a})}async verify(e,t=Fr(!0)){let n;if(e?n=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(n=this.subjectPublicKeyInfo),!(n instanceof $n))throw new Error("Please provide issuer certificate as a parameter");return t.verifyWithPublicKey(this.tbsView,this.signatureValue,n,this.signatureAlgorithm)}}function wa(e,t=null){if(t&&e.issuer.isEqual(t.issuer)&&e.serialNumber.isEqual(t.serialNumber))return null;let n=!1;if(e.extensions)for(const t of e.extensions)if(t.extnID===le&&t.parsedValue instanceof it&&t.parsedValue.cA){n=!0;break}return n?e:null}va.CLASS_NAME="Certificate";const Sa="certId",qa="certValue",ka="parsedValue",Aa=[Sa,qa];class Na extends m{constructor(e={}){super(),this.certId=i.H$(e,Sa,Na.defaultValues(Sa)),this.certValue=i.H$(e,qa,Na.defaultValues(qa)),ka in e&&(this.parsedValue=i.H$(e,ka,Na.defaultValues(ka))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sa:return c;case qa:return new r.Any;case ka:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Sa:return t===c;case qa:return t instanceof r.Any;case ka:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.id||"id"}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Any({name:t.value||"value"})]})]})}fromSchema(e){i.ze(e,Aa);const t=r.compareSchema(e,e,Na.schema({names:{id:Sa,value:qa}}));d.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const n=this.certValue.valueBlock.valueHexView;switch(this.certId){case Ue:try{this.parsedValue=va.fromBER(n)}catch(e){Hi.fromBER(n)}break;case _e:this.parsedValue=Hi.fromBER(n);break;default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){return ka in this&&("acinfo"in this.parsedValue?this.certId=_e:this.certId=Ue,this.certValue=new r.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new r.Sequence({value:[new r.ObjectIdentifier({value:this.certId}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}Na.CLASS_NAME="CertBag";const Ca="userCertificate",xa="revocationDate",Ea="crlEntryExtensions",Ba=[Ca,xa,Ea];class Ia extends m{constructor(e={}){super(),this.userCertificate=i.H$(e,Ca,Ia.defaultValues(Ca)),this.revocationDate=i.H$(e,xa,Ia.defaultValues(xa)),Ea in e&&(this.crlEntryExtensions=i.H$(e,Ea,Ia.defaultValues(Ea))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ca:return new r.Integer;case xa:return new Ki;case Ea:return new Hs;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.userCertificate||Ca}),Ki.schema({names:{utcTimeName:t.revocationDate||xa,generalTimeName:t.revocationDate||xa}}),Hs.schema({names:{blockName:t.crlEntryExtensions||Ea}},!0)]})}fromSchema(e){i.ze(e,Ba);const t=r.compareSchema(e,e,Ia.schema());d.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new Ki({schema:t.result.revocationDate}),Ea in t.result&&(this.crlEntryExtensions=new Hs({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new r.Sequence({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}Ia.CLASS_NAME="RevokedCertificate";const Va="tbs",Oa="version",Ha="signature",Da="issuer",Pa="thisUpdate",Ta="nextUpdate",Ra="revokedCertificates",La="crlExtensions",Ua="signatureAlgorithm",$a="signatureValue",_a="tbsCertList",ja=`${_a}.version`,Ma=`${_a}.signature`,Ka=`${_a}.issuer`,Ja=`${_a}.thisUpdate`,Fa=`${_a}.nextUpdate`,za=`${_a}.revokedCertificates`,Wa=`${_a}.extensions`,Ga=[_a,ja,Ma,Ka,Ja,Fa,za,Wa,Ua,$a];function Za(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||_a,value:[new r.Integer({optional:!0,name:t.tbsCertListVersion||ja,value:2}),_.schema(t.signature||{names:{blockName:Ma}}),S.schema(t.issuer||{names:{blockName:Ka}}),Ki.schema(t.tbsCertListThisUpdate||{names:{utcTimeName:Ja,generalTimeName:Ja}}),Ki.schema(t.tbsCertListNextUpdate||{names:{utcTimeName:Fa,generalTimeName:Fa}},!0),new r.Sequence({optional:!0,value:[new r.Repeated({name:t.tbsCertListRevokedCertificates||za,value:new r.Sequence({value:[new r.Integer,Ki.schema(),Hs.schema({},!0)]})})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Hs.schema(t.crlExtensions||{names:{blockName:Wa}})]})]})}const Qa=[qe,oe,ce,ue,me,be,Ce,he,de,fe];class Ya extends m{constructor(e={}){super(),this.tbsView=new Uint8Array(i.H$(e,Va,Ya.defaultValues(Va))),this.version=i.H$(e,Oa,Ya.defaultValues(Oa)),this.signature=i.H$(e,Ha,Ya.defaultValues(Ha)),this.issuer=i.H$(e,Da,Ya.defaultValues(Da)),this.thisUpdate=i.H$(e,Pa,Ya.defaultValues(Pa)),Ta in e&&(this.nextUpdate=i.H$(e,Ta,Ya.defaultValues(Ta))),Ra in e&&(this.revokedCertificates=i.H$(e,Ra,Ya.defaultValues(Ra))),La in e&&(this.crlExtensions=i.H$(e,La,Ya.defaultValues(La))),this.signatureAlgorithm=i.H$(e,Ua,Ya.defaultValues(Ua)),this.signatureValue=i.H$(e,$a,Ya.defaultValues($a)),e.schema&&this.fromSchema(e.schema)}get tbs(){return s.vJ.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Va:return l;case Oa:return 0;case Ha:return new _;case Da:return new S;case Pa:case Ta:return new Ki;case Ra:return[];case La:return new Hs;case Ua:return new _;case $a:return new r.BitString;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||"CertificateList",value:[Za(e),_.schema(t.signatureAlgorithm||{names:{blockName:Ua}}),new r.BitString({name:t.signatureValue||$a})]})}fromSchema(e){i.ze(e,Ga);const t=r.compareSchema(e,e,Ya.schema());d.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,ja in t.result&&(this.version=t.result[ja].valueBlock.valueDec),this.signature=new _({schema:t.result[Ma]}),this.issuer=new S({schema:t.result[Ka]}),this.thisUpdate=new Ki({schema:t.result[Ja]}),Fa in t.result&&(this.nextUpdate=new Ki({schema:t.result[Fa]})),za in t.result&&(this.revokedCertificates=Array.from(t.result[za],(e=>new Ia({schema:e})))),Wa in t.result&&(this.crlExtensions=new Hs({schema:t.result[Wa]})),this.signatureAlgorithm=new _({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==Ya.defaultValues(Oa)&&e.push(new r.Integer({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new r.Sequence({value:Array.from(this.revokedCertificates,(e=>e.toSchema()))})),this.crlExtensions&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new r.Sequence({value:e})}toSchema(e=!1){let t;if(e)t=this.encodeTBS();else{if(!this.tbsView.byteLength)return Ya.schema();const e=r.fromBER(this.tbsView);d.assert(e,"TBS Certificate Revocation List"),t=e.result}return new r.Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:s.ep.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==Ya.defaultValues(Oa)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,(e=>e.toJSON()))),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer))return!1;if(!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}async sign(e,t="SHA-1",n=Fr(!0)){if(!e)throw new Error("Need to provide a private key for signing");const s=await n.getSignatureParameters(e,t),{parameters:i}=s;this.signature=s.signatureAlgorithm,this.signatureAlgorithm=s.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new r.BitString({valueHex:a})}async verify(e={},t=Fr(!0)){let n;if(e.issuerCertificate&&(n=e.issuerCertificate.subjectPublicKeyInfo,!this.issuer.isEqual(e.issuerCertificate.subject)))return!1;if(e.publicKeyInfo&&(n=e.publicKeyInfo),!n)throw new Error("Issuer's certificate must be provided as an input parameter");if(this.crlExtensions)for(const e of this.crlExtensions.extensions)if(e.critical&&!Qa.includes(e.extnID))return!1;return t.verifyWithPublicKey(this.tbsView,this.signatureValue,n,this.signatureAlgorithm)}}Ya.CLASS_NAME="CertificateRevocationList";const Xa="crlId",eo="crlValue",to="parsedValue",no=[Xa,eo];class ro extends m{constructor(e={}){super(),this.crlId=i.H$(e,Xa,ro.defaultValues(Xa)),this.crlValue=i.H$(e,eo,ro.defaultValues(eo)),to in e&&(this.parsedValue=i.H$(e,to,ro.defaultValues(to))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xa:return c;case eo:return new r.Any;case to:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xa:return t===c;case eo:return t instanceof r.Any;case to:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.id||"id"}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Any({name:t.value||"value"})]})]})}fromSchema(e){i.ze(e,no);const t=r.compareSchema(e,e,ro.schema({names:{id:Xa,value:eo}}));if(d.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId!==je)throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`);this.parsedValue=Ya.fromBER(this.certValue.valueBlock.valueHex)}toSchema(){return this.parsedValue&&(this.crlId=je,this.crlValue=new r.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new r.Sequence({value:[new r.ObjectIdentifier({value:this.crlId}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}ro.CLASS_NAME="CRLBag";const so="version",io="encryptedContentInfo",ao="unprotectedAttrs",oo=[so,io,ao];class lo extends m{constructor(e={}){super(),this.version=i.H$(e,so,lo.defaultValues(so)),this.encryptedContentInfo=i.H$(e,io,lo.defaultValues(io)),ao in e&&(this.unprotectedAttrs=i.H$(e,ao,lo.defaultValues(ao))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case so:return 0;case io:return new Sr;case ao:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case so:return 0===t;case io:return Sr.compareWithDefault("contentType",t.contentType)&&Sr.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Sr.compareWithDefault("encryptedContent",t.encryptedContent);case ao:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),Sr.schema(t.encryptedContentInfo||{}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.Repeated({name:t.unprotectedAttrs||c,value:W.schema()})]})]})}fromSchema(e){i.ze(e,oo);const t=r.compareSchema(e,e,lo.schema({names:{version:so,encryptedContentInfo:{names:{blockName:io}},unprotectedAttrs:ao}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new Sr({schema:t.result.encryptedContentInfo}),ao in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,(e=>new W({schema:e}))))}toSchema(){const e=[];return e.push(new r.Integer({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,(e=>e.toJSON()))),e}async encrypt(e,t=Fr(!0)){u.assert(e,"parameters","object");const n={...e,contentType:"1.2.840.113549.1.7.1"};this.encryptedContentInfo=await t.encryptEncryptedContentInfo(n)}async decrypt(e,t=Fr(!0)){u.assert(e,"parameters","object");const n={...e,encryptedContentInfo:this.encryptedContentInfo};return t.decryptEncryptedContentInfo(n)}}lo.CLASS_NAME="EncryptedData";const co="encryptionAlgorithm",uo="encryptedData",ho="parsedValue",mo=[co,uo];class fo extends m{constructor(e={}){super(),this.encryptionAlgorithm=i.H$(e,co,fo.defaultValues(co)),this.encryptedData=i.H$(e,uo,fo.defaultValues(uo)),ho in e&&(this.parsedValue=i.H$(e,ho,fo.defaultValues(ho))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case co:return new _;case uo:return new r.OctetString;case ho:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case co:return _.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==0;case uo:return t.isEqual(fo.defaultValues(e));case ho:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.encryptionAlgorithm||{names:{blockName:co}}),new r.Choice({value:[new r.OctetString({name:t.encryptedData||uo}),new r.OctetString({idBlock:{isConstructed:!0},name:t.encryptedData||uo})]})]})}fromSchema(e){i.ze(e,mo);const t=r.compareSchema(e,e,fo.schema({names:{encryptionAlgorithm:{names:{blockName:co}},encryptedData:uo}}));d.assertSchema(t,this.className),this.encryptionAlgorithm=new _({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new r.Sequence({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}async parseInternalValues(e,t=Fr(!0)){const n=new lo({encryptedContentInfo:new Sr({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})}),r=await n.decrypt(e,t);this.parsedValue=gr.fromBER(r)}async makeInternalValues(e,t=Fr(!0)){if(!this.parsedValue)throw new Error('Please initialize "parsedValue" first');const n=new lo,r={...e,contentToEncrypt:this.parsedValue.toSchema().toBER(!1)};if(await n.encrypt(r,t),!n.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");this.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,this.encryptedData=n.encryptedContentInfo.encryptedContent}}fo.CLASS_NAME="PKCS8ShroudedKeyBag";const po="secretTypeId",go="secretValue",bo=[po,go];class yo extends m{constructor(e={}){super(),this.secretTypeId=i.H$(e,po,yo.defaultValues(po)),this.secretValue=i.H$(e,go,yo.defaultValues(go)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case po:return c;case go:return new r.Any;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case po:return t===c;case go:return t instanceof r.Any;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.id||"id"}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Any({name:t.value||"value"})]})]})}fromSchema(e){i.ze(e,bo);const t=r.compareSchema(e,e,yo.schema({names:{id:po,value:go}}));d.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.secretTypeId}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}yo.CLASS_NAME="SecretBag";class vo{static getItems(){return this.items||(this.items={},vo.register("1.2.840.113549.1.12.10.1.1",gr),vo.register("1.2.840.113549.1.12.10.1.2",fo),vo.register("1.2.840.113549.1.12.10.1.3",Na),vo.register("1.2.840.113549.1.12.10.1.4",ro),vo.register("1.2.840.113549.1.12.10.1.5",yo),vo.register("1.2.840.113549.1.12.10.1.6",Co)),this.items}static register(e,t){this.getItems()[e]=t}static find(e){return this.getItems()[e]||null}}const wo="bagId",So="bagValue",qo="bagAttributes",ko=[wo,So,qo];class Ao extends m{constructor(e={}){super(),this.bagId=i.H$(e,wo,Ao.defaultValues(wo)),this.bagValue=i.H$(e,So,Ao.defaultValues(So)),qo in e&&(this.bagAttributes=i.H$(e,qo,Ao.defaultValues(qo))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wo:return c;case So:return new r.Any;case qo:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wo:return t===c;case So:return t instanceof r.Any;case qo:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.bagId||wo}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Any({name:t.bagValue||So})]}),new r.Set({optional:!0,value:[new r.Repeated({name:t.bagAttributes||qo,value:W.schema()})]})]})}fromSchema(e){i.ze(e,ko);const t=r.compareSchema(e,e,Ao.schema({names:{bagId:wo,bagValue:So,bagAttributes:qo}}));d.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const n=vo.find(this.bagId);if(!n)throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);this.bagValue=new n({schema:t.result.bagValue}),qo in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,(e=>new W({schema:e}))))}toSchema(){const e=[new r.ObjectIdentifier({value:this.bagId}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new r.Set({value:Array.from(this.bagAttributes,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,(e=>e.toJSON()))),e}}Ao.CLASS_NAME="SafeBag";const No="safeBags";class Co extends m{constructor(e={}){super(),this.safeBags=i.H$(e,No,Co.defaultValues(No)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===No?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===No?0===t.length:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.safeBags||c,value:Ao.schema()})]})}fromSchema(e){i.ze(e,[No]);const t=r.compareSchema(e,e,Co.schema({names:{safeBags:No}}));d.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,(e=>new Ao({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.safeBags,(e=>e.toSchema()))})}toJSON(){return{safeBags:Array.from(this.safeBags,(e=>e.toJSON()))}}}Co.CLASS_NAME="SafeContents";const xo="otherCertFormat",Eo="otherCert",Bo=[xo,Eo];class Io extends m{constructor(e={}){super(),this.otherCertFormat=i.H$(e,xo,Io.defaultValues(xo)),this.otherCert=i.H$(e,Eo,Io.defaultValues(Eo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xo:return c;case Eo:return new r.Any;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.otherCertFormat||xo}),new r.Any({name:t.otherCert||Eo})]})}fromSchema(e){i.ze(e,Bo);const t=r.compareSchema(e,e,Io.schema());d.assertSchema(t,this.className),this.otherCertFormat=t.result.otherCertFormat.valueBlock.toString(),this.otherCert=t.result.otherCert}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof r.Any||(e.otherCert=this.otherCert.toJSON()),e}}const Vo="certificates",Oo=[Vo];class Ho extends m{constructor(e={}){super(),this.certificates=i.H$(e,Vo,Ho.defaultValues(Vo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Vo?[]:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Set({name:t.blockName||c,value:[new r.Repeated({name:t.certificates||Vo,value:new r.Choice({value:[va.schema(),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Any]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new r.Sequence]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:Hi.schema().valueBlock.value}),new r.Constructed({idBlock:{tagClass:3,tagNumber:3},value:Io.schema().valueBlock.value})]})})]})}fromSchema(e){i.ze(e,Oo);const t=r.compareSchema(e,e,Ho.schema());d.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],(e=>{const t=e.idBlock.tagNumber;if(1===e.idBlock.tagClass)return new va({schema:e});const n=new r.Sequence({value:e.valueBlock.value});switch(t){case 1:return 1===n.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?new Hi({schema:n}):new ti({schema:n});case 2:return new Hi({schema:n});case 3:return new Io({schema:n})}return e}))}toSchema(){return new r.Set({value:Array.from(this.certificates,(e=>{switch(!0){case e instanceof va:return e.toSchema();case e instanceof ti:return new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof Hi:return new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof Io:return new r.Constructed({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()}))})}toJSON(){return{certificates:Array.from(this.certificates,(e=>e.toJSON()))}}}Ho.CLASS_NAME="CertificateSet";const Do="otherRevInfoFormat",Po="otherRevInfo",To=[Do,Po];class Ro extends m{constructor(e={}){super(),this.otherRevInfoFormat=i.H$(e,Do,Ro.defaultValues(Do)),this.otherRevInfo=i.H$(e,Po,Ro.defaultValues(Po)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Do:return c;case Po:return new r.Any;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.otherRevInfoFormat||Do}),new r.Any({name:t.otherRevInfo||Po})]})}fromSchema(e){i.ze(e,To);const t=r.compareSchema(e,e,Ro.schema());d.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof r.Any||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}Ro.CLASS_NAME="OtherRevocationInfoFormat";const Lo="crls",Uo="otherRevocationInfos",$o=[Lo];class _o extends m{constructor(e={}){super(),this.crls=i.H$(e,Lo,_o.defaultValues(Lo)),this.otherRevocationInfos=i.H$(e,Uo,_o.defaultValues(Uo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Lo:case Uo:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Set({name:t.blockName||c,value:[new r.Repeated({name:t.crls||c,value:new r.Choice({value:[Ya.schema(),new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new r.ObjectIdentifier,new r.Any]})]})})]})}fromSchema(e){i.ze(e,$o);const t=r.compareSchema(e,e,_o.schema({names:{crls:Lo}}));if(d.assertSchema(t,this.className),t.result.crls)for(const e of t.result.crls)1===e.idBlock.tagClass?this.crls.push(new Ya({schema:e})):this.otherRevocationInfos.push(new Ro({schema:e}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,(e=>e.toSchema()))),e.push(...Array.from(this.otherRevocationInfos,(e=>{const t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t}))),new r.Set({value:e})}toJSON(){return{crls:Array.from(this.crls,(e=>e.toJSON())),otherRevocationInfos:Array.from(this.otherRevocationInfos,(e=>e.toJSON()))}}}_o.CLASS_NAME="RevocationInfoChoices";const jo="certs",Mo="crls",Ko=[jo,Mo];class Jo extends m{constructor(e={}){super(),this.crls=i.H$(e,Mo,Jo.defaultValues(Mo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case jo:return new Ho;case Mo:return new _o;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case jo:return 0===t.certificates.length;case Mo:return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Constructed({name:t.certs||c,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Ho.schema().valueBlock.value}),new r.Constructed({name:t.crls||c,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:_o.schema().valueBlock.value})]})}fromSchema(e){i.ze(e,Ko);const t=r.compareSchema(e,e,Jo.schema({names:{certs:jo,crls:Mo}}));d.assertSchema(t,this.className),jo in t.result&&(this.certs=new Ho({schema:new r.Set({value:t.result.certs.valueBlock.value})})),Mo in t.result&&(this.crls=new _o({schema:new r.Set({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new r.Sequence({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}Jo.CLASS_NAME="OriginatorInfo";const Fo="issuer",zo="serialNumber",Wo=[Fo,zo];class Go extends m{constructor(e={}){super(),this.issuer=i.H$(e,Fo,Go.defaultValues(Fo)),this.serialNumber=i.H$(e,zo,Go.defaultValues(zo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fo:return new S;case zo:return new r.Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[S.schema(t.issuer||{}),new r.Integer({name:t.serialNumber||c})]})}fromSchema(e){i.ze(e,Wo);const t=r.compareSchema(e,e,Go.schema({names:{issuer:{names:{blockName:Fo}},serialNumber:zo}}));d.assertSchema(t,this.className),this.issuer=new S({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new r.Sequence({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}Go.CLASS_NAME="IssuerAndSerialNumber";const Zo="variant",Qo="value",Yo=["blockName"];class Xo extends m{constructor(e={}){super(),this.variant=i.H$(e,Zo,Xo.defaultValues(Zo)),Qo in e&&(this.value=i.H$(e,Qo,Xo.defaultValues(Qo))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zo:return-1;case Qo:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zo:return-1===t;case Qo:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Choice({value:[Go.schema({names:{blockName:t.blockName||c}}),new r.Primitive({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){i.ze(e,Yo);const t=r.compareSchema(e,e,Xo.schema({names:{blockName:"blockName"}}));d.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Go({schema:t.result.blockName})):(this.variant=2,this.value=new r.OctetString({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Go))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof r.OctetString))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new r.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new r.Any}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant||!this.value||(e.value=this.value.toJSON()),e}}Xo.CLASS_NAME="RecipientIdentifier";const el="version",tl="rid",nl="keyEncryptionAlgorithm",rl="encryptedKey",sl="recipientCertificate",il=[el,tl,nl,rl];class al extends m{constructor(e={}){super(),this.version=i.H$(e,el,al.defaultValues(el)),this.rid=i.H$(e,tl,al.defaultValues(tl)),this.keyEncryptionAlgorithm=i.H$(e,nl,al.defaultValues(nl)),this.encryptedKey=i.H$(e,rl,al.defaultValues(rl)),this.recipientCertificate=i.H$(e,sl,al.defaultValues(sl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case el:return-1;case tl:return{};case nl:return new _;case rl:return new r.OctetString;case sl:return new va;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case el:return t===al.defaultValues(el);case tl:return 0===Object.keys(t).length;case nl:case rl:return t.isEqual(al.defaultValues(e));case sl:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),Xo.schema(t.rid||{}),_.schema(t.keyEncryptionAlgorithm||{}),new r.OctetString({name:t.encryptedKey||c})]})}fromSchema(e){i.ze(e,il);const t=r.compareSchema(e,e,al.schema({names:{version:el,rid:{names:{blockName:tl}},keyEncryptionAlgorithm:{names:{blockName:nl}},encryptedKey:rl}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,3===t.result.rid.idBlock.tagClass?this.rid=new r.OctetString({valueHex:t.result.rid.valueBlock.valueHex}):this.rid=new Go({schema:t.result.rid}),this.keyEncryptionAlgorithm=new _({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Go?(this.version=0,e.push(new r.Integer({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new r.Integer({value:this.version})),e.push(new r.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new r.Sequence({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}al.CLASS_NAME="KeyTransRecipientInfo";const ol="algorithm",ll="publicKey",cl=[ol,ll];class ul extends m{constructor(e={}){super(),this.algorithm=i.H$(e,ol,ul.defaultValues(ol)),this.publicKey=i.H$(e,ll,ul.defaultValues(ll)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ol:return new _;case ll:return new r.BitString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ol:case ll:return t.isEqual(ul.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.algorithm||{}),new r.BitString({name:t.publicKey||c})]})}fromSchema(e){i.ze(e,cl);const t=r.compareSchema(e,e,ul.schema({names:{algorithm:{names:{blockName:ol}},publicKey:ll}}));d.assertSchema(t,this.className),this.algorithm=new _({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new r.Sequence({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}ul.CLASS_NAME="OriginatorPublicKey";const hl="variant",dl="value",ml=["blockName"];class fl extends m{constructor(e={}){super(),this.variant=i.H$(e,hl,fl.defaultValues(hl)),dl in e&&(this.value=i.H$(e,dl,fl.defaultValues(dl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hl:return-1;case dl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case hl:return-1===t;case dl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Choice({value:[Go.schema({names:{blockName:t.blockName||c}}),new r.Primitive({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||c}),new r.Constructed({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||c,value:ul.schema().valueBlock.value})]})}fromSchema(e){i.ze(e,ml);const t=r.compareSchema(e,e,fl.schema({names:{blockName:"blockName"}}));d.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Go({schema:t.result.blockName})):0===t.result.blockName.idBlock.tagNumber?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new ul({schema:new r.Sequence({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new r.Any}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}fl.CLASS_NAME="OriginatorIdentifierOrKey";const pl="keyAttrId",gl="keyAttr",bl=[pl,gl];class yl extends m{constructor(e={}){super(),this.keyAttrId=i.H$(e,pl,yl.defaultValues(pl)),gl in e&&(this.keyAttr=i.H$(e,gl,yl.defaultValues(gl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pl:return c;case gl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pl:return"string"==typeof t&&t===c;case gl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({optional:t.optional||!0,name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.keyAttrId||c}),new r.Any({optional:!0,name:t.keyAttr||c})]})}fromSchema(e){i.ze(e,bl);const t=r.compareSchema(e,e,yl.schema({names:{keyAttrId:pl,keyAttr:gl}}));d.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),gl in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new r.ObjectIdentifier({value:this.keyAttrId})),gl in this&&e.push(this.keyAttr),new r.Sequence({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return gl in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}yl.CLASS_NAME="OtherKeyAttribute";const vl="subjectKeyIdentifier",wl="date",Sl="other",ql=[vl,wl,Sl];class kl extends m{constructor(e={}){super(),this.subjectKeyIdentifier=i.H$(e,vl,kl.defaultValues(vl)),wl in e&&(this.date=i.H$(e,wl,kl.defaultValues(wl))),Sl in e&&(this.other=i.H$(e,Sl,kl.defaultValues(Sl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vl:return new r.OctetString;case wl:return new r.GeneralizedTime;case Sl:return new yl;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vl:return t.isEqual(kl.defaultValues(vl));case wl:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case Sl:return t.keyAttrId===c&&"keyAttr"in t==0;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.OctetString({name:t.subjectKeyIdentifier||c}),new r.GeneralizedTime({optional:!0,name:t.date||c}),yl.schema(t.other||{})]})}fromSchema(e){i.ze(e,ql);const t=r.compareSchema(e,e,kl.schema({names:{subjectKeyIdentifier:vl,date:wl,other:{names:{blockName:Sl}}}}));d.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,wl in t.result&&(this.date=t.result.date),Sl in t.result&&(this.other=new yl({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new r.Sequence({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}kl.CLASS_NAME="RecipientKeyIdentifier";const Al="variant",Nl="value",Cl=["blockName"];class xl extends m{constructor(e={}){super(),this.variant=i.H$(e,Al,xl.defaultValues(Al)),this.value=i.H$(e,Nl,xl.defaultValues(Nl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Al:return-1;case Nl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Al:return-1===t;case Nl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Choice({value:[Go.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||c}}),new r.Constructed({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:0},value:kl.schema(t.rKeyId||{names:{blockName:t.blockName||c}}).valueBlock.value})]})}fromSchema(e){i.ze(e,Cl);const t=r.compareSchema(e,e,xl.schema({names:{blockName:"blockName"}}));d.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Go({schema:t.result.blockName})):(this.variant=2,this.value=new kl({schema:new r.Sequence({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new r.Any}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}xl.CLASS_NAME="KeyAgreeRecipientIdentifier";const El="rid",Bl="encryptedKey",Il=[El,Bl];class Vl extends m{constructor(e={}){super(),this.rid=i.H$(e,El,Vl.defaultValues(El)),this.encryptedKey=i.H$(e,Bl,Vl.defaultValues(Bl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case El:return new xl;case Bl:return new r.OctetString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case El:return-1===t.variant&&"value"in t==0;case Bl:return t.isEqual(Vl.defaultValues(Bl));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[xl.schema(t.rid||{}),new r.OctetString({name:t.encryptedKey||c})]})}fromSchema(e){i.ze(e,Il);const t=r.compareSchema(e,e,Vl.schema({names:{rid:{names:{blockName:El}},encryptedKey:Bl}}));d.assertSchema(t,this.className),this.rid=new xl({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new r.Sequence({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Vl.CLASS_NAME="RecipientEncryptedKey";const Ol="encryptedKeys",Hl="RecipientEncryptedKeys",Dl=[Hl];class Pl extends m{constructor(e={}){super(),this.encryptedKeys=i.H$(e,Ol,Pl.defaultValues(Ol)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ol?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Ol?0===t.length:super.defaultValues(e)}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.RecipientEncryptedKeys||c,value:Vl.schema()})]})}fromSchema(e){i.ze(e,Dl);const t=r.compareSchema(e,e,Pl.schema({names:{RecipientEncryptedKeys:Hl}}));d.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,(e=>new Vl({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.encryptedKeys,(e=>e.toSchema()))})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,(e=>e.toJSON()))}}}Pl.CLASS_NAME="RecipientEncryptedKeys";const Tl="version",Rl="originator",Ll="ukm",Ul="keyEncryptionAlgorithm",$l="recipientEncryptedKeys",_l="recipientCertificate",jl="recipientPublicKey",Ml=[Tl,Rl,Ll,Ul,$l];class Kl extends m{constructor(e={}){super(),this.version=i.H$(e,Tl,Kl.defaultValues(Tl)),this.originator=i.H$(e,Rl,Kl.defaultValues(Rl)),Ll in e&&(this.ukm=i.H$(e,Ll,Kl.defaultValues(Ll))),this.keyEncryptionAlgorithm=i.H$(e,Ul,Kl.defaultValues(Ul)),this.recipientEncryptedKeys=i.H$(e,$l,Kl.defaultValues($l)),this.recipientCertificate=i.H$(e,_l,Kl.defaultValues(_l)),this.recipientPublicKey=i.H$(e,jl,Kl.defaultValues(jl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tl:return 0;case Rl:return new fl;case Ll:return new r.OctetString;case Ul:return new _;case $l:return new Pl;case _l:return new va;case jl:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tl:return 0===t;case Rl:return-1===t.variant&&"value"in t==0;case Ll:return t.isEqual(Kl.defaultValues(Ll));case Ul:return t.algorithmId===c&&"algorithmParams"in t==0;case $l:return 0===t.encryptedKeys.length;case _l:case jl:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[fl.schema(t.originator||{})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.OctetString({name:t.ukm||c})]}),_.schema(t.keyEncryptionAlgorithm||{}),Pl.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){i.ze(e,Ml);const t=r.compareSchema(e,e,Kl.schema({names:{version:Tl,originator:{names:{blockName:Rl}},ukm:Ll,keyEncryptionAlgorithm:{names:{blockName:Ul}},recipientEncryptedKeys:{names:{blockName:$l}}}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new fl({schema:t.result.originator}),Ll in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new _({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new Pl({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new r.Integer({value:this.version})),e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new r.Sequence({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}Kl.CLASS_NAME="KeyAgreeRecipientInfo";const Jl="keyIdentifier",Fl="date",zl="other",Wl=[Jl,Fl,zl];class Gl extends m{constructor(e={}){super(),this.keyIdentifier=i.H$(e,Jl,Gl.defaultValues(Jl)),Fl in e&&(this.date=i.H$(e,Fl,Gl.defaultValues(Fl))),zl in e&&(this.other=i.H$(e,zl,Gl.defaultValues(zl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jl:return new r.OctetString;case Fl:return new r.GeneralizedTime;case zl:return new yl;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jl:return t.isEqual(Gl.defaultValues(Jl));case Fl:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case zl:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&"keyAttr"in t==0;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.OctetString({name:t.keyIdentifier||c}),new r.GeneralizedTime({optional:!0,name:t.date||c}),yl.schema(t.other||{})]})}fromSchema(e){i.ze(e,Wl);const t=r.compareSchema(e,e,Gl.schema({names:{keyIdentifier:Jl,date:Fl,other:{names:{blockName:zl}}}}));d.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,Fl in t.result&&(this.date=t.result.date),zl in t.result&&(this.other=new yl({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new r.Sequence({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}Gl.CLASS_NAME="KEKIdentifier";const Zl="version",Ql="kekid",Yl="keyEncryptionAlgorithm",Xl="encryptedKey",ec="preDefinedKEK",tc=[Zl,Ql,Yl,Xl];class nc extends m{constructor(e={}){super(),this.version=i.H$(e,Zl,nc.defaultValues(Zl)),this.kekid=i.H$(e,Ql,nc.defaultValues(Ql)),this.keyEncryptionAlgorithm=i.H$(e,Yl,nc.defaultValues(Yl)),this.encryptedKey=i.H$(e,Xl,nc.defaultValues(Xl)),this.preDefinedKEK=i.H$(e,ec,nc.defaultValues(ec)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zl:return 0;case Ql:return new Gl;case Yl:return new _;case Xl:return new r.OctetString;case ec:return l;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===nc.defaultValues(Zl);case Ql:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&"date"in t==0&&"other"in t==0;case Yl:return t.algorithmId===c&&"algorithmParams"in t==0;case Xl:return t.isEqual(nc.defaultValues(Xl));case ec:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),Gl.schema(t.kekid||{}),_.schema(t.keyEncryptionAlgorithm||{}),new r.OctetString({name:t.encryptedKey||c})]})}fromSchema(e){i.ze(e,tc);const t=r.compareSchema(e,e,nc.schema({names:{version:Zl,kekid:{names:{blockName:Ql}},keyEncryptionAlgorithm:{names:{blockName:Yl}},encryptedKey:Xl}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new Gl({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new _({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new r.Sequence({value:[new r.Integer({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}nc.CLASS_NAME="KEKRecipientInfo";const rc="version",sc="keyDerivationAlgorithm",ic="keyEncryptionAlgorithm",ac="encryptedKey",oc="password",lc=[rc,sc,ic,ac];class cc extends m{constructor(e={}){super(),this.version=i.H$(e,rc,cc.defaultValues(rc)),sc in e&&(this.keyDerivationAlgorithm=i.H$(e,sc,cc.defaultValues(sc))),this.keyEncryptionAlgorithm=i.H$(e,ic,cc.defaultValues(ic)),this.encryptedKey=i.H$(e,ac,cc.defaultValues(ac)),this.password=i.H$(e,oc,cc.defaultValues(oc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rc:return-1;case sc:case ic:return new _;case ac:return new r.OctetString;case oc:return l;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case rc:return-1===t;case sc:case ic:return t.algorithmId===c&&"algorithmParams"in t==0;case ac:return t.isEqual(cc.defaultValues(ac));case oc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),new r.Constructed({name:t.keyDerivationAlgorithm||c,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:_.schema().valueBlock.value}),_.schema(t.keyEncryptionAlgorithm||{}),new r.OctetString({name:t.encryptedKey||c})]})}fromSchema(e){i.ze(e,lc);const t=r.compareSchema(e,e,cc.schema({names:{version:rc,keyDerivationAlgorithm:sc,keyEncryptionAlgorithm:{names:{blockName:ic}},encryptedKey:ac}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,sc in t.result&&(this.keyDerivationAlgorithm=new _({schema:new r.Sequence({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new _({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new r.Integer({value:this.version})),this.keyDerivationAlgorithm&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new r.Sequence({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}cc.CLASS_NAME="PasswordRecipientInfo";const uc="oriType",hc="oriValue",dc=[uc,hc];class mc extends m{constructor(e={}){super(),this.oriType=i.H$(e,uc,mc.defaultValues(uc)),this.oriValue=i.H$(e,hc,mc.defaultValues(hc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uc:return c;case hc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case uc:return t===c;case hc:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.oriType||c}),new r.Any({name:t.oriValue||c})]})}fromSchema(e){i.ze(e,dc);const t=r.compareSchema(e,e,mc.schema({names:{oriType:uc,oriValue:hc}}));d.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return mc.compareWithDefault(hc,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}mc.CLASS_NAME="OtherRecipientInfo";const fc="variant",pc="value",gc=["blockName"];class bc extends m{constructor(e={}){super(),this.variant=i.H$(e,fc,bc.defaultValues(fc)),pc in e&&(this.value=i.H$(e,pc,bc.defaultValues(pc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fc:return-1;case pc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case fc:return t===bc.defaultValues(e);case pc:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Choice({value:[al.schema({names:{blockName:t.blockName||c}}),new r.Constructed({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:1},value:Kl.schema().valueBlock.value}),new r.Constructed({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:2},value:nc.schema().valueBlock.value}),new r.Constructed({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:3},value:cc.schema().valueBlock.value}),new r.Constructed({name:t.blockName||c,idBlock:{tagClass:3,tagNumber:4},value:mc.schema().valueBlock.value})]})}fromSchema(e){i.ze(e,gc);const t=r.compareSchema(e,e,bc.schema({names:{blockName:"blockName"}}));if(d.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass)this.variant=1,this.value=new al({schema:t.result.blockName});else{const e=new r.Sequence({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new Kl({schema:e});break;case 2:this.variant=3,this.value=new nc({schema:e});break;case 3:this.variant=4,this.value=new cc({schema:e});break;case 4:this.variant=5,this.value=new mc({schema:e});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){h.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new r.Any}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}bc.CLASS_NAME="RecipientInfo";const yc="hashAlgorithm",vc="maskGenAlgorithm",wc="pSourceAlgorithm",Sc=[yc,vc,wc];class qc extends m{constructor(e={}){super(),this.hashAlgorithm=i.H$(e,yc,qc.defaultValues(yc)),this.maskGenAlgorithm=i.H$(e,vc,qc.defaultValues(vc)),this.pSourceAlgorithm=i.H$(e,wc,qc.defaultValues(wc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case yc:return new _({algorithmId:"1.3.14.3.2.26",algorithmParams:new r.Null});case vc:return new _({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new _({algorithmId:"1.3.14.3.2.26",algorithmParams:new r.Null}).toSchema()});case wc:return new _({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new r.OctetString({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[_.schema(t.hashAlgorithm||{})]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[_.schema(t.maskGenAlgorithm||{})]}),new r.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[_.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){i.ze(e,Sc);const t=r.compareSchema(e,e,qc.schema({names:{hashAlgorithm:{names:{blockName:yc}},maskGenAlgorithm:{names:{blockName:vc}},pSourceAlgorithm:{names:{blockName:wc}}}}));d.assertSchema(t,this.className),yc in t.result&&(this.hashAlgorithm=new _({schema:t.result.hashAlgorithm})),vc in t.result&&(this.maskGenAlgorithm=new _({schema:t.result.maskGenAlgorithm})),wc in t.result&&(this.pSourceAlgorithm=new _({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(qc.defaultValues(yc))||e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(qc.defaultValues(vc))||e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(qc.defaultValues(wc))||e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new r.Sequence({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(qc.defaultValues(yc))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(qc.defaultValues(vc))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(qc.defaultValues(wc))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}qc.CLASS_NAME="RSAESOAEPParams";const kc="keyInfo",Ac="entityUInfo",Nc="suppPubInfo",Cc=[kc,Ac,Nc];class xc extends m{constructor(e={}){super(),this.keyInfo=i.H$(e,kc,xc.defaultValues(kc)),Ac in e&&(this.entityUInfo=i.H$(e,Ac,xc.defaultValues(Ac))),this.suppPubInfo=i.H$(e,Nc,xc.defaultValues(Nc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case kc:return new _;case Ac:case Nc:return new r.OctetString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case kc:case Ac:case Nc:return t.isEqual(xc.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.keyInfo||{}),new r.Constructed({name:t.entityUInfo||c,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new r.OctetString]}),new r.Constructed({name:t.suppPubInfo||c,idBlock:{tagClass:3,tagNumber:2},value:[new r.OctetString]})]})}fromSchema(e){i.ze(e,Cc);const t=r.compareSchema(e,e,xc.schema({names:{keyInfo:{names:{blockName:kc}},entityUInfo:Ac,suppPubInfo:Nc}}));d.assertSchema(t,this.className),this.keyInfo=new _({schema:t.result.keyInfo}),Ac in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new r.Sequence({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}xc.CLASS_NAME="ECCCMSSharedInfo";const Ec="version",Bc="originatorInfo",Ic="recipientInfos",Vc="encryptedContentInfo",Oc="unprotectedAttrs",Hc=[Ec,Bc,Ic,Vc,Oc],Dc={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},Pc={"P-256":256,"P-384":384,"P-521":528};class Tc extends m{constructor(e={}){super(),this.version=i.H$(e,Ec,Tc.defaultValues(Ec)),Bc in e&&(this.originatorInfo=i.H$(e,Bc,Tc.defaultValues(Bc))),this.recipientInfos=i.H$(e,Ic,Tc.defaultValues(Ic)),this.encryptedContentInfo=i.H$(e,Vc,Tc.defaultValues(Vc)),Oc in e&&(this.unprotectedAttrs=i.H$(e,Oc,Tc.defaultValues(Oc))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ec:return 0;case Bc:return new Jo;case Ic:return[];case Vc:return new Sr;case Oc:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ec:return t===Tc.defaultValues(e);case Bc:return 0===t.certs.certificates.length&&0===t.crls.crls.length;case Ic:case Oc:return 0===t.length;case Vc:return Sr.compareWithDefault("contentType",t.contentType)&&Sr.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Sr.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||c}),new r.Constructed({name:t.originatorInfo||c,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Jo.schema().valueBlock.value}),new r.Set({value:[new r.Repeated({name:t.recipientInfos||c,value:bc.schema()})]}),Sr.schema(t.encryptedContentInfo||{}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.Repeated({name:t.unprotectedAttrs||c,value:W.schema()})]})]})}fromSchema(e){i.ze(e,Hc);const t=r.compareSchema(e,e,Tc.schema({names:{version:Ec,originatorInfo:Bc,recipientInfos:Ic,encryptedContentInfo:{names:{blockName:Vc}},unprotectedAttrs:Oc}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Bc in t.result&&(this.originatorInfo=new Jo({schema:new r.Sequence({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,(e=>new bc({schema:e}))),this.encryptedContentInfo=new Sr({schema:t.result.encryptedContentInfo}),Oc in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,(e=>new W({schema:e}))))}toSchema(){const e=[];return e.push(new r.Integer({value:this.version})),this.originatorInfo&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new r.Set({value:Array.from(this.recipientInfos,(e=>e.toSchema()))})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,(e=>e.toJSON())),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,(e=>e.toJSON()))),e}addRecipientByCertificate(e,t,n,s=Fr(!0)){const i=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},Dc,t||{});if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))n=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);n=2}switch(n){case 1:{let t,n;if(!0===i.useOAEP){t=s.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const e=s.getOIDByAlgorithm({name:i.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),a=new _({algorithmId:e,algorithmParams:new r.Null});n=new qc({hashAlgorithm:a,maskGenAlgorithm:new _({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.toSchema()})}).toSchema()}else{if(t=s.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),t===c)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");n=new r.Null}const a=new al({version:0,rid:new Go({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new _({algorithmId:t,algorithmParams:n}),recipientCertificate:e});this.recipientInfos.push(new bc({variant:1,value:a}))}break;case 2:{const t=new xl({variant:1,value:new Go({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(t,i,{recipientCertificate:e},s)}break;default:throw new Error(`Unknown "variant" value: ${n}`)}return!0}addRecipientByPreDefinedData(e,t={},n,s=Fr(!0)){if(u.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const e=new ArrayBuffer(16),n=new Uint8Array(e);s.getRandomValues(n),t.keyIdentifier=e}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),void 0===t.iterationCount&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new r.Null),n){case 1:{const n=s.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),i=new nc({version:4,kekid:new Gl({keyIdentifier:new r.OctetString({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new _({algorithmId:n,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new bc({variant:3,value:i}))}break;case 2:{const n=s.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),i=new ArrayBuffer(64),a=new Uint8Array(i);s.getRandomValues(a);const o=s.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),l=new Hr({salt:new r.OctetString({valueHex:i}),iterationCount:t.iterationCount,prf:new _({algorithmId:o,algorithmParams:new r.Null})}),c=s.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),u=new cc({version:0,keyDerivationAlgorithm:new _({algorithmId:n,algorithmParams:l.toSchema()}),keyEncryptionAlgorithm:new _({algorithmId:c,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new bc({variant:4,value:u}))}break;default:throw new Error(`Unknown value for "variant": ${n}`)}}addRecipientByKeyIdentifier(e,t,n,s=Fr(!0)){const i=Object.assign({},Dc,n||{}),a=new xl({variant:2,value:new kl({subjectKeyIdentifier:new r.OctetString({valueHex:t})})});this._addKeyAgreeRecipientInfo(a,i,{recipientPublicKey:e},s)}_addKeyAgreeRecipientInfo(e,t,n,s=Fr(!0)){const i=new Vl({rid:e}),a=s.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),o=new _({algorithmId:a}),l=s.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),c=new ArrayBuffer(64),u=new Uint8Array(c);s.getRandomValues(u);const h={version:3,ukm:new r.OctetString({valueHex:c}),keyEncryptionAlgorithm:new _({algorithmId:l,algorithmParams:o.toSchema()}),recipientEncryptedKeys:new Pl({encryptedKeys:[i]})},d=new Kl(Object.assign(h,n));this.recipientInfos.push(new bc({variant:2,value:d}))}async encrypt(e,t,n=Fr(!0)){const s=new ArrayBuffer(16),i=new Uint8Array(s);n.getRandomValues(i);const a=new Uint8Array(t),o=n.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),l=await n.generateKey(e,!0,["encrypt"]),c=await n.encrypt({name:e.name,iv:i},l,a),u=await n.exportKey("raw",l);this.version=2,this.encryptedContentInfo=new Sr({disableSplit:this.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new _({algorithmId:o,algorithmParams:new r.OctetString({valueHex:s})}),encryptedContent:new r.OctetString({valueHex:c})});const h=async e=>{const t=this.recipientInfos[e].value;let s,i;if(t.recipientPublicKey)s=t.recipientPublicKey.algorithm.namedCurve,i=t.recipientPublicKey;else{if(!t.recipientCertificate)throw new Error("Unsupported RecipientInfo");{const a=t.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(a.constructor.blockName()!==r.ObjectIdentifier.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${e}`);switch(a.valueBlock.toString()){case"1.2.840.10045.3.1.7":s="P-256";break;case"1.3.132.0.34":s="P-384";break;case"1.3.132.0.35":s="P-521";break;default:throw new Error(`Incorrect curve OID for index ${e}`)}i=await t.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:s},usages:[]}},n)}}const a=Pc[s],o=await n.generateKey({name:"ECDH",namedCurve:s},!0,["deriveBits"]),c=await n.exportKey("spki",o.publicKey),u=await n.deriveBits({name:"ECDH",public:i},o.privateKey,a),h=new _({schema:t.keyEncryptionAlgorithm.algorithmParams}),d=n.getAlgorithmByOID(h.algorithmId,!0,"aesKWAlgorithm");let m=d.length;const f=new ArrayBuffer(4),p=new Uint8Array(f);for(let e=3;e>=0;e--)p[e]=m,m>>=8;const g=new xc({keyInfo:new _({algorithmId:h.algorithmId}),entityUInfo:t.ukm,suppPubInfo:new r.OctetString({valueHex:f})}).toSchema().toBER(!1),b=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),y=await ts(b.kdf,u,d.length,g,n),v=await n.importKey("raw",y,{name:"AES-KW"},!0,["wrapKey"]),w=await n.wrapKey("raw",l,v,{name:"AES-KW"}),S=new fl;return S.variant=3,S.value=ul.fromBER(c),t.originator=S,t.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new r.OctetString({valueHex:w}),{ecdhPrivateKey:o.privateKey}},d=async e=>{const t=this.recipientInfos[e].value,s=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===s.name){const e=t.keyEncryptionAlgorithm.algorithmParams,r=new qc({schema:e});if(s.hash=n.getAlgorithmByOID(r.hashAlgorithm.algorithmId),"name"in s.hash==0)throw new Error(`Incorrect OID for hash algorithm: ${r.hashAlgorithm.algorithmId}`)}try{const e=await t.recipientCertificate.getPublicKey({algorithm:{algorithm:s,usages:["encrypt","wrapKey"]}},n),i=await n.encrypt(e.algorithm,e,u);t.encryptedKey=new r.OctetString({valueHex:i})}catch{}},m=async e=>{const t=this.recipientInfos[e].value,s=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),i=await n.importKey("raw",new Uint8Array(t.preDefinedKEK),s,!0,["wrapKey"]),a=await n.wrapKey("raw",l,i,s);t.encryptedKey=new r.OctetString({valueHex:a})},f=async e=>{const t=this.recipientInfos[e].value;let s;if(!t.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!t.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{s=new Hr({schema:t.keyDerivationAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const i=new Uint8Array(t.password),a=await n.importKey("raw",i,"PBKDF2",!1,["deriveKey"]),o=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let c="SHA-1";s.prf&&(c=n.getAlgorithmByOID(s.prf.algorithmId,!0,"prfAlgorithm").hash.name);const u=new Uint8Array(s.salt.valueBlock.valueHex),h=s.iterationCount,d=await n.deriveKey({name:"PBKDF2",hash:{name:c},salt:u,iterations:h},a,o,!0,["wrapKey"]),m=await n.wrapKey("raw",l,d,o);t.encryptedKey=new r.OctetString({valueHex:m})},p=[];for(let e=0;e<this.recipientInfos.length;e++)switch(this.recipientInfos[e].variant){case 1:p.push(await d(e));break;case 2:p.push(await h(e));break;case 3:p.push(await m(e));break;case 4:p.push(await f(e));break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}return p}async decrypt(e,t,n=Fr(!0)){const i=t||{};if(e+1>this.recipientInfos.length)throw new Error('Maximum value for "index" is: '+(this.recipientInfos.length-1));const a=async e=>{const t=this.recipientInfos[e].value;let a,o,l;const c=t.originator;if(i.recipientCertificate){const t=i.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t.constructor.blockName()!==r.ObjectIdentifier.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${e}`);a=t.valueBlock.toString()}else{if(!c.value.algorithm.algorithmParams)throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');{const t=c.value.algorithm.algorithmParams;if(t.constructor.blockName()!==r.ObjectIdentifier.blockName())throw new Error(`Incorrect originator for index ${e}`);a=t.valueBlock.toString()}}if(!i.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(a){case"1.2.840.10045.3.1.7":o="P-256",l=256;break;case"1.3.132.0.34":o="P-384",l=384;break;case"1.3.132.0.35":o="P-521",l=528;break;default:throw new Error(`Incorrect curve OID for index ${e}`)}let u,h=n;s.vJ.isBufferSource(i.recipientPrivateKey)?u=await n.importKey("pkcs8",i.recipientPrivateKey,{name:"ECDH",namedCurve:o},!0,["deriveBits"]):(u=i.recipientPrivateKey,"crypto"in i&&i.crypto&&(h=i.crypto.subtle)),"algorithmParams"in c.value.algorithm==0&&(c.value.algorithm.algorithmParams=new r.ObjectIdentifier({value:a}));const d=c.value.toSchema().toBER(!1),m=await n.importKey("spki",d,{name:"ECDH",namedCurve:o},!0,[]),f=await h.deriveBits({name:"ECDH",public:m},u,l);async function p(e){e=e||!1;const s=new _({schema:t.keyEncryptionAlgorithm.algorithmParams}),i=n.getAlgorithmByOID(s.algorithmId,!0,"kwAlgorithm");let a=i.length;const o=new ArrayBuffer(4),l=new Uint8Array(o);for(let e=3;e>=0;e--)l[e]=a,a>>=8;const c={algorithmId:s.algorithmId};e&&(c.algorithmParams=new r.Null);const u=new xc({keyInfo:new _(c),entityUInfo:t.ukm,suppPubInfo:new r.OctetString({valueHex:o})}).toSchema().toBER(!1),h=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!h.name)throw new Error(`Incorrect OID for key encryption algorithm: ${t.keyEncryptionAlgorithm.algorithmId}`);return ts(h.kdf,f,i.length,u,n)}const g=await p(),b=async e=>n.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"]),y=await b(g),v=async e=>{const r=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,s=n.getAlgorithmByOID(r,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",t.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,e,{name:"AES-KW"},s,!0,["decrypt"])};try{return await v(y)}catch{const e=await p(!0);return v(await b(e))}},o=async e=>{const t=this.recipientInfos[e].value;if(!i.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const r=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===r.name){const e=t.keyEncryptionAlgorithm.algorithmParams,s=new qc({schema:e});if(r.hash=n.getAlgorithmByOID(s.hashAlgorithm.algorithmId),"name"in r.hash==0)throw new Error(`Incorrect OID for hash algorithm: ${s.hashAlgorithm.algorithmId}`)}let a,o=n;s.vJ.isBufferSource(i.recipientPrivateKey)?a=await n.importKey("pkcs8",i.recipientPrivateKey,r,!0,["decrypt"]):(a=i.recipientPrivateKey,"crypto"in i&&i.crypto&&(o=i.crypto.subtle));const l=await o.decrypt(a.algorithm,a,t.encryptedKey.valueBlock.valueHexView),c=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,u=n.getAlgorithmByOID(c,!0,"contentEncryptionAlgorithm");if("name"in u==0)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${c}`);return n.importKey("raw",l,u,!0,["decrypt"])},l=async e=>{const t=this.recipientInfos[e].value;if(!i.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const r=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),s=await n.importKey("raw",i.preDefinedData,r,!0,["unwrapKey"]),a=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,o=n.getAlgorithmByOID(a,!0,"contentEncryptionAlgorithm");if(!o.name)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${a}`);return n.unwrapKey("raw",t.encryptedKey.valueBlock.valueHexView,s,r,o,!0,["decrypt"])},c=async e=>{const t=this.recipientInfos[e].value;let r;if(!i.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!t.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!t.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new Hr({schema:t.keyDerivationAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const s=await n.importKey("raw",i.preDefinedData,"PBKDF2",!1,["deriveKey"]),a=n.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),o=r.prf?n.getAlgorithmByOID(r.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",l=new Uint8Array(r.salt.valueBlock.valueHex),c=r.iterationCount,u=await n.deriveKey({name:"PBKDF2",hash:{name:o},salt:l,iterations:c},s,a,!0,["unwrapKey"]),h=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,d=n.getAlgorithmByOID(h,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",t.encryptedKey.valueBlock.valueHexView,u,a,d,!0,["decrypt"])};let u;switch(this.recipientInfos[e].variant){case 1:u=await o(e);break;case 2:u=await a(e);break;case 3:u=await l(e);break;case 4:u=await c(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const h=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,d=n.getAlgorithmByOID(h,!0,"contentEncryptionAlgorithm"),m=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,f=new Uint8Array(m);if(!this.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const p=this.encryptedContentInfo.getEncryptedContent();return n.decrypt({name:d.name,iv:f},u,p)}}Tc.CLASS_NAME="EnvelopedData";const Rc="safeContents",Lc="parsedValue",Uc="contentInfos";class $c extends m{constructor(e={}){super(),this.safeContents=i.H$(e,Rc,$c.defaultValues(Rc)),Lc in e&&(this.parsedValue=i.H$(e,Lc,$c.defaultValues(Lc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Rc:return[];case Lc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Rc:return 0===t.length;case Lc:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Repeated({name:t.contentInfos||c,value:Ri.schema()})]})}fromSchema(e){i.ze(e,[Uc]);const t=r.compareSchema(e,e,$c.schema({names:{contentInfos:Uc}}));d.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,(e=>new Ri({schema:e})))}toSchema(){return new r.Sequence({value:Array.from(this.safeContents,(e=>e.toSchema()))})}toJSON(){return{safeContents:Array.from(this.safeContents,(e=>e.toJSON()))}}async parseInternalValues(e,t=Fr(!0)){if(h.assert(e,Rc),u.assert(e.safeContents,Rc,"Array"),e.safeContents.length!==this.safeContents.length)throw new u('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');this.parsedValue={safeContents:[]};for(const[n,s]of this.safeContents.entries()){const i=e.safeContents[n],a=`parameters.safeContents[${n}]`;switch(s.contentType){case De:{u.assert(s.content,"this.safeContents[j].content",r.OctetString);const e=s.content.getValue();this.parsedValue.safeContents.push({privacyMode:0,value:Co.fromBER(e)})}break;case Te:{const e=new Tc({schema:s.content});h.assert(a,i,"recipientCertificate","recipientKey");const n=i,r=n.recipientCertificate,o=n.recipientKey,l=await e.decrypt(0,{recipientCertificate:r,recipientPrivateKey:o},t);this.parsedValue.safeContents.push({privacyMode:2,value:Co.fromBER(l)})}break;case Re:{const e=new lo({schema:s.content});h.assert(a,i,"password");const n=i.password,r=await e.decrypt({password:n},t);this.parsedValue.safeContents.push({privacyMode:1,value:Co.fromBER(r)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${s.contentType}`)}}}async makeInternalValues(e,t=Fr(!0)){if(!this.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(u.assert(this.parsedValue,"this.parsedValue","object"),u.assert(this.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),u.assert(e,"parameters","object"),h.assert(e,"safeContents"),u.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==this.parsedValue.safeContents.length)throw new u('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');this.safeContents=[];for(const[n,s]of this.parsedValue.safeContents.entries())switch(h.assert("content",s,"privacyMode","value"),u.assert(s.value,"content.value",Co),s.privacyMode){case 0:{const e=s.value.toSchema().toBER(!1);this.safeContents.push(new Ri({contentType:"1.2.840.113549.1.7.1",content:new r.OctetString({valueHex:e})}))}break;case 1:{const r=new lo,i=e.safeContents[n];i.contentToEncrypt=s.value.toSchema().toBER(!1),await r.encrypt(i,t),this.safeContents.push(new Ri({contentType:"1.2.840.113549.1.7.6",content:r.toSchema()}))}break;case 2:{const r=new Tc,i=s.value.toSchema().toBER(!1),a=e.safeContents[n];switch(h.assert(`parameters.safeContents[${n}]`,a,"encryptingCertificate","encryptionAlgorithm"),!0){case"aes-cbc"===a.encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===a.encryptionAlgorithm.name.toLowerCase():break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${a.encryptionAlgorithm}`)}switch(!0){case 128===a.encryptionAlgorithm.length:case 192===a.encryptionAlgorithm.length:case 256===a.encryptionAlgorithm.length:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${a.encryptionAlgorithm.length}`)}const o=a.encryptionAlgorithm;r.addRecipientByCertificate(a.encryptingCertificate,{},void 0,t),await r.encrypt(o,i,t),this.safeContents.push(new Ri({contentType:"1.2.840.113549.1.7.3",content:r.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${s.privacyMode}`)}return this}}$c.CLASS_NAME="AuthenticatedSafe";const _c="hashAlgorithm",jc="issuerNameHash",Mc="issuerKeyHash",Kc="serialNumber",Jc=[_c,jc,Mc,Kc];class Fc extends m{constructor(e={}){super(),this.hashAlgorithm=i.H$(e,_c,Fc.defaultValues(_c)),this.issuerNameHash=i.H$(e,jc,Fc.defaultValues(jc)),this.issuerKeyHash=i.H$(e,Mc,Fc.defaultValues(Mc)),this.serialNumber=i.H$(e,Kc,Fc.defaultValues(Kc)),e.schema&&this.fromSchema(e.schema)}static async create(e,t,n=Fr(!0)){const r=new Fc;return await r.createForCertificate(e,t,n),r}static defaultValues(e){switch(e){case _c:return new _;case jc:case Mc:return new r.OctetString;case Kc:return new r.Integer;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case _c:return t.algorithmId===c&&"algorithmParams"in t==0;case jc:case Mc:case Kc:return t.isEqual(Fc.defaultValues(Kc));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||c}}),new r.OctetString({name:t.issuerNameHash||c}),new r.OctetString({name:t.issuerKeyHash||c}),new r.Integer({name:t.serialNumber||c})]})}fromSchema(e){i.ze(e,Jc);const t=r.compareSchema(e,e,Fc.schema({names:{hashAlgorithm:_c,issuerNameHash:jc,issuerKeyHash:Mc,serialNumber:Kc}}));d.assertSchema(t,this.className),this.hashAlgorithm=new _({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new r.Sequence({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return this.hashAlgorithm.algorithmId===e.hashAlgorithm.algorithmId&&!!s.vJ.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)&&!!s.vJ.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)&&!!this.serialNumber.isEqual(e.serialNumber)}async createForCertificate(e,t,n=Fr(!0)){h.assert(t,_c,"issuerCertificate");const s=n.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");this.hashAlgorithm=new _({algorithmId:s,algorithmParams:new r.Null});const i=t.issuerCertificate;this.serialNumber=e.serialNumber;const a=await n.digest({name:t.hashAlgorithm},i.subject.toSchema().toBER(!1));this.issuerNameHash=new r.OctetString({valueHex:a});const o=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,l=await n.digest({name:t.hashAlgorithm},o);this.issuerKeyHash=new r.OctetString({valueHex:l})}}Fc.CLASS_NAME="CertID";const zc="certID",Wc="certStatus",Gc="thisUpdate",Zc="nextUpdate",Qc="singleExtensions",Yc=[zc,Wc,Gc,Zc,Qc];class Xc extends m{constructor(e={}){super(),this.certID=i.H$(e,zc,Xc.defaultValues(zc)),this.certStatus=i.H$(e,Wc,Xc.defaultValues(Wc)),this.thisUpdate=i.H$(e,Gc,Xc.defaultValues(Gc)),Zc in e&&(this.nextUpdate=i.H$(e,Zc,Xc.defaultValues(Zc))),Qc in e&&(this.singleExtensions=i.H$(e,Qc,Xc.defaultValues(Qc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zc:return new Fc;case Wc:return{};case Gc:case Zc:return new Date(0,0,0);case Qc:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case zc:return Fc.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&Fc.compareWithDefault("issuerNameHash",t.issuerNameHash)&&Fc.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&Fc.compareWithDefault("serialNumber",t.serialNumber);case Wc:return 0===Object.keys(t).length;case Gc:case Zc:return t===Xc.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[Fc.schema(t.certID||{}),new r.Choice({value:[new r.Primitive({name:t.certStatus||c,idBlock:{tagClass:3,tagNumber:0}}),new r.Constructed({name:t.certStatus||c,idBlock:{tagClass:3,tagNumber:1},value:[new r.GeneralizedTime,new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Enumerated]})]}),new r.Primitive({name:t.certStatus||c,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new r.GeneralizedTime({name:t.thisUpdate||c}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.GeneralizedTime({name:t.nextUpdate||c})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Hs.schema(t.singleExtensions||{})]})]})}fromSchema(e){i.ze(e,Yc);const t=r.compareSchema(e,e,Xc.schema({names:{certID:{names:{blockName:zc}},certStatus:Wc,thisUpdate:Gc,nextUpdate:Zc,singleExtensions:{names:{blockName:Qc}}}}));d.assertSchema(t,this.className),this.certID=new Fc({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),Zc in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),Qc in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,(e=>new Is({schema:e}))))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new r.GeneralizedTime({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.GeneralizedTime({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new r.Sequence({value:Array.from(this.singleExtensions,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,(e=>e.toJSON()))),e}}Xc.CLASS_NAME="SingleResponse";const eu="tbs",tu="version",nu="responderID",ru="producedAt",su="responses",iu="responseExtensions",au="ResponseData",ou=`${au}.${tu}`,lu=`${au}.${nu}`,cu=`${au}.${ru}`,uu=`${au}.${su}`,hu=`${au}.${iu}`,du=[au,ou,lu,cu,uu,hu];class mu extends m{constructor(e={}){super(),this.tbsView=new Uint8Array(i.H$(e,eu,mu.defaultValues(eu))),tu in e&&(this.version=i.H$(e,tu,mu.defaultValues(tu))),this.responderID=i.H$(e,nu,mu.defaultValues(nu)),this.producedAt=i.H$(e,ru,mu.defaultValues(ru)),this.responses=i.H$(e,su,mu.defaultValues(su)),iu in e&&(this.responseExtensions=i.H$(e,iu,mu.defaultValues(iu))),e.schema&&this.fromSchema(e.schema)}get tbs(){return s.vJ.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case tu:return 0;case eu:return l;case nu:return{};case ru:return new Date(0,0,0);case su:case iu:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case eu:return 0===t.byteLength;case nu:return 0===Object.keys(t).length;case ru:return t===mu.defaultValues(e);case su:case iu:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||au,value:[new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Integer({name:t.version||ou})]}),new r.Choice({value:[new r.Constructed({name:t.responderID||lu,idBlock:{tagClass:3,tagNumber:1},value:[S.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new r.Constructed({name:t.responderID||lu,idBlock:{tagClass:3,tagNumber:2},value:[new r.OctetString({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new r.GeneralizedTime({name:t.producedAt||cu}),new r.Sequence({value:[new r.Repeated({name:uu,value:Xc.schema(t.response||{})})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Hs.schema(t.extensions||{names:{blockName:hu}})]})]})}fromSchema(e){i.ze(e,du);const t=r.compareSchema(e,e,mu.schema());d.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,ou in t.result&&(this.version=t.result[ou].valueBlock.valueDec),1===t.result[lu].idBlock.tagNumber?this.responderID=new S({schema:t.result[lu].valueBlock.value[0]}):this.responderID=t.result[lu].valueBlock.value[0],this.producedAt=t.result[cu].toDate(),this.responses=Array.from(t.result[uu],(e=>new Xc({schema:e}))),hu in t.result&&(this.responseExtensions=Array.from(t.result[hu].valueBlock.value,(e=>new Is({schema:e}))))}toSchema(e=!1){let t;if(!1===e){if(!this.tbsView.byteLength)return mu.schema();const e=r.fromBER(this.tbsView);d.assert(e,"TBS Response Data"),t=e.result}else{const e=[];tu in this&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Integer({value:this.version})]})),this.responderID instanceof S?e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),e.push(new r.GeneralizedTime({valueDate:this.producedAt})),e.push(new r.Sequence({value:Array.from(this.responses,(e=>e.toSchema()))})),this.responseExtensions&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new r.Sequence({value:Array.from(this.responseExtensions,(e=>e.toSchema()))})]})),t=new r.Sequence({value:e})}return t}toJSON(){const e={};return tu in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,(e=>e.toJSON()))),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,(e=>e.toJSON()))),e}}mu.CLASS_NAME="ResponseData";const fu="trustedCerts",pu="certs",gu="crls",bu="ocsps",yu="checkDate",vu="findOrigin",wu="findIssuer";var Su;!function(e){e[e.unknown=-1]="unknown",e[e.success=0]="success",e[e.noRevocation=11]="noRevocation",e[e.noPath=60]="noPath",e[e.noValidPath=97]="noValidPath"}(Su||(Su={}));class qu extends Error{constructor(e,t){super(t),this.name=qu.NAME,this.code=e,this.message=t}}qu.NAME="ChainValidationError";class ku{constructor(e={}){this.trustedCerts=i.H$(e,fu,this.defaultValues(fu)),this.certs=i.H$(e,pu,this.defaultValues(pu)),this.crls=i.H$(e,gu,this.defaultValues(gu)),this.ocsps=i.H$(e,bu,this.defaultValues(bu)),this.checkDate=i.H$(e,yu,this.defaultValues(yu)),this.findOrigin=i.H$(e,vu,this.defaultValues(vu)),this.findIssuer=i.H$(e,wu,this.defaultValues(wu))}static defaultFindOrigin(e,t){0===e.tbsView.byteLength&&(e.tbsView=new Uint8Array(e.encodeTBS().toBER()));for(const n of t.certs)if(0===n.tbsView.byteLength&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),s.vJ.isEqual(e.tbsView,n.tbsView))return"Intermediate Certificates";for(const n of t.trustedCerts)if(0===n.tbsView.byteLength&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),s.vJ.isEqual(e.tbsView,n.tbsView))return"Trusted Certificates";return"Unknown"}async defaultFindIssuer(e,t,n=Fr(!0)){const r=[];let i=null,a=null,o=null;if(e.subject.isEqual(e.issuer))try{if(await e.verify(void 0,n))return[e]}catch(e){}if(e.extensions)for(const t of e.extensions)if(t.extnID===qe&&t.parsedValue instanceof nt){t.parsedValue.keyIdentifier?i=t.parsedValue.keyIdentifier:(t.parsedValue.authorityCertIssuer&&(a=t.parsedValue.authorityCertIssuer),t.parsedValue.authorityCertSerialNumber&&(o=t.parsedValue.authorityCertSerialNumber));break}function l(t){if(null!==i&&t.extensions){let e=!1;for(const n of t.extensions)if(n.extnID===re&&n.parsedValue){e=!0,s.vJ.isEqual(n.parsedValue.valueBlock.valueHex,i.valueBlock.valueHexView)&&r.push(t);break}if(e)return}let n=!1;null!==o&&(n=t.serialNumber.isEqual(o)),null!==a?t.subject.isEqual(a)&&n&&r.push(t):e.issuer.isEqual(t.subject)&&r.push(t)}for(const e of t.trustedCerts)l(e);for(const e of t.certs)l(e);for(let t=0;t<r.length;t++)try{!1===await e.verify(r[t],n)&&r.splice(t,1)}catch(e){r.splice(t,1)}return r}defaultValues(e){switch(e){case fu:case pu:case gu:case bu:return[];case yu:return new Date;case vu:return ku.defaultFindOrigin;case wu:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${e}`)}}async sort(e=!1,t=Fr(!0)){const n=[],r=async(e,t)=>{const n=[];function i(e){let t=!0;for(let n=0;n<e.length;n++){for(let r=0;r<e.length;r++)if(r!==n&&e[n]===e[r]){t=!1;break}if(!t)break}return t}if(function(e,t){for(let n=0;n<t.length;n++)if(s.vJ.isEqual(e.tbsView,t[n].tbsView))return!0;return!1}(e,this.trustedCerts))return[[e]];const a=await this.findIssuer(e,this,t);if(0===a.length)throw new Error("No valid certificate paths found");for(let o=0;o<a.length;o++){if(s.vJ.isEqual(a[o].tbsView,e.tbsView)){n.push([a[o]]);continue}const l=await r(a[o],t);for(let e=0;e<l.length;e++){const t=l[e].slice();t.splice(0,0,a[o]),i(t)?n.push(t):n.push(l[e])}}return n},i=async e=>{const r=[],s=[],i=[];if(r.push(...n.filter((t=>e.issuer.isEqual(t.subject)))),0===r.length)return{status:1,statusMessage:"No certificate's issuers"};if(s.push(...this.crls.filter((t=>t.issuer.isEqual(e.issuer)))),0===s.length)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let e=0;e<s.length;e++){const n=s[e];if(!(n.nextUpdate&&n.nextUpdate.value<this.checkDate))for(let n=0;n<r.length;n++)try{if(await s[e].verify({issuerCertificate:r[n]},t)){i.push({crl:s[e],certificate:r[n]});break}}catch(e){}}return i.length?{status:0,statusMessage:c,result:i}:{status:3,statusMessage:"No valid CRLs found"}},a=async(e,n)=>{const r=t.getAlgorithmByOID(e.signatureAlgorithm.algorithmId);if(!r.name)return 1;if(!r.hash)return 1;for(let r=0;r<this.ocsps.length;r++){const s=this.ocsps[r],i=await s.getCertificateStatus(e,n,t);if(i.isForCertificate)return 0===i.status?0:1}return 2};async function o(e,t=!1){let n=!1,r=!1,s=!1,i=!1;if(e.extensions){for(let t=0;t<e.extensions.length;t++){const a=e.extensions[t];if(a.critical&&!a.parsedValue)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${a.extnID}`};if(a.extnID===se){s=!0;const e=new Uint8Array(a.parsedValue.valueBlock.valueHex);4==(4&e[0])&&(r=!0),2==(2&e[0])&&(i=!0)}a.extnID===le&&"cA"in a.parsedValue&&!0===a.parsedValue.cA&&(n=!0)}if(!0===r&&!1===n)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(!0===s&&!0===n&&!1===r)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(!0===n&&!0===s&&t&&!1===i)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return!1===n?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:c}}n.push(...this.trustedCerts),n.push(...this.certs);for(let e=0;e<n.length;e++)for(let t=0;t<n.length;t++)if(e!==t&&s.vJ.isEqual(n[e].tbsView,n[t].tbsView)){n.splice(t,1),e=0;break}const l=n[n.length-1];let u;const h=[l];if(u=await r(l,t),0===u.length)throw new qu(Su.noPath,"Unable to find certificate path");for(let e=0;e<u.length;e++){let t=!1;for(let n=0;n<u[e].length;n++){const r=u[e][n];for(let e=0;e<this.trustedCerts.length;e++)if(s.vJ.isEqual(r.tbsView,this.trustedCerts[e].tbsView)){t=!0;break}if(t)break}t||(u.splice(e,1),e=0)}if(0===u.length)throw new qu(Su.noValidPath,"No valid certificate paths found");let d=u[0].length,m=0;for(let e=0;e<u.length;e++)u[e].length<d&&(d=u[e].length,m=e);for(let e=0;e<u[m].length;e++)h.push(u[m][e]);if(u=await(async(t,n)=>{for(let e=0;e<t.length;e++)if(t[e].notBefore.value>n||t[e].notAfter.value<n)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(t.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let e=t.length-2;e>=0;e--)if(!1===t[e].issuer.isEqual(t[e].subject)&&!1===t[e].issuer.isEqual(t[e+1].subject))return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(0!==this.crls.length||0!==this.ocsps.length)for(let n=0;n<t.length-1;n++){let r=2,s={status:0,statusMessage:c};if(0!==this.ocsps.length)switch(r=await a(t[n],t[n+1]),r){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(0!==this.crls.length){if(s=await i(t[n]),0===s.status&&s.result)for(let e=0;e<s.result.length;e++){if(s.result[e].crl.isCertificateRevoked(t[n]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if(!1===(await o(s.result[e].certificate,!0)).result)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(!1===e)throw new qu(Su.noRevocation,`No revocation values found for one of certificates: ${s.statusMessage}`)}else if(2===r)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(2===r&&2===s.status&&e){const e=t[n+1];let r=!1;if(e.extensions)for(const t of e.extensions)switch(t.extnID){case ge:case be:case Ce:r=!0}if(r)throw new qu(Su.noRevocation,`No revocation values found for one of certificates: ${s.statusMessage}`)}}for(const[e,n]of t.entries())if(e&&!(await o(n)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"};return{result:!0}})(h,this.checkDate),!1===u.result)throw u;return h}async verify(e={},t=Fr(!0)){function n(e,t){const n=f(e),r=f(t),s=n.split("."),i=r.split("."),a=s.length,o=i.length;if(0===a||0===o||a<o)return!1;for(let e=0;e<a;e++)if(0===s[e].length)return!1;for(let e=0;e<o;e++)if(0===i[e].length){if(0===e){if(1===o)return!1;continue}return!1}for(let e=0;e<o;e++)if(0!==i[o-1-e].length&&0!==s[a-1-e].localeCompare(i[o-1-e]))return!1;return!0}function r(e,t){const r=f(e),s=f(t),i=r.split("@"),a=s.split("@");if(0===i.length||0===a.length||i.length<a.length)return!1;if(1===a.length){if(n(i[1],a[0])){const e=i[1].split("."),t=a[0].split(".");return 0===t[0].length||e.length===t.length}return!1}return 0===r.localeCompare(s)}function s(e,t){let r=f(e);const s=f(t),i=r.split("/");if(s.split("/").length>1)return!1;if(i.length>1)for(let e=0;e<i.length;e++)if(i[e].length>0&&":"!==i[e].charAt(i[e].length-1)){r=i[e].split(":")[0];break}if(n(r,s)){const e=r.split("."),t=s.split(".");return 0===t[0].length||e.length===t.length}return!1}function i(e,t){const n=e.valueBlock.valueHexView,r=t.valueBlock.valueHexView;if(4===n.length&&8===r.length){for(let e=0;e<4;e++)if((n[e]^r[e])&r[e+4])return!1;return!0}if(16===n.length&&32===r.length){for(let e=0;e<16;e++)if((n[e]^r[e])&r[e+16])return!1;return!0}return!1}function a(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;let n=!0,r=0;for(let s=0;s<t.typesAndValues.length;s++){let i=!1;for(let a=r;a<e.typesAndValues.length;a++)if(i=e.typesAndValues[a].isEqual(t.typesAndValues[s]),e.typesAndValues[a].type===t.typesAndValues[s].type&&(n=n&&i),!0===i){if(0===r||r===a){r=a+1;break}return!1}if(!1===i)return!1}return 0!==r&&n}try{if(0===this.certs.length)throw new Error("Empty certificate array");const o=e.passedWhenNotRevValues||!1,l=e.initialPolicySet||[ve],u=e.initialExplicitPolicy||!1,h=e.initialPolicyMappingInhibit||!1,d=e.initialInhibitPolicy||!1,m=e.initialPermittedSubtreesSet||[],f=e.initialExcludedSubtreesSet||[],p=e.initialRequiredNameForms||[];let g=u,b=h,y=d;const v=[!1,!1,!1];let w=0,S=0,q=0,k=m,A=f;const N=p;let C=1;this.certs=await this.sort(o,t);const x=[];x.push(ve);const E=[],B=new Array(this.certs.length-1);for(let e=0;e<this.certs.length-1;e++)B[e]=!0;E.push(B);const I=new Array(this.certs.length-1),V=new Array(this.certs.length-1);let O=g?this.certs.length-1:-1;for(let e=this.certs.length-2;e>=0;e--,C++){const t=this.certs[e];if(t.extensions){for(let n=0;n<t.extensions.length;n++){const r=t.extensions[n];if(r.extnID===ye){V[e]=r.parsedValue;for(let t=0;t<x.length;t++)if(x[t]===ve){delete E[t][e];break}for(let t=0;t<r.parsedValue.certificatePolicies.length;t++){let n=-1;const s=r.parsedValue.certificatePolicies[t].policyIdentifier;for(let e=0;e<x.length;e++)if(s===x[e]){n=e;break}if(-1===n){x.push(s);const t=new Array(this.certs.length-1);t[e]=!0,E.push(t)}else E[n][e]=!0}}if(r.extnID===Se){if(b)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};I[e]=r.parsedValue}r.extnID===ke&&!1===g&&(0===r.parsedValue.requireExplicitPolicy?(g=!0,O=e):!1===v[0]?(v[0]=!0,w=r.parsedValue.requireExplicitPolicy):w=w>r.parsedValue.requireExplicitPolicy?r.parsedValue.requireExplicitPolicy:w,0===r.parsedValue.inhibitPolicyMapping?b=!0:!1===v[1]?(v[1]=!0,S=r.parsedValue.inhibitPolicyMapping+1):S=S>r.parsedValue.inhibitPolicyMapping+1?r.parsedValue.inhibitPolicyMapping+1:S),r.extnID===Ne&&!1===y&&(0===r.parsedValue.valueBlock.valueDec?y=!0:!1===v[2]?(v[2]=!0,q=r.parsedValue.valueBlock.valueDec):q=q>r.parsedValue.valueBlock.valueDec?r.parsedValue.valueBlock.valueDec:q)}if(!0===y){let t=-1;for(let e=0;e<x.length;e++)if(x[e]===ve){t=e;break}-1!==t&&delete E[0][e]}!1===g&&!0===v[0]&&(w--,0===w&&(g=!0,O=e,v[0]=!1)),!1===b&&!0===v[1]&&(S--,0===S&&(b=!0,v[1]=!1)),!1===y&&!0===v[2]&&(q--,0===q&&(y=!0,v[2]=!1))}}for(let e=0;e<this.certs.length-1;e++)if(e<this.certs.length-2&&void 0!==I[e+1])for(let t=0;t<I[e+1].mappings.length;t++){if(I[e+1].mappings[t].issuerDomainPolicy===ve||I[e+1].mappings[t].subjectDomainPolicy===ve)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let n=-1,r=-1;for(let s=0;s<x.length;s++)x[s]===I[e+1].mappings[t].issuerDomainPolicy&&(n=s),x[s]===I[e+1].mappings[t].subjectDomainPolicy&&(r=s);void 0!==E[n][e]&&delete E[n][e];for(let s=0;s<V[e].certificatePolicies.length;s++)if(I[e+1].mappings[t].subjectDomainPolicy===V[e].certificatePolicies[s].policyIdentifier&&-1!==n&&-1!==r)for(let t=0;t<=e;t++)void 0!==E[r][t]&&(E[n][t]=!0,delete E[r][t])}for(let e=0;e<x.length;e++)if(x[e]===ve)for(let t=0;t<O;t++)delete E[e][t];const H=[];for(let e=0;e<E.length;e++){let t=!0;for(let n=0;n<this.certs.length-1;n++){let r=!1;if(n<O&&x[e]===ve&&x.length>1){t=!1;break}if(void 0===E[e][n]){if(n>=O)for(let e=0;e<x.length;e++)if(x[e]===ve){!0===E[e][n]&&(r=!0);break}if(!r){t=!1;break}}}!0===t&&H.push(x[e])}let D=[];if(1===l.length&&l[0]===ve&&!1===g)D=l;else if(1===H.length&&H[0]===ve)D=l;else for(let e=0;e<H.length;e++)for(let t=0;t<l.length;t++)if(l[t]===H[e]||l[t]===ve){D.push(H[e]);break}const P={result:D.length>0,resultCode:0,resultMessage:D.length>0?c:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:H,userConstrPolicies:D,explicitPolicyIndicator:g,policyMappings:I,certificatePath:this.certs};if(0===D.length)return P;if(!1===P.result)return P;C=1;for(let e=this.certs.length-2;e>=0;e--,C++){const t=this.certs[e];let o=[],l=[],c=[];if(t.extensions)for(let e=0;e<t.extensions.length;e++){const n=t.extensions[e];n.extnID===pe&&("permittedSubtrees"in n.parsedValue&&(l=l.concat(n.parsedValue.permittedSubtrees)),"excludedSubtrees"in n.parsedValue&&(c=c.concat(n.parsedValue.excludedSubtrees))),n.extnID===ae&&(o=o.concat(n.parsedValue.altNames))}let u=N.length<=0;for(let e=0;e<N.length;e++)switch(N[e].base.type){case 4:if(N[e].base.value.typesAndValues.length!==t.subject.typesAndValues.length)continue;u=!0;for(let n=0;n<t.subject.typesAndValues.length;n++)if(t.subject.typesAndValues[n].type!==N[e].base.value.typesAndValues[n].type){u=!1;break}if(!0===u)break}if(!1===u)throw P.result=!1,P.resultCode=21,P.resultMessage="No necessary name form found",P;const h=[[],[],[],[],[]];for(let e=0;e<k.length;e++)switch(k[e].base.type){case 1:h[0].push(k[e]);break;case 2:h[1].push(k[e]);break;case 4:h[2].push(k[e]);break;case 6:h[3].push(k[e]);break;case 7:h[4].push(k[e])}for(let e=0;e<5;e++){let l=!1,c=!1;const u=h[e];for(let h=0;h<u.length;h++){switch(e){case 0:if(o.length>0)for(let e=0;e<o.length;e++)1===o[e].type&&(c=!0,l=l||r(o[e].value,u[h].base.value));else for(let e=0;e<t.subject.typesAndValues.length;e++)"1.2.840.113549.1.9.1"!==t.subject.typesAndValues[e].type&&"0.9.2342.19200300.100.1.3"!==t.subject.typesAndValues[e].type||(c=!0,l=l||r(t.subject.typesAndValues[e].value.valueBlock.value,u[h].base.value));break;case 1:if(o.length>0)for(let e=0;e<o.length;e++)2===o[e].type&&(c=!0,l=l||n(o[e].value,u[h].base.value));break;case 2:c=!0,l=a(t.subject,u[h].base.value);break;case 3:if(o.length>0)for(let e=0;e<o.length;e++)6===o[e].type&&(c=!0,l=l||s(o[e].value,u[h].base.value));break;case 4:if(o.length>0)for(let e=0;e<o.length;e++)7===o[e].type&&(c=!0,l=l||i(o[e].value,u[h].base.value))}if(l)break}if(!1===l&&u.length>0&&c)throw P.result=!1,P.resultCode=41,P.resultMessage='Failed to meet "permitted sub-trees" name constraint',P}let d=!1;for(let e=0;e<A.length;e++){switch(A[e].base.type){case 1:if(o.length>=0)for(let t=0;t<o.length;t++)1===o[t].type&&(d=d||r(o[t].value,A[e].base.value));else for(let n=0;n<t.subject.typesAndValues.length;n++)"1.2.840.113549.1.9.1"!==t.subject.typesAndValues[n].type&&"0.9.2342.19200300.100.1.3"!==t.subject.typesAndValues[n].type||(d=d||r(t.subject.typesAndValues[n].value.valueBlock.value,A[e].base.value));break;case 2:if(o.length>0)for(let t=0;t<o.length;t++)2===o[t].type&&(d=d||n(o[t].value,A[e].base.value));break;case 4:d=d||a(t.subject,A[e].base.value);break;case 6:if(o.length>0)for(let t=0;t<o.length;t++)6===o[t].type&&(d=d||s(o[t].value,A[e].base.value));break;case 7:if(o.length>0)for(let t=0;t<o.length;t++)7===o[t].type&&(d=d||i(o[t].value,A[e].base.value))}if(d)break}if(!0===d)throw P.result=!1,P.resultCode=42,P.resultMessage='Failed to meet "excluded sub-trees" name constraint',P;k=k.concat(l),A=A.concat(c)}return P}catch(e){return e instanceof Error?e instanceof qu?{result:!1,resultCode:e.code,resultMessage:e.message,error:e}:{result:!1,resultCode:Su.unknown,resultMessage:e.message,error:e}:e&&"object"==typeof e&&"resultMessage"in e?e:{result:!1,resultCode:-1,resultMessage:`${e}`}}}}const Au="tbsResponseData",Nu="signatureAlgorithm",Cu="signature",xu="certs",Eu="BasicOCSPResponse",Bu=`${Eu}.${Au}`,Iu=`${Eu}.${Nu}`,Vu=`${Eu}.${Cu}`,Ou=`${Eu}.${xu}`,Hu=[Bu,Iu,Vu,Ou];class Du extends m{constructor(e={}){super(),this.tbsResponseData=i.H$(e,Au,Du.defaultValues(Au)),this.signatureAlgorithm=i.H$(e,Nu,Du.defaultValues(Nu)),this.signature=i.H$(e,Cu,Du.defaultValues(Cu)),xu in e&&(this.certs=i.H$(e,xu,Du.defaultValues(xu))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Au:return new mu;case Nu:return new _;case Cu:return new r.BitString;case xu:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let e=mu.compareWithDefault("tbs",t.tbs)&&mu.compareWithDefault("responderID",t.responderID)&&mu.compareWithDefault("producedAt",t.producedAt)&&mu.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(e=e&&mu.compareWithDefault("responseExtensions",t.responseExtensions)),e}case Nu:return t.algorithmId===c&&"algorithmParams"in t==0;case Cu:return t.isEqual(Du.defaultValues(e));case xu:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||Eu,value:[mu.schema(t.tbsResponseData||{names:{blockName:Bu}}),_.schema(t.signatureAlgorithm||{names:{blockName:Iu}}),new r.BitString({name:t.signature||Vu}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Sequence({value:[new r.Repeated({name:Ou,value:va.schema(t.certs||{})})]})]})]})}fromSchema(e){i.ze(e,Hu);const t=r.compareSchema(e,e,Du.schema());d.assertSchema(t,this.className),this.tbsResponseData=new mu({schema:t.result[Bu]}),this.signatureAlgorithm=new _({schema:t.result[Iu]}),this.signature=t.result[Vu],Ou in t.result&&(this.certs=Array.from(t.result[Ou],(e=>new va({schema:e}))))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Sequence({value:Array.from(this.certs,(e=>e.toSchema()))})]})),new r.Sequence({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,(e=>e.toJSON()))),e}async getCertificateStatus(e,t,n=Fr(!0)){const r={isForCertificate:!1,status:2},s={},i=[];for(const r of this.tbsResponseData.responses){const a=n.getAlgorithmByOID(r.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!s[a.name]){s[a.name]=1;const r=new Fc;i.push(r),await r.createForCertificate(e,{hashAlgorithm:a.name,issuerCertificate:t},n)}}for(const e of this.tbsResponseData.responses)for(const t of i)if(e.certID.isEqual(t)){r.isForCertificate=!0;try{switch(e.certStatus.idBlock.isConstructed){case!0:1===e.certStatus.idBlock.tagNumber&&(r.status=1);break;case!1:switch(e.certStatus.idBlock.tagNumber){case 0:r.status=0;break;case 2:r.status=2}}}catch(e){}return r}return r}async sign(e,t="SHA-1",n=Fr(!0)){if(!e)throw new Error("Need to provide a private key for signing");const s=await n.getSignatureParameters(e,t),i=s.parameters.algorithm;if(!("name"in i))throw new Error("Empty algorithm");this.signatureAlgorithm=s.signatureAlgorithm,this.tbsResponseData.tbsView=new Uint8Array(this.tbsResponseData.toSchema(!0).toBER());const a=await n.signWithPrivateKey(this.tbsResponseData.tbsView,e,{algorithm:i});this.signature=new r.BitString({valueHex:a})}async verify(e={},t=Fr(!0)){let n=null,s=-1;const a=e.trustedCerts||[];if(!this.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case this.tbsResponseData.responderID instanceof S:for(const[e,t]of this.certs.entries())if(t.subject.isEqual(this.tbsResponseData.responderID)){s=e;break}break;case this.tbsResponseData.responderID instanceof r.OctetString:for(const[e,n]of this.certs.entries()){const r=await t.digest({name:"sha-1"},n.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(i.dN(r,this.tbsResponseData.responderID.valueBlock.valueHex)){s=e;break}}break;default:throw new Error("Wrong value for responderID")}if(-1===s)throw new Error("Correct certificate was not found in OCSP response");n=this.certs[s];const o=[n];for(const e of this.certs){const t=await wa(e,n);t&&o.push(t)}const l=new ku({certs:o,trustedCerts:a});if(!(await l.verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(this.tbsResponseData.tbsView,this.signature,this.certs[s].subjectPublicKeyInfo,this.signatureAlgorithm)}}Du.CLASS_NAME="BasicOCSPResponse";const Pu="tbs",Tu="version",Ru="subject",Lu="subjectPublicKeyInfo",Uu="attributes",$u="signatureAlgorithm",_u="signatureValue",ju="CertificationRequestInfo",Mu=`${ju}.version`,Ku=`${ju}.subject`,Ju=`${ju}.subjectPublicKeyInfo`,Fu=`${ju}.attributes`,zu=[ju,Mu,Ku,Ju,Fu,$u,_u];function Wu(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.CertificationRequestInfo||ju,value:[new r.Integer({name:t.CertificationRequestInfoVersion||Mu}),S.schema(t.subject||{names:{blockName:Ku}}),$n.schema({names:{blockName:Ju}}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Repeated({optional:!0,name:t.CertificationRequestInfoAttributes||Fu,value:W.schema(t.attributes||{})})]})]})}class Gu extends m{constructor(e={}){super(),this.tbsView=new Uint8Array(i.H$(e,Pu,Gu.defaultValues(Pu))),this.version=i.H$(e,Tu,Gu.defaultValues(Tu)),this.subject=i.H$(e,Ru,Gu.defaultValues(Ru)),this.subjectPublicKeyInfo=i.H$(e,Lu,Gu.defaultValues(Lu)),Uu in e&&(this.attributes=i.H$(e,Uu,Gu.defaultValues(Uu))),this.signatureAlgorithm=i.H$(e,$u,Gu.defaultValues($u)),this.signatureValue=i.H$(e,_u,Gu.defaultValues(_u)),e.schema&&this.fromSchema(e.schema)}get tbs(){return s.vJ.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Pu:return l;case Tu:return 0;case Ru:return new S;case Lu:return new $n;case Uu:return[];case $u:return new _;case _u:return new r.BitString;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({value:[Wu(t.certificationRequestInfo||{}),new r.Sequence({name:t.signatureAlgorithm||$u,value:[new r.ObjectIdentifier,new r.Any({optional:!0})]}),new r.BitString({name:t.signatureValue||_u})]})}fromSchema(e){i.ze(e,zu);const t=r.compareSchema(e,e,Gu.schema());d.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[Mu].valueBlock.valueDec,this.subject=new S({schema:t.result[Ku]}),this.subjectPublicKeyInfo=new $n({schema:t.result[Ju]}),Fu in t.result&&(this.attributes=Array.from(t.result[Fu],(e=>new W({schema:e})))),this.signatureAlgorithm=new _({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new r.Integer({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return Uu in this&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],(e=>e.toSchema()))})),new r.Sequence({value:e})}toSchema(e=!1){let t;if(!1===e){if(0===this.tbsView.byteLength)return Gu.schema();const e=r.fromBER(this.tbsView);d.assert(e,"PKCS#10 Certificate Request"),t=e.result}else t=this.encodeTBS();return new r.Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:s.ep.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Uu in this&&(e.attributes=Array.from(this.attributes||[],(e=>e.toJSON()))),e}async sign(e,t="SHA-1",n=Fr(!0)){if(!e)throw new Error("Need to provide a private key for signing");const s=await n.getSignatureParameters(e,t),i=s.parameters;this.signatureAlgorithm=s.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new r.BitString({valueHex:a})}async verify(e=Fr(!0)){return e.verifyWithPublicKey(this.tbsView,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}async getPublicKey(e,t=Fr(!0)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}Gu.CLASS_NAME="CertificationRequest";const Zu="digestAlgorithm",Qu="digest",Yu=[Zu,Qu];class Xu extends m{constructor(e={}){super(),this.digestAlgorithm=i.H$(e,Zu,Xu.defaultValues(Zu)),this.digest=i.H$(e,Qu,Xu.defaultValues(Qu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zu:return new _;case Qu:return new r.OctetString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zu:return _.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==0;case Qu:return t.isEqual(Xu.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.digestAlgorithm||{names:{blockName:Zu}}),new r.OctetString({name:t.digest||Qu})]})}fromSchema(e){i.ze(e,Yu);const t=r.compareSchema(e,e,Xu.schema({names:{digestAlgorithm:{names:{blockName:Zu}},digest:Qu}}));d.assertSchema(t,this.className),this.digestAlgorithm=new _({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new r.Sequence({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}Xu.CLASS_NAME="DigestInfo";const eh="eContentType",th="eContent",nh=[eh,th];class rh extends m{constructor(e={}){if(super(),this.eContentType=i.H$(e,eh,rh.defaultValues(eh)),th in e&&(this.eContent=i.H$(e,th,rh.defaultValues(th)),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){const e=new r.OctetString({idBlock:{isConstructed:!0},isConstructed:!0});let t=0;const n=this.eContent.valueBlock.valueHexView.slice().buffer;let s=n.byteLength;for(;s>0;){const i=new Uint8Array(n,t,t+65536>n.byteLength?n.byteLength-t:65536),a=new ArrayBuffer(i.length),o=new Uint8Array(a);for(let e=0;e<o.length;e++)o[e]=i[e];e.valueBlock.value.push(new r.OctetString({valueHex:a})),s-=i.length,t+=i.length}this.eContent=e}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case eh:return c;case th:return new r.OctetString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case eh:return t===c;case th:return 1===t.idBlock.tagClass&&4===t.idBlock.tagNumber&&t.isEqual(rh.defaultValues(th));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.eContentType||c}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Any({name:t.eContent||c})]})]})}fromSchema(e){i.ze(e,nh);const t=r.compareSchema(e,e,rh.schema({names:{eContentType:eh,eContent:th}}));d.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),th in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new r.ObjectIdentifier({value:this.eContentType})),this.eContent&&!1===rh.compareWithDefault(th,this.eContent)&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new r.Sequence({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&!1===rh.compareWithDefault(th,this.eContent)&&(e.eContent=this.eContent.toJSON()),e}}rh.CLASS_NAME="EncapsulatedContentInfo";class sh extends gr{constructor(e={}){super(e)}}const ih="mac",ah="macSalt",oh="iterations",lh=[ih,ah,oh];class ch extends m{constructor(e={}){super(),this.mac=i.H$(e,ih,ch.defaultValues(ih)),this.macSalt=i.H$(e,ah,ch.defaultValues(ah)),oh in e&&(this.iterations=i.H$(e,oh,ch.defaultValues(oh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ih:return new Xu;case ah:return new r.OctetString;case oh:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ih:return Xu.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&Xu.compareWithDefault("digest",t.digest);case ah:return t.isEqual(ch.defaultValues(e));case oh:return t===ch.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,optional:t.optional||!0,value:[Xu.schema(t.mac||{names:{blockName:ih}}),new r.OctetString({name:t.macSalt||ah}),new r.Integer({optional:!0,name:t.iterations||oh})]})}fromSchema(e){i.ze(e,lh);const t=r.compareSchema(e,e,ch.schema({names:{mac:{names:{blockName:ih}},macSalt:ah,iterations:oh}}));d.assertSchema(t,this.className),this.mac=new Xu({schema:t.result.mac}),this.macSalt=t.result.macSalt,oh in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return void 0!==this.iterations&&e.push(new r.Integer({value:this.iterations})),new r.Sequence({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return void 0!==this.iterations&&(e.iterations=this.iterations),e}}ch.CLASS_NAME="MacData";const uh="hashAlgorithm",hh="hashedMessage",dh=[uh,hh];class mh extends m{constructor(e={}){super(),this.hashAlgorithm=i.H$(e,uh,mh.defaultValues(uh)),this.hashedMessage=i.H$(e,hh,mh.defaultValues(hh)),e.schema&&this.fromSchema(e.schema)}static async create(e,t,n=Fr(!0)){const s=n.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),i=await n.digest(e,t);return new mh({hashAlgorithm:new _({algorithmId:s,algorithmParams:new r.Null}),hashedMessage:new r.OctetString({valueHex:i})})}static defaultValues(e){switch(e){case uh:return new _;case hh:return new r.OctetString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case uh:return t.algorithmId===c&&"algorithmParams"in t==0;case hh:return 0===t.isEqual(mh.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.hashAlgorithm||{}),new r.OctetString({name:t.hashedMessage||c})]})}fromSchema(e){i.ze(e,dh);const t=r.compareSchema(e,e,mh.schema({names:{hashAlgorithm:{names:{blockName:uh}},hashedMessage:hh}}));d.assertSchema(t,this.className),this.hashAlgorithm=new _({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new r.Sequence({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}mh.CLASS_NAME="MessageImprint";const fh="reqCert",ph="singleRequestExtensions",gh=[fh,ph];class bh extends m{constructor(e={}){super(),this.reqCert=i.H$(e,fh,bh.defaultValues(fh)),ph in e&&(this.singleRequestExtensions=i.H$(e,ph,bh.defaultValues(ph))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fh:return new Fc;case ph:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case fh:return t.isEqual(bh.defaultValues(e));case ph:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[Fc.schema(t.reqCert||{}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Is.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||c}})]})]})}fromSchema(e){i.ze(e,gh);const t=r.compareSchema(e,e,bh.schema({names:{reqCert:{names:{blockName:fh}},extensions:{names:{blockName:ph}}}}));d.assertSchema(t,this.className),this.reqCert=new Fc({schema:t.result.reqCert}),ph in t.result&&(this.singleRequestExtensions=Array.from(t.result.singleRequestExtensions.valueBlock.value,(e=>new Is({schema:e}))))}toSchema(){const e=[];return e.push(this.reqCert.toSchema()),this.singleRequestExtensions&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Sequence({value:Array.from(this.singleRequestExtensions,(e=>e.toSchema()))})]})),new r.Sequence({value:e})}toJSON(){const e={reqCert:this.reqCert.toJSON()};return this.singleRequestExtensions&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,(e=>e.toJSON()))),e}}bh.CLASS_NAME="Request";const yh="tbs",vh="version",wh="requestorName",Sh="requestList",qh="requestExtensions",kh="TBSRequest",Ah=`${kh}.${vh}`,Nh=`${kh}.${wh}`,Ch=`${kh}.requests`,xh=`${kh}.${qh}`,Eh=[kh,Ah,Nh,Ch,xh];class Bh extends m{constructor(e={}){super(),this.tbsView=new Uint8Array(i.H$(e,yh,Bh.defaultValues(yh))),vh in e&&(this.version=i.H$(e,vh,Bh.defaultValues(vh))),wh in e&&(this.requestorName=i.H$(e,wh,Bh.defaultValues(wh))),this.requestList=i.H$(e,Sh,Bh.defaultValues(Sh)),qh in e&&(this.requestExtensions=i.H$(e,qh,Bh.defaultValues(qh))),e.schema&&this.fromSchema(e.schema)}get tbs(){return s.vJ.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case yh:return l;case vh:return 0;case wh:return new x;case Sh:case qh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case yh:return 0===t.byteLength;case vh:return t===Bh.defaultValues(e);case wh:return t.type===x.defaultValues("type")&&0===Object.keys(t.value).length;case Sh:case qh:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||kh,value:[new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Integer({name:t.TBSRequestVersion||Ah})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[x.schema(t.requestorName||{names:{blockName:Nh}})]}),new r.Sequence({name:t.requestList||"TBSRequest.requestList",value:[new r.Repeated({name:t.requests||Ch,value:bh.schema(t.requestNames||{})})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[Hs.schema(t.extensions||{names:{blockName:t.requestExtensions||xh}})]})]})}fromSchema(e){i.ze(e,Eh);const t=r.compareSchema(e,e,Bh.schema());d.assertSchema(t,this.className),this.tbsView=t.result.TBSRequest.valueBeforeDecodeView,Ah in t.result&&(this.version=t.result[Ah].valueBlock.valueDec),Nh in t.result&&(this.requestorName=new x({schema:t.result[Nh]})),this.requestList=Array.from(t.result[Ch],(e=>new bh({schema:e}))),xh in t.result&&(this.requestExtensions=Array.from(t.result[xh].valueBlock.value,(e=>new Is({schema:e}))))}toSchema(e=!1){let t;if(!1===e){if(0===this.tbsView.byteLength)return Bh.schema();const e=r.fromBER(this.tbsView);if(d.assert(e,"TBS Request"),!(e.result instanceof r.Sequence))throw new Error("ASN.1 result should be SEQUENCE");t=e.result}else{const e=[];void 0!==this.version&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new r.Integer({value:this.version})]})),this.requestorName&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),e.push(new r.Sequence({value:Array.from(this.requestList,(e=>e.toSchema()))})),this.requestExtensions&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new r.Sequence({value:Array.from(this.requestExtensions,(e=>e.toSchema()))})]})),t=new r.Sequence({value:e})}return t}toJSON(){const e={};return null!=this.version&&(e.version=this.version),this.requestorName&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,(e=>e.toJSON())),this.requestExtensions&&(e.requestExtensions=Array.from(this.requestExtensions,(e=>e.toJSON()))),e}}Bh.CLASS_NAME="TBSRequest";const Ih="signatureAlgorithm",Vh="signature",Oh="certs";class Hh extends m{constructor(e={}){super(),this.signatureAlgorithm=i.H$(e,Ih,Hh.defaultValues(Ih)),this.signature=i.H$(e,Vh,Hh.defaultValues(Vh)),Oh in e&&(this.certs=i.H$(e,Oh,Hh.defaultValues(Oh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ih:return new _;case Vh:return new r.BitString;case Oh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ih:return t.algorithmId===c&&"algorithmParams"in t==0;case Vh:return t.isEqual(Hh.defaultValues(e));case Oh:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[_.schema(t.signatureAlgorithm||{}),new r.BitString({name:t.signature||c}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Sequence({value:[new r.Repeated({name:t.certs||c,value:va.schema({})})]})]})]})}fromSchema(e){i.ze(e,[Ih,Vh,Oh]);const t=r.compareSchema(e,e,Hh.schema({names:{signatureAlgorithm:{names:{blockName:Ih}},signature:Vh,certs:Oh}}));d.assertSchema(t,this.className),this.signatureAlgorithm=new _({schema:t.result.signatureAlgorithm}),this.signature=t.result.signature,Oh in t.result&&(this.certs=Array.from(t.result.certs,(e=>new va({schema:e}))))}toSchema(){const e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Sequence({value:Array.from(this.certs,(e=>e.toSchema()))})]})),new r.Sequence({value:e})}toJSON(){const e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,(e=>e.toJSON()))),e}}Hh.CLASS_NAME="Signature";const Dh="tbsRequest",Ph="optionalSignature",Th=[Dh,Ph];class Rh extends m{constructor(e={}){super(),this.tbsRequest=i.H$(e,Dh,Rh.defaultValues(Dh)),Ph in e&&(this.optionalSignature=i.H$(e,Ph,Rh.defaultValues(Ph))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dh:return new Bh;case Ph:return new Hh;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dh:return Bh.compareWithDefault("tbs",t.tbs)&&Bh.compareWithDefault("version",t.version)&&Bh.compareWithDefault("requestorName",t.requestorName)&&Bh.compareWithDefault("requestList",t.requestList)&&Bh.compareWithDefault("requestExtensions",t.requestExtensions);case Ph:return Hh.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&Hh.compareWithDefault("signature",t.signature)&&Hh.compareWithDefault("certs",t.certs);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||"OCSPRequest",value:[Bh.schema(t.tbsRequest||{names:{blockName:Dh}}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Hh.schema(t.optionalSignature||{names:{blockName:Ph}})]})]})}fromSchema(e){i.ze(e,Th);const t=r.compareSchema(e,e,Rh.schema());d.assertSchema(t,this.className),this.tbsRequest=new Bh({schema:t.result.tbsRequest}),Ph in t.result&&(this.optionalSignature=new Hh({schema:t.result.optionalSignature}))}toSchema(e=!1){const t=[];return t.push(this.tbsRequest.toSchema(e)),this.optionalSignature&&t.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.optionalSignature.toSchema()]})),new r.Sequence({value:t})}toJSON(){const e={tbsRequest:this.tbsRequest.toJSON()};return this.optionalSignature&&(e.optionalSignature=this.optionalSignature.toJSON()),e}async createForCertificate(e,t,n=Fr(!0)){const r=new Fc;await r.createForCertificate(e,t,n),this.tbsRequest.requestList.push(new bh({reqCert:r}))}async sign(e,t="SHA-1",n=Fr(!0)){if(h.assertEmpty(e,"privateKey","OCSPRequest.sign method"),!this.optionalSignature)throw new Error('Need to create "optionalSignature" field before signing');const s=await n.getSignatureParameters(e,t),i=s.parameters;this.optionalSignature.signatureAlgorithm=s.signatureAlgorithm;const a=this.tbsRequest.toSchema(!0).toBER(!1),o=await n.signWithPrivateKey(a,e,i);this.optionalSignature.signature=new r.BitString({valueHex:o})}verify(){}}Rh.CLASS_NAME="OCSPRequest";const Lh="responseType",Uh="response",$h=[Lh,Uh];class _h extends m{constructor(e={}){super(),this.responseType=i.H$(e,Lh,_h.defaultValues(Lh)),this.response=i.H$(e,Uh,_h.defaultValues(Uh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Lh:return c;case Uh:return new r.OctetString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Lh:return t===c;case Uh:return t.isEqual(_h.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.ObjectIdentifier({name:t.responseType||c}),new r.OctetString({name:t.response||c})]})}fromSchema(e){i.ze(e,$h);const t=r.compareSchema(e,e,_h.schema({names:{responseType:Lh,response:Uh}}));d.assertSchema(t,this.className),this.responseType=t.result.responseType.valueBlock.toString(),this.response=t.result.response}toSchema(){return new r.Sequence({value:[new r.ObjectIdentifier({value:this.responseType}),this.response]})}toJSON(){return{responseType:this.responseType,response:this.response.toJSON()}}}_h.CLASS_NAME="ResponseBytes";const jh="responseStatus",Mh="responseBytes";class Kh extends m{constructor(e={}){super(),this.responseStatus=i.H$(e,jh,Kh.defaultValues(jh)),Mh in e&&(this.responseBytes=i.H$(e,Mh,Kh.defaultValues(Mh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case jh:return new r.Enumerated;case Mh:return new _h;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case jh:return t.isEqual(Kh.defaultValues(e));case Mh:return _h.compareWithDefault("responseType",t.responseType)&&_h.compareWithDefault("response",t.response);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||"OCSPResponse",value:[new r.Enumerated({name:t.responseStatus||jh}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[_h.schema(t.responseBytes||{names:{blockName:Mh}})]})]})}fromSchema(e){i.ze(e,[jh,Mh]);const t=r.compareSchema(e,e,Kh.schema());d.assertSchema(t,this.className),this.responseStatus=t.result.responseStatus,Mh in t.result&&(this.responseBytes=new _h({schema:t.result.responseBytes}))}toSchema(){const e=[];return e.push(this.responseStatus),this.responseBytes&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new r.Sequence({value:e})}toJSON(){const e={responseStatus:this.responseStatus.toJSON()};return this.responseBytes&&(e.responseBytes=this.responseBytes.toJSON()),e}async getCertificateStatus(e,t,n=Fr(!0)){let s;const i={isForCertificate:!1,status:2};if(!this.responseBytes)return i;if(this.responseBytes.responseType!==Je)return i;try{const e=r.fromBER(this.responseBytes.response.valueBlock.valueHexView);d.assert(e,"Basic OCSP response"),s=new Du({schema:e.result})}catch(e){return i}return s.getCertificateStatus(e,t,n)}async sign(e,t,n=Fr(!0)){var r;if(this.responseBytes&&this.responseBytes.responseType===Je)return Du.fromBER(this.responseBytes.response.valueBlock.valueHexView).sign(e,t,n);throw new Error(`Unknown ResponseBytes type: ${(null===(r=this.responseBytes)||void 0===r?void 0:r.responseType)||"Unknown"}`)}async verify(e=null,t=Fr(!0)){var n;if(Mh in this==0)throw new Error("Empty ResponseBytes field");if(this.responseBytes&&this.responseBytes.responseType===Je){const n=Du.fromBER(this.responseBytes.response.valueBlock.valueHexView);return null!==e&&(n.certs||(n.certs=[]),n.certs.push(e)),n.verify({},t)}throw new Error(`Unknown ResponseBytes type: ${(null===(n=this.responseBytes)||void 0===n?void 0:n.responseType)||"Unknown"}`)}}Kh.CLASS_NAME="OCSPResponse";const Jh="type",Fh="attributes",zh="encodedValue",Wh=[Fh];class Gh extends m{constructor(e={}){super(),this.type=i.H$(e,Jh,Gh.defaultValues(Jh)),this.attributes=i.H$(e,Fh,Gh.defaultValues(Fh)),this.encodedValue=i.H$(e,zh,Gh.defaultValues(zh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jh:return-1;case Fh:return[];case zh:return l;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jh:return t===Gh.defaultValues(Jh);case Fh:return 0===t.length;case zh:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Constructed({name:t.blockName||c,optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new r.Repeated({name:t.attributes||c,value:W.schema()})]})}fromSchema(e){i.ze(e,Wh);const t=r.compareSchema(e,e,Gh.schema({names:{tagNumber:this.type,attributes:Fh}}));if(d.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=s.vJ.toArrayBuffer(t.result.valueBeforeDecodeView),new Uint8Array(this.encodedValue)[0]=49,Fh in t.result!=0)this.attributes=Array.from(t.result.attributes,(e=>new W({schema:e})));else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}toSchema(){if(Gh.compareWithDefault(Jh,this.type)||Gh.compareWithDefault(Fh,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){if(Gh.compareWithDefault(Jh,this.type)||Gh.compareWithDefault(Fh,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}Gh.CLASS_NAME="SignedAndUnsignedAttributes";const Zh="version",Qh="sid",Yh="digestAlgorithm",Xh="signedAttrs",ed="signatureAlgorithm",td="signature",nd="unsignedAttrs",rd="SignerInfo",sd=`${rd}.${Zh}`,id=`${rd}.${Qh}`,ad=`${rd}.${Yh}`,od=`${rd}.${Xh}`,ld=`${rd}.${ed}`,cd=`${rd}.${td}`,ud=`${rd}.${nd}`,hd=[sd,id,ad,od,ld,cd,ud];class dd extends m{constructor(e={}){super(),this.version=i.H$(e,Zh,dd.defaultValues(Zh)),this.sid=i.H$(e,Qh,dd.defaultValues(Qh)),this.digestAlgorithm=i.H$(e,Yh,dd.defaultValues(Yh)),Xh in e&&(this.signedAttrs=i.H$(e,Xh,dd.defaultValues(Xh))),this.signatureAlgorithm=i.H$(e,ed,dd.defaultValues(ed)),this.signature=i.H$(e,td,dd.defaultValues(td)),nd in e&&(this.unsignedAttrs=i.H$(e,nd,dd.defaultValues(nd))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zh:return 0;case Qh:return new r.Any;case Yh:return new _;case Xh:return new Gh({type:0});case ed:return new _;case td:return new r.OctetString;case nd:return new Gh({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zh:return dd.defaultValues(Zh)===t;case Qh:return t instanceof r.Any;case Yh:return t instanceof _!=0&&t.isEqual(dd.defaultValues(Yh));case Xh:return Gh.compareWithDefault("type",t.type)&&Gh.compareWithDefault("attributes",t.attributes)&&Gh.compareWithDefault("encodedValue",t.encodedValue);case ed:return t instanceof _!=0&&t.isEqual(dd.defaultValues(ed));case td:case nd:return Gh.compareWithDefault("type",t.type)&&Gh.compareWithDefault("attributes",t.attributes)&&Gh.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:rd,value:[new r.Integer({name:t.version||sd}),new r.Choice({value:[Go.schema(t.sidSchema||{names:{blockName:id}}),new r.Choice({value:[new r.Constructed({optional:!0,name:t.sid||id,idBlock:{tagClass:3,tagNumber:0},value:[new r.OctetString]}),new r.Primitive({optional:!0,name:t.sid||id,idBlock:{tagClass:3,tagNumber:0}})]})]}),_.schema(t.digestAlgorithm||{names:{blockName:ad}}),Gh.schema(t.signedAttrs||{names:{blockName:od,tagNumber:0}}),_.schema(t.signatureAlgorithm||{names:{blockName:ld}}),new r.OctetString({name:t.signature||cd}),Gh.schema(t.unsignedAttrs||{names:{blockName:ud,tagNumber:1}})]})}fromSchema(e){i.ze(e,hd);const t=r.compareSchema(e,e,dd.schema());d.assertSchema(t,this.className),this.version=t.result[sd].valueBlock.valueDec;const n=t.result[id];1===n.idBlock.tagClass?this.sid=new Go({schema:n}):this.sid=n,this.digestAlgorithm=new _({schema:t.result[ad]}),od in t.result&&(this.signedAttrs=new Gh({type:0,schema:t.result[od]})),this.signatureAlgorithm=new _({schema:t.result[ld]}),this.signature=t.result[cd],ud in t.result&&(this.unsignedAttrs=new Gh({type:1,schema:t.result[ud]}))}toSchema(){if(dd.compareWithDefault(Qh,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new r.Integer({value:this.version})),this.sid instanceof Go?e.push(this.sid.toSchema()):e.push(this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&!1===dd.compareWithDefault(Xh,this.signedAttrs)&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&!1===dd.compareWithDefault(nd,this.unsignedAttrs)&&e.push(this.unsignedAttrs.toSchema()),new r.Sequence({value:e})}toJSON(){if(dd.compareWithDefault(Qh,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof r.Any||(e.sid=this.sid.toJSON()),this.signedAttrs&&!1===dd.compareWithDefault(Xh,this.signedAttrs)&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&!1===dd.compareWithDefault(nd,this.unsignedAttrs)&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}dd.CLASS_NAME="SignerInfo";const md="version",fd="policy",pd="messageImprint",gd="serialNumber",bd="genTime",yd="ordering",vd="nonce",wd="accuracy",Sd="tsa",qd="extensions",kd="TSTInfo",Ad=`${kd}.${md}`,Nd=`${kd}.${fd}`,Cd=`${kd}.${pd}`,xd=`${kd}.${gd}`,Ed=`${kd}.${bd}`,Bd=`${kd}.${wd}`,Id=`${kd}.${yd}`,Vd=`${kd}.${vd}`,Od=`${kd}.${Sd}`,Hd=`${kd}.${qd}`,Dd=[Ad,Nd,Cd,xd,Ed,Bd,Id,Vd,Od,Hd];class Pd extends m{constructor(e={}){super(),this.version=i.H$(e,md,Pd.defaultValues(md)),this.policy=i.H$(e,fd,Pd.defaultValues(fd)),this.messageImprint=i.H$(e,pd,Pd.defaultValues(pd)),this.serialNumber=i.H$(e,gd,Pd.defaultValues(gd)),this.genTime=i.H$(e,bd,Pd.defaultValues(bd)),wd in e&&(this.accuracy=i.H$(e,wd,Pd.defaultValues(wd))),yd in e&&(this.ordering=i.H$(e,yd,Pd.defaultValues(yd))),vd in e&&(this.nonce=i.H$(e,vd,Pd.defaultValues(vd))),Sd in e&&(this.tsa=i.H$(e,Sd,Pd.defaultValues(Sd))),qd in e&&(this.extensions=i.H$(e,qd,Pd.defaultValues(qd))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case md:return 0;case fd:return c;case pd:return new mh;case gd:return new r.Integer;case bd:return new Date(0,0,0);case wd:return new P;case yd:return!1;case vd:return new r.Integer;case Sd:return new x;case qd:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case md:case fd:case bd:case yd:return t===Pd.defaultValues(yd);case pd:return mh.compareWithDefault(uh,t.hashAlgorithm)&&mh.compareWithDefault(hh,t.hashedMessage);case gd:case vd:return t.isEqual(Pd.defaultValues(vd));case wd:return P.compareWithDefault(O,t.seconds)&&P.compareWithDefault(H,t.millis)&&P.compareWithDefault(D,t.micros);case Sd:return x.compareWithDefault(q,t.type)&&x.compareWithDefault(k,t.value);case qd:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||kd,value:[new r.Integer({name:t.version||Ad}),new r.ObjectIdentifier({name:t.policy||Nd}),mh.schema(t.messageImprint||{names:{blockName:Cd}}),new r.Integer({name:t.serialNumber||xd}),new r.GeneralizedTime({name:t.genTime||Ed}),P.schema(t.accuracy||{names:{blockName:Bd}}),new r.Boolean({name:t.ordering||Id,optional:!0}),new r.Integer({name:t.nonce||Vd,optional:!0}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[x.schema(t.tsa||{names:{blockName:Od}})]}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new r.Repeated({name:t.extensions||Hd,value:Is.schema(t.extension||{})})]})]})}fromSchema(e){i.ze(e,Dd);const t=r.compareSchema(e,e,Pd.schema());d.assertSchema(t,this.className),this.version=t.result[Ad].valueBlock.valueDec,this.policy=t.result[Nd].valueBlock.toString(),this.messageImprint=new mh({schema:t.result[Cd]}),this.serialNumber=t.result[xd],this.genTime=t.result[Ed].toDate(),Bd in t.result&&(this.accuracy=new P({schema:t.result[Bd]})),Id in t.result&&(this.ordering=t.result[Id].valueBlock.value),Vd in t.result&&(this.nonce=t.result[Vd]),Od in t.result&&(this.tsa=new x({schema:t.result[Od]})),Hd in t.result&&(this.extensions=Array.from(t.result[Hd],(e=>new Is({schema:e}))))}toSchema(){const e=[];return e.push(new r.Integer({value:this.version})),e.push(new r.ObjectIdentifier({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new r.GeneralizedTime({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),void 0!==this.ordering&&e.push(new r.Boolean({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),void 0!==this.ordering&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}async verify(e,t=Fr(!0)){if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const n=e.data;if(e.notBefore&&this.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&this.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const r=t.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),i=await t.digest(r.name,new Uint8Array(n));return s.vJ.isEqual(i,this.messageImprint.hashedMessage.valueBlock.valueHexView)}}Pd.CLASS_NAME="TSTInfo";const Td="version",Rd="digestAlgorithms",Ld="encapContentInfo",Ud="certificates",$d="crls",_d="signerInfos",jd="ocsps",Md="SignedData",Kd=`${Md}.${Td}`,Jd=`${Md}.${Rd}`,Fd=`${Md}.${Ld}`,zd=`${Md}.${Ud}`,Wd=`${Md}.${$d}`,Gd=`${Md}.${_d}`,Zd=[Kd,Jd,Fd,zd,Wd,Gd];class Qd extends Error{constructor({message:e,code:t=0,date:n=new Date,signatureVerified:r=null,signerCertificate:s=null,signerCertificateVerified:i=null,timestampSerial:a=null,certificatePath:o=[]}){super(e),this.name="SignedDataVerifyError",this.date=n,this.code=t,this.timestampSerial=a,this.signatureVerified=r,this.signerCertificate=s,this.signerCertificateVerified=i,this.certificatePath=o}}class Yd extends m{constructor(e={}){super(),this.version=i.H$(e,Td,Yd.defaultValues(Td)),this.digestAlgorithms=i.H$(e,Rd,Yd.defaultValues(Rd)),this.encapContentInfo=i.H$(e,Ld,Yd.defaultValues(Ld)),Ud in e&&(this.certificates=i.H$(e,Ud,Yd.defaultValues(Ud))),$d in e&&(this.crls=i.H$(e,$d,Yd.defaultValues($d))),jd in e&&(this.ocsps=i.H$(e,jd,Yd.defaultValues(jd))),this.signerInfos=i.H$(e,_d,Yd.defaultValues(_d)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Td:return 0;case Rd:return[];case Ld:return new rh;case Ud:case $d:case jd:case _d:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Td:return t===Yd.defaultValues(Td);case Ld:return rh.compareWithDefault("eContentType",t.eContentType)&&rh.compareWithDefault("eContent",t.eContent);case Rd:case Ud:case $d:case jd:case _d:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return void 0===t.optional&&(t.optional=!1),new r.Sequence({name:t.blockName||Md,optional:t.optional,value:[new r.Integer({name:t.version||Kd}),new r.Set({value:[new r.Repeated({name:t.digestAlgorithms||Jd,value:_.schema()})]}),rh.schema(t.encapContentInfo||{names:{blockName:Fd}}),new r.Constructed({name:t.certificates||zd,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Ho.schema().valueBlock.value}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:_o.schema(t.crls||{names:{crls:Wd}}).valueBlock.value}),new r.Set({value:[new r.Repeated({name:t.signerInfos||Gd,value:dd.schema()})]})]})}fromSchema(e){i.ze(e,Zd);const t=r.compareSchema(e,e,Yd.schema());if(d.assertSchema(t,this.className),this.version=t.result[Kd].valueBlock.valueDec,Jd in t.result&&(this.digestAlgorithms=Array.from(t.result[Jd],(e=>new _({schema:e})))),this.encapContentInfo=new rh({schema:t.result[Fd]}),zd in t.result){const e=new Ho({schema:new r.Set({value:t.result[zd].valueBlock.value})});this.certificates=e.certificates.slice(0)}Wd in t.result&&(this.crls=Array.from(t.result[Wd],(e=>1===e.idBlock.tagClass?new Ya({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new Ro({schema:e}))))),Gd in t.result&&(this.signerInfos=Array.from(t.result[Gd],(e=>new dd({schema:e}))))}toSchema(e=!1){const t=[];if(this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof Io))||this.crls&&this.crls.length&&this.crls.some((e=>e instanceof Ro))?this.version=5:this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof Hi))?this.version=4:this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof ti))||this.signerInfos.some((e=>3===e.version))||this.encapContentInfo.eContentType!==Yd.ID_DATA?this.version=3:this.version=1,t.push(new r.Integer({value:this.version})),t.push(new r.Set({value:Array.from(this.digestAlgorithms,(e=>e.toSchema()))})),t.push(this.encapContentInfo.toSchema()),this.certificates){const e=new Ho({certificates:this.certificates}).toSchema();t.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:e.valueBlock.value}))}return this.crls&&t.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,(t=>{if(t instanceof Ro){const e=t.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}return t.toSchema(e)}))})),t.push(new r.Set({value:Array.from(this.signerInfos,(e=>e.toSchema()))})),new r.Sequence({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,(e=>e.toJSON())),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,(e=>e.toJSON()))};return this.certificates&&(e.certificates=Array.from(this.certificates,(e=>e.toJSON()))),this.crls&&(e.crls=Array.from(this.crls,(e=>e.toJSON()))),e}async verify({signer:e=-1,data:t=l,trustedCerts:n=[],checkDate:r=new Date,checkChain:s=!1,passedWhenNotRevValues:a=!1,extendedMode:o=!1,findOrigin:u=null,findIssuer:h=null}={},d=Fr(!0)){let m=null,f=null;try{let p=l,g=c,b=[];const y=this.signerInfos[e];if(!y)throw new Qd({date:r,code:1,message:"Unable to get signer by supplied index"});if(!this.certificates)throw new Qd({date:r,code:2,message:"No certificates attached to this signed data"});if(y.sid instanceof Go){for(const e of this.certificates)if(e instanceof va&&e.issuer.isEqual(y.sid.issuer)&&e.serialNumber.isEqual(y.sid.serialNumber)){m=e;break}}else{const e=y.sid,t=e.idBlock.isConstructed?e.valueBlock.value[0].valueBlock.valueHex:e.valueBlock.valueHex;for(const e of this.certificates){if(!(e instanceof va))continue;const n=await d.digest({name:"sha-1"},e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(i.dN(n,t)){m=e;break}}}if(!m)throw new Qd({date:r,code:3,message:"Unable to find signer certificate"});if(this.encapContentInfo.eContentType===Le){if(!this.encapContentInfo.eContent)throw new Qd({date:r,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:m,timestampSerial:f,signerCertificateVerified:!0});let e;try{e=Pd.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView)}catch(e){throw new Qd({date:r,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:m,timestampSerial:f,signerCertificateVerified:!0})}if(r=e.genTime,f=e.serialNumber.valueBlock.valueHexView.slice(),0===t.byteLength)throw new Qd({date:r,code:4,message:"Missed detached data input array"});if(!await e.verify({data:t},d))throw new Qd({date:r,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:m,timestampSerial:f,signerCertificateVerified:!0})}if(s){const e=this.certificates.filter((e=>e instanceof va&&!!wa(e,m))),t={checkDate:r,certs:e,trustedCerts:n};h&&(t.findIssuer=h),u&&(t.findOrigin=u);const s=new ku(t);if(s.certs.push(m),this.crls)for(const e of this.crls)"thisUpdate"in e?s.crls.push(e):e.otherRevInfoFormat===Je&&s.ocsps.push(new Du({schema:e.otherRevInfo}));this.ocsps&&s.ocsps.push(...this.ocsps);const i=await s.verify({passedWhenNotRevValues:a},d).catch((e=>{throw new Qd({date:r,code:5,message:`Validation of signer's certificate failed with error: ${e instanceof Object?e.resultMessage:e}`,signerCertificate:m,signerCertificateVerified:!1})}));if(i.certificatePath&&(b=i.certificatePath),!i.result)throw new Qd({date:r,code:5,message:`Validation of signer's certificate failed: ${i.resultMessage}`,signerCertificate:m,signerCertificateVerified:!1})}const v=d.getAlgorithmByOID(y.digestAlgorithm.algorithmId);if(!("name"in v))throw new Qd({date:r,code:7,message:`Unsupported signature algorithm: ${y.digestAlgorithm.algorithmId}`,signerCertificate:m,signerCertificateVerified:!0});g=v.name;const w=this.encapContentInfo.eContent;if(w)t=1===w.idBlock.tagClass&&4===w.idBlock.tagNumber?w.getValue():w.valueBlock.valueBeforeDecodeView;else if(0===t.byteLength)throw new Qd({date:r,code:8,message:"Missed detached data input array",signerCertificate:m,signerCertificateVerified:!0});if(y.signedAttrs){let e=!1,t=!1;for(const n of y.signedAttrs.attributes)if("1.2.840.113549.1.9.3"===n.type&&(e=!0),"1.2.840.113549.1.9.4"===n.type&&(t=!0,p=n.values[0].valueBlock.valueHex),e&&t)break;if(!1===e)throw new Qd({date:r,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:m,signerCertificateVerified:!0});if(!1===t)throw new Qd({date:r,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:m,signerCertificateVerified:!0})}if(y.signedAttrs){const e=await d.digest(g,new Uint8Array(t));if(!i.dN(e,p))throw new Qd({date:r,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:m,timestampSerial:f,signerCertificateVerified:!0});t=y.signedAttrs.encodedValue}const S=await d.verifyWithPublicKey(t,y.signature,m.subjectPublicKeyInfo,m.signatureAlgorithm,g);return o?{date:r,code:14,message:c,signatureVerified:S,signerCertificate:m,timestampSerial:f,signerCertificateVerified:!0,certificatePath:b}:S}catch(e){if(e instanceof Qd)throw e;throw new Qd({date:r,code:15,message:`Error during verification: ${e instanceof Error?e.message:e}`,signatureVerified:null,signerCertificate:m,timestampSerial:f,signerCertificateVerified:!0})}}async sign(e,t,n="SHA-1",i=l,a=Fr(!0)){if(!e)throw new Error("Need to provide a private key for signing");const o=a.getOIDByAlgorithm({name:n},!0,"hashAlgorithm");0===this.digestAlgorithms.filter((e=>e.algorithmId===o)).length&&this.digestAlgorithms.push(new _({algorithmId:o,algorithmParams:new r.Null}));const c=this.signerInfos[t];if(!c)throw new RangeError("SignerInfo index is out of range");c.digestAlgorithm=new _({algorithmId:o,algorithmParams:new r.Null});const u=await a.getSignatureParameters(e,n),h=u.parameters;if(c.signatureAlgorithm=u.signatureAlgorithm,c.signedAttrs)0!==c.signedAttrs.encodedValue.byteLength?i=c.signedAttrs.encodedValue:(i=c.signedAttrs.toSchema().toBER(),s.vJ.toUint8Array(i)[0]=49);else{const e=this.encapContentInfo.eContent;if(e)i=1===e.idBlock.tagClass&&4===e.idBlock.tagNumber?e.getValue():e.valueBlock.valueBeforeDecodeView;else if(0===i.byteLength)throw new Error("Missed detached data input array")}const d=await a.signWithPrivateKey(i,e,h);c.signature=new r.OctetString({valueHex:d})}}Yd.CLASS_NAME="SignedData",Yd.ID_DATA=De;const Xd="version",em="authSafe",tm="macData",nm="parsedValue",rm=[Xd,em,tm];class sm extends m{constructor(e={}){super(),this.version=i.H$(e,Xd,sm.defaultValues(Xd)),this.authSafe=i.H$(e,em,sm.defaultValues(em)),tm in e&&(this.macData=i.H$(e,tm,sm.defaultValues(tm))),nm in e&&(this.parsedValue=i.H$(e,nm,sm.defaultValues(nm))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xd:return 3;case em:return new Ri;case tm:return new ch;case nm:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xd:return t===sm.defaultValues(e);case em:return Ri.compareWithDefault("contentType",t.contentType)&&Ri.compareWithDefault("content",t.content);case tm:return ch.compareWithDefault("mac",t.mac)&&ch.compareWithDefault("macSalt",t.macSalt)&&ch.compareWithDefault("iterations",t.iterations);case nm:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.version||Xd}),Ri.schema(t.authSafe||{names:{blockName:em}}),ch.schema(t.macData||{names:{blockName:tm,optional:!0}})]})}fromSchema(e){i.ze(e,rm);const t=r.compareSchema(e,e,sm.schema({names:{version:Xd,authSafe:{names:{blockName:em}},macData:{names:{blockName:tm}}}}));d.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new Ri({schema:t.result.authSafe}),tm in t.result&&(this.macData=new ch({schema:t.result.macData}))}toSchema(){const e=[new r.Integer({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new r.Sequence({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}async makeInternalValues(e={},t=Fr(!0)){if(u.assert(e,"parameters","object"),!this.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(h.assertEmpty(this.parsedValue.integrityMode,"integrityMode","parsedValue"),h.assertEmpty(this.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),this.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new h("iterations");h.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),h.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),h.assertEmpty(e.password,"password");const n=new ArrayBuffer(64),s=new Uint8Array(n);t.getRandomValues(s);const i=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new Ri({contentType:Ri.DATA,content:new r.OctetString({valueHex:i})});const a=await t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:n,iterationCount:e.iterations,contentToStamp:i});this.macData=new ch({mac:new Xu({digestAlgorithm:new _({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new r.OctetString({valueHex:a})}),macSalt:new r.OctetString({valueHex:n}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new h("signingCertificate");h.assertEmpty(e.privateKey,"privateKey"),h.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const n=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),s=new Yd({version:1,encapContentInfo:new rh({eContentType:"1.2.840.113549.1.7.1",eContent:new r.OctetString({valueHex:n})}),certificates:[e.signingCertificate]}),i=await t.digest({name:e.hashAlgorithm},new Uint8Array(n)),a=[];a.push(new W({type:"1.2.840.113549.1.9.3",values:[new r.ObjectIdentifier({value:"1.2.840.113549.1.7.1"})]})),a.push(new W({type:"1.2.840.113549.1.9.5",values:[new r.UTCTime({valueDate:new Date})]})),a.push(new W({type:"1.2.840.113549.1.9.4",values:[new r.OctetString({valueHex:i})]})),s.signerInfos.push(new dd({version:1,sid:new Go({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new Gh({type:0,attributes:a})})),await s.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),this.authSafe=new Ri({contentType:"1.2.840.113549.1.7.2",content:s.toSchema(!0)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${this.parsedValue.integrityMode}`)}}async parseInternalValues(e,t=Fr(!0)){switch(u.assert(e,"parameters","object"),void 0===e.checkIntegrity&&(e.checkIntegrity=!0),this.parsedValue={},this.authSafe.contentType){case Ri.DATA:{h.assertEmpty(e.password,"password"),this.parsedValue.integrityMode=0,u.assert(this.authSafe.content,"authSafe.content",r.OctetString);const n=this.authSafe.content.getValue();if(this.parsedValue.authenticatedSafe=$c.fromBER(n),e.checkIntegrity){if(!this.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const r=t.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!await t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:r.name,salt:s.vJ.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),iterationCount:this.macData.iterations||1,contentToVerify:n,signatureToVerify:s.vJ.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView)}))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case Ri.SIGNED_DATA:{this.parsedValue.integrityMode=1;const e=new Yd({schema:this.authSafe.content}),n=e.encapContentInfo.eContent;h.assert(n,"eContent","cmsSigned.encapContentInfo"),u.assert(n,"eContent",r.OctetString);const s=n.getValue();if(this.parsedValue.authenticatedSafe=$c.fromBER(s),!await e.verify({signer:0,checkChain:!1},t))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${this.authSafe.contentType}`)}}}sm.CLASS_NAME="PFX";const im="status",am="statusStrings",om="failInfo",lm=[im,am,om];var cm;!function(e){e[e.granted=0]="granted",e[e.grantedWithMods=1]="grantedWithMods",e[e.rejection=2]="rejection",e[e.waiting=3]="waiting",e[e.revocationWarning=4]="revocationWarning",e[e.revocationNotification=5]="revocationNotification"}(cm||(cm={}));class um extends m{constructor(e={}){super(),this.status=i.H$(e,im,um.defaultValues(im)),am in e&&(this.statusStrings=i.H$(e,am,um.defaultValues(am))),om in e&&(this.failInfo=i.H$(e,om,um.defaultValues(om))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case im:return 2;case am:return[];case om:return new r.BitString;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case im:return t===um.defaultValues(e);case am:return 0===t.length;case om:return t.isEqual(um.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||c,value:[new r.Integer({name:t.status||c}),new r.Sequence({optional:!0,value:[new r.Repeated({name:t.statusStrings||c,value:new r.Utf8String})]}),new r.BitString({name:t.failInfo||c,optional:!0})]})}fromSchema(e){i.ze(e,lm);const t=r.compareSchema(e,e,um.schema({names:{status:im,statusStrings:am,failInfo:om}}));d.assertSchema(t,this.className);const n=t.result.status;if(!0===n.valueBlock.isHexOnly||n.valueBlock.valueDec<0||n.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=n.valueBlock.valueDec,am in t.result&&(this.statusStrings=t.result.statusStrings),om in t.result&&(this.failInfo=t.result.failInfo)}toSchema(){const e=[];return e.push(new r.Integer({value:this.status})),this.statusStrings&&e.push(new r.Sequence({optional:!0,value:this.statusStrings})),this.failInfo&&e.push(this.failInfo),new r.Sequence({value:e})}toJSON(){const e={status:this.status};return this.statusStrings&&(e.statusStrings=Array.from(this.statusStrings,(e=>e.toJSON()))),this.failInfo&&(e.failInfo=this.failInfo.toJSON()),e}}um.CLASS_NAME="PKIStatusInfo";const hm="version",dm="messageImprint",mm="reqPolicy",fm="nonce",pm="certReq",gm="extensions",bm="TimeStampReq",ym=`${bm}.${hm}`,vm=`${bm}.${dm}`,wm=`${bm}.${mm}`,Sm=`${bm}.${fm}`,qm=`${bm}.${pm}`,km=`${bm}.${gm}`,Am=[ym,vm,wm,Sm,qm,km];class Nm extends m{constructor(e={}){super(),this.version=i.H$(e,hm,Nm.defaultValues(hm)),this.messageImprint=i.H$(e,dm,Nm.defaultValues(dm)),mm in e&&(this.reqPolicy=i.H$(e,mm,Nm.defaultValues(mm))),fm in e&&(this.nonce=i.H$(e,fm,Nm.defaultValues(fm))),pm in e&&(this.certReq=i.H$(e,pm,Nm.defaultValues(pm))),gm in e&&(this.extensions=i.H$(e,gm,Nm.defaultValues(gm))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hm:return 0;case dm:return new mh;case mm:return c;case fm:return new r.Integer;case pm:return!1;case gm:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case hm:case mm:case pm:return t===Nm.defaultValues(e);case dm:return mh.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&mh.compareWithDefault("hashedMessage",t.hashedMessage);case fm:return t.isEqual(Nm.defaultValues(e));case gm:return 0===t.length;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||bm,value:[new r.Integer({name:t.version||ym}),mh.schema(t.messageImprint||{names:{blockName:vm}}),new r.ObjectIdentifier({name:t.reqPolicy||wm,optional:!0}),new r.Integer({name:t.nonce||Sm,optional:!0}),new r.Boolean({name:t.certReq||qm,optional:!0}),new r.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new r.Repeated({name:t.extensions||km,value:Is.schema()})]})]})}fromSchema(e){i.ze(e,Am);const t=r.compareSchema(e,e,Nm.schema());d.assertSchema(t,this.className),this.version=t.result[ym].valueBlock.valueDec,this.messageImprint=new mh({schema:t.result[vm]}),wm in t.result&&(this.reqPolicy=t.result[wm].valueBlock.toString()),Sm in t.result&&(this.nonce=t.result[Sm]),qm in t.result&&(this.certReq=t.result[qm].valueBlock.value),km in t.result&&(this.extensions=Array.from(t.result[km],(e=>new Is({schema:e}))))}toSchema(){const e=[];return e.push(new r.Integer({value:this.version})),e.push(this.messageImprint.toSchema()),this.reqPolicy&&e.push(new r.ObjectIdentifier({value:this.reqPolicy})),this.nonce&&e.push(this.nonce),pm in this&&!1===Nm.compareWithDefault(pm,this.certReq)&&e.push(new r.Boolean({value:this.certReq})),this.extensions&&e.push(new r.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,(e=>e.toSchema()))})),new r.Sequence({value:e})}toJSON(){const e={version:this.version,messageImprint:this.messageImprint.toJSON()};return void 0!==this.reqPolicy&&(e.reqPolicy=this.reqPolicy),void 0!==this.nonce&&(e.nonce=this.nonce.toJSON()),void 0!==this.certReq&&!1===Nm.compareWithDefault(pm,this.certReq)&&(e.certReq=this.certReq),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}}Nm.CLASS_NAME="TimeStampReq";const Cm="status",xm="timeStampToken",Em="TimeStampResp",Bm=`${Em}.${Cm}`,Im=`${Em}.${xm}`,Vm=[Bm,Im];class Om extends m{constructor(e={}){super(),this.status=i.H$(e,Cm,Om.defaultValues(Cm)),xm in e&&(this.timeStampToken=i.H$(e,xm,Om.defaultValues(xm))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cm:return new um;case xm:return new Ri;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Cm:return um.compareWithDefault(Cm,t.status)&&"statusStrings"in t==0&&"failInfo"in t==0;case xm:return t.contentType===c&&t.content instanceof r.Any;default:return super.defaultValues(e)}}static schema(e={}){const t=i.H$(e,"names",{});return new r.Sequence({name:t.blockName||Em,value:[um.schema(t.status||{names:{blockName:Bm}}),Ri.schema(t.timeStampToken||{names:{blockName:Im,optional:!0}})]})}fromSchema(e){i.ze(e,Vm);const t=r.compareSchema(e,e,Om.schema());d.assertSchema(t,this.className),this.status=new um({schema:t.result[Bm]}),Im in t.result&&(this.timeStampToken=new Ri({schema:t.result[Im]}))}toSchema(){const e=[];return e.push(this.status.toSchema()),this.timeStampToken&&e.push(this.timeStampToken.toSchema()),new r.Sequence({value:e})}toJSON(){const e={status:this.status.toJSON()};return this.timeStampToken&&(e.timeStampToken=this.timeStampToken.toJSON()),e}async sign(e,t,n=Fr(!0)){return this.assertContentType(),new Yd({schema:this.timeStampToken.content}).sign(e,0,t,void 0,n)}async verify(e={signer:0,trustedCerts:[],data:l},t=Fr(!0)){return this.assertContentType(),new Yd({schema:this.timeStampToken.content}).verify(e,t)}assertContentType(){if(!this.timeStampToken)throw new Error("timeStampToken is absent in TSP response");if(this.timeStampToken.contentType!==Pe)throw new Error(`Wrong format of timeStampToken: ${this.timeStampToken.contentType}`)}}Om.CLASS_NAME="TimeStampResp",function(){if("undefined"!=typeof self){if("crypto"in self){let e="webcrypto";"webkitSubtle"in self.crypto&&(e="safari"),Kr(e,new _r({name:e,crypto}))}}else if("undefined"!=typeof crypto&&"webcrypto"in crypto){const e="NodeJS ^15",t=crypto.webcrypto;Kr(e,new _r({name:e,crypto:t}))}}()},2043:(e,t)=>{"use strict";class n{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const r=n.toUint8Array(e),s=n.toUint8Array(t);if(r.length!==s.byteLength)return!1;for(let e=0;e<r.length;e++)if(r[e]!==s[e])return!1;return!0}static concat(...e){let t;t=!Array.isArray(e[0])||e[1]instanceof Function?Array.isArray(e[0])&&e[1]instanceof Function?e[0]:e[e.length-1]instanceof Function?e.slice(0,e.length-1):e:e[0];let n=0;for(const e of t)n+=e.byteLength;const r=new Uint8Array(n);let s=0;for(const e of t){const t=this.toUint8Array(e);r.set(t,s),s+=t.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const r="string",s=/^[0-9a-f]+$/i,i=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,a=/^[a-zA-Z0-9-_]+$/;class o{static fromString(e){const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer}static toString(e){const t=n.toUint8Array(e);let r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return decodeURIComponent(escape(r))}}class l{static toString(e,t=!1){const r=n.toArrayBuffer(e),s=new DataView(r);let i="";for(let e=0;e<r.byteLength;e+=2){const n=s.getUint16(e,t);i+=String.fromCharCode(n)}return i}static fromString(e,t=!1){const n=new ArrayBuffer(2*e.length),r=new DataView(n);for(let n=0;n<e.length;n++)r.setUint16(2*n,e.charCodeAt(n),t);return n}}class c{static isHex(e){return typeof e===r&&s.test(e)}static isBase64(e){return typeof e===r&&i.test(e)}static isBase64Url(e){return typeof e===r&&a.test(e)}static ToString(e,t="utf8"){const r=n.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return l.toString(r,!0);case"utf16":case"utf16be":return l.toString(r);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return l.fromString(e,!0);case"utf16":case"utf16be":return l.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=n.toUint8Array(e);if("undefined"!=typeof btoa){const e=this.ToString(t,"binary");return btoa(e)}return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=c.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return o.fromString(e);case"utf16":case"utf16be":return l.fromString(e);case"utf16le":case"usc2":return l.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=c.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return o.toString(e);case"utf16":case"utf16be":return l.toString(e);case"utf16le":case"usc2":return l.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}static ToBinary(e){const t=n.toUint8Array(e);let r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return r}static ToHex(e){const t=n.toUint8Array(e);let r="";const s=t.length;for(let e=0;e<s;e++){const n=t[e];n<16&&(r+="0"),r+=n.toString(16)}return r}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){const r=t.slice(e,e+2);n[e/2]=parseInt(r,16)}return n.buffer}static ToUtf16String(e,t=!1){return l.toString(e,t)}static FromUtf16String(e,t=!1){return l.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let n=0;n<t;n++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}c.DEFAULT_UTF8_ENCODING="utf8",t.vJ=n,t.ep=c},1225:(e,t,n)=>{"use strict";function r(e,t,n){var r;return e instanceof Object==0?n:null!==(r=e[t])&&void 0!==r?r:n}function s(e,t=0,n=e.byteLength-t,r=!1){let s="";for(const i of new Uint8Array(e,t,n)){const e=i.toString(16).toUpperCase();1===e.length&&(s+="0"),s+=e,r&&(s+=" ")}return s.trim()}function i(e,t){let n=0;if(1===e.length)return e[0];for(let r=e.length-1;r>=0;r--)n+=e[e.length-1-r]*Math.pow(2,t*r);return n}function a(e,t,n=-1){const r=n;let s=e,i=0,a=Math.pow(2,t);for(let n=1;n<8;n++){if(e<a){let e;if(r<0)e=new ArrayBuffer(n),i=n;else{if(r<n)return new ArrayBuffer(0);e=new ArrayBuffer(r),i=r}const a=new Uint8Array(e);for(let e=n-1;e>=0;e--){const n=Math.pow(2,e*t);a[i-e-1]=Math.floor(s/n),s-=a[i-e-1]*n}return e}a*=Math.pow(2,t)}return new ArrayBuffer(0)}function o(...e){let t=0,n=0;for(const n of e)t+=n.byteLength;const r=new ArrayBuffer(t),s=new Uint8Array(r);for(const t of e)s.set(new Uint8Array(t),n),n+=t.byteLength;return r}function l(...e){let t=0,n=0;for(const n of e)t+=n.length;const r=new ArrayBuffer(t),s=new Uint8Array(r);for(const t of e)s.set(t,n),n+=t.length;return s}function c(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=255===e[0]&&128&e[1],n=0===e[0]&&0==(128&e[1]);(t||n)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++)n[e]=0;n[0]=128&e[0];const r=i(n,8),s=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(s);for(let t=0;t<this.valueHex.byteLength;t++)a[t]=e[t];return a[0]&=127,i(a,8)-r}function u(e){const t=e<0?-1*e:e;let n=128;for(let r=1;r<8;r++){if(t<=n){if(e<0){const e=a(n-t,8,r);return new Uint8Array(e)[0]|=128,e}let s=a(t,8,r),i=new Uint8Array(s);if(128&i[0]){const e=s.slice(0),t=new Uint8Array(e);s=new ArrayBuffer(s.byteLength+1),i=new Uint8Array(s);for(let n=0;n<e.byteLength;n++)i[n+1]=t[n];i[0]=0}return s}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function h(e,t){if(e.byteLength!==t.byteLength)return!1;const n=new Uint8Array(e),r=new Uint8Array(t);for(let e=0;e<n.length;e++)if(n[e]!==r[e])return!1;return!0}function d(e,t){const n=e.toString(10);if(t<n.length)return"";const r=t-n.length,s=new Array(r);for(let e=0;e<r;e++)s[e]="0";return s.join("").concat(n)}n.d(t,{Gc:()=>c,Gh:()=>g,H$:()=>r,Ir:()=>l,J$:()=>w,RH:()=>s,dN:()=>h,gG:()=>y,hk:()=>o,lE:()=>b,lL:()=>a,qE:()=>u,r9:()=>i,s3:()=>p,vX:()=>d,ze:()=>S});const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function p(e,t=!1,n=!1,r=!1){let s=0,i=0,a=0,o="";const l=t?f:m;if(r){let t=0;for(let n=0;n<e.length;n++)if(0!==e.charCodeAt(n)){t=n;break}e=e.slice(t)}for(;s<e.length;){const t=e.charCodeAt(s++);s>=e.length&&(i=1);const r=e.charCodeAt(s++);s>=e.length&&(a=1);const c=e.charCodeAt(s++),u=t>>2,h=(3&t)<<4|r>>4;let d=(15&r)<<2|c>>6,m=63&c;1===i?d=m=64:1===a&&(m=64),o+=n?64===d?`${l.charAt(u)}${l.charAt(h)}`:64===m?`${l.charAt(u)}${l.charAt(h)}${l.charAt(d)}`:`${l.charAt(u)}${l.charAt(h)}${l.charAt(d)}${l.charAt(m)}`:`${l.charAt(u)}${l.charAt(h)}${l.charAt(d)}${l.charAt(m)}`}return o}function g(e,t=!1,n=!1){const r=t?f:m;function s(e){for(let t=0;t<64;t++)if(r.charAt(t)===e)return t;return 64}function i(e){return 64===e?0:e}let a=0,o="";for(;a<e.length;){const t=s(e.charAt(a++)),n=a>=e.length?0:s(e.charAt(a++)),r=a>=e.length?0:s(e.charAt(a++)),l=a>=e.length?0:s(e.charAt(a++)),c=i(t)<<2|i(n)>>4,u=(15&i(n))<<4|i(r)>>2,h=(3&i(r))<<6|i(l);o+=String.fromCharCode(c),64!==r&&(o+=String.fromCharCode(u)),64!==l&&(o+=String.fromCharCode(h))}if(n){let e=-1;for(let t=o.length-1;t>=0;t--)if(0!==o.charCodeAt(t)){e=t;break}o=-1!==e?o.slice(0,e+1):""}return o}function b(e){let t="";const n=new Uint8Array(e);for(const e of n)t+=String.fromCharCode(e);return t}function y(e){const t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return n}const v=Math.log(2);function w(e){const t=Math.log(e)/v,n=Math.floor(t),r=Math.round(t);return n===r?n:r}function S(e,t){for(const n of t)delete e[n]}},4175:(e,t,n)=>{var r=n(7529),s=n(251),i=n(4470),a=n(6910),o=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var n={};return 0===e.length?this:(n.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var n={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},l.prototype.push=function(e){var t=this.ops.length,n=this.ops[t-1];if(e=i(!0,{},e),"object"==typeof n){if("number"==typeof e.delete&&"number"==typeof n.delete)return this.ops[t-1]={delete:n.delete+e.delete},this;if("number"==typeof n.delete&&null!=e.insert&&(t-=1,"object"!=typeof(n=this.ops[t-1])))return this.ops.unshift(e),this;if(s(e.attributes,n.attributes)){if("string"==typeof e.insert&&"string"==typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],n=[];return this.forEach((function(r){(e(r)?t:n).push(r)})),[t,n]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+a.length(t):t.delete?e-t.delete:e}),0)},l.prototype.length=function(){return this.reduce((function(e,t){return e+a.length(t)}),0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var n=[],r=a.iterator(this.ops),s=0;s<t&&r.hasNext();){var i;s<e?i=r.next(e-s):(i=r.next(t-s),n.push(i)),s+=a.length(i)}return new l(n)},l.prototype.compose=function(e){var t=a.iterator(this.ops),n=a.iterator(e.ops),r=[],i=n.peek();if(null!=i&&"number"==typeof i.retain&&null==i.attributes){for(var o=i.retain;"insert"===t.peekType()&&t.peekLength()<=o;)o-=t.peekLength(),r.push(t.next());i.retain-o>0&&n.next(i.retain-o)}for(var c=new l(r);t.hasNext()||n.hasNext();)if("insert"===n.peekType())c.push(n.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),n.peekLength()),h=t.next(u),d=n.next(u);if("number"==typeof d.retain){var m={};"number"==typeof h.retain?m.retain=u:m.insert=h.insert;var f=a.attributes.compose(h.attributes,d.attributes,"number"==typeof h.retain);if(f&&(m.attributes=f),c.push(m),!n.hasNext()&&s(c.ops[c.ops.length-1],m)){var p=new l(t.rest());return c.concat(p).chop()}}else"number"==typeof d.delete&&"number"==typeof h.retain&&c.push(d)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var n=[this,e].map((function(t){return t.map((function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:o;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),i=new l,c=r(n[0],n[1],t),u=a.iterator(this.ops),h=a.iterator(e.ops);return c.forEach((function(e){for(var t=e[1].length;t>0;){var n=0;switch(e[0]){case r.INSERT:n=Math.min(h.peekLength(),t),i.push(h.next(n));break;case r.DELETE:n=Math.min(t,u.peekLength()),u.next(n),i.delete(n);break;case r.EQUAL:n=Math.min(u.peekLength(),h.peekLength(),t);var o=u.next(n),l=h.next(n);s(o.insert,l.insert)?i.retain(n,a.attributes.diff(o.attributes,l.attributes)):i.push(l).delete(n)}t-=n}})),i.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var n=a.iterator(this.ops),r=new l,s=0;n.hasNext();){if("insert"!==n.peekType())return;var i=n.peek(),o=a.length(i)-n.peekLength(),c="string"==typeof i.insert?i.insert.indexOf(t,o)-o:-1;if(c<0)r.push(n.next());else if(c>0)r.push(n.next(c));else{if(!1===e(r,n.next(1).attributes||{},s))return;s+=1,r=new l}}r.length()>0&&e(r,{},s)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var n=a.iterator(this.ops),r=a.iterator(e.ops),s=new l;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!t&&"insert"===r.peekType())if("insert"===r.peekType())s.push(r.next());else{var i=Math.min(n.peekLength(),r.peekLength()),o=n.next(i),c=r.next(i);if(o.delete)continue;c.delete?s.push(c):s.retain(i,a.attributes.transform(o.attributes,c.attributes,t))}else s.retain(a.length(n.next()));return s.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var n=a.iterator(this.ops),r=0;n.hasNext()&&r<=e;){var s=n.peekLength(),i=n.peekType();n.next(),"delete"!==i?("insert"===i&&(r<e||!t)&&(e+=s),r+=s):e-=Math.min(s,e-r)}return e},e.exports=l},6910:(e,t,n)=>{var r=n(251),s=n(4470),i={attributes:{compose:function(e,t,n){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=s(!0,{},t);for(var i in n||(r=Object.keys(r).reduce((function(e,t){return null!=r[t]&&(e[t]=r[t]),e}),{})),e)void 0!==e[i]&&void 0===t[i]&&(r[i]=e[i]);return Object.keys(r).length>0?r:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=Object.keys(e).concat(Object.keys(t)).reduce((function(n,s){return r(e[s],t[s])||(n[s]=void 0===t[s]?null:t[s]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(e,t,n){if("object"!=typeof e)return t;if("object"==typeof t){if(!n)return t;var r=Object.keys(t).reduce((function(n,r){return void 0===e[r]&&(n[r]=t[r]),n}),{});return Object.keys(r).length>0?r:void 0}}},iterator:function(e){return new a(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function a(e){this.ops=e,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var n=this.offset,r=i.length(t);if(e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var s={};return t.attributes&&(s.attributes=t.attributes),"number"==typeof t.retain?s.retain=e:"string"==typeof t.insert?s.insert=t.insert.substr(n,e):s.insert=t.insert,s}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?i.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(r)}return[]},e.exports=i},8299:()=>{let e=document.createElement("div");if(e.classList.toggle("test-class",!1),e.classList.contains("test-class")){let e=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,n){return arguments.length>1&&!this.contains(t)==!n?n:e.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,s=arguments[1],i=0;i<r;i++)if(t=n[i],e.call(s,t,i,n))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},3964:(e,t,n)=>{e.exports={align:{"":n(8253),center:n(2598),right:n(6573),justify:n(7840)},background:n(776),blockquote:n(8278),bold:n(6123),clean:n(413),code:n(6137),"code-block":n(6137),color:n(408),direction:{"":n(3111),rtl:n(2311)},float:{center:n(5783),full:n(287),left:n(6287),right:n(2095)},formula:n(1400),header:{1:n(7618),2:n(8520)},italic:n(3805),image:n(3407),indent:{"+1":n(5226),"-1":n(8018)},link:n(3495),list:{ordered:n(4965),bullet:n(9908),check:n(5805)},script:{sub:n(2613),super:n(174)},strike:n(3521),underline:n(3876),video:n(6009)}},3697:(e,t,n)=>{"use strict";var r=n(5972).functionsHaveConfigurableNames(),s=Object,i=TypeError;e.exports=function(){if(null!=this&&this!==s(this))throw new i("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},r&&Object.defineProperty&&Object.defineProperty(e.exports,"name",{value:"get flags"})},2847:(e,t,n)=>{"use strict";var r=n(4289),s=n(5559),i=n(3697),a=n(1721),o=n(2753),l=s(a());r(l,{getPolyfill:a,implementation:i,shim:o}),e.exports=l},1721:(e,t,n)=>{"use strict";var r=n(3697),s=n(4289).supportsDescriptors,i=Object.getOwnPropertyDescriptor;e.exports=function(){if(s&&"gim"===/a/gim.flags){var e=i(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var t="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(n,"sticky",{get:function(){t+="y"}}),"dy"===t)return e.get}}return r}},2753:(e,t,n)=>{"use strict";var r=n(4289).supportsDescriptors,s=n(1721),i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=TypeError,l=Object.getPrototypeOf,c=/a/;e.exports=function(){if(!r||!l)throw new o("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=s(),t=l(c),n=i(t,"flags");return n&&n.get===e||a(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],o=0;o<e.length;o++){var l=e[o],c=r.base?l[0]+r.base:l[0],u=i[c]||0,h="".concat(c," ").concat(u);i[c]=u+1;var d=n(h),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(m);else{var f=s(m,r);r.byIndex=o,t.splice(o,0,{identifier:h,updater:f,references:1})}a.push(h)}return a}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var i=r(e=e||[],s=s||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var o=n(i[a]);t[o].references--}for(var l=r(e,s),c=0;c<i.length;c++){var u=n(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2598:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line></svg>'},7840:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"></line><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"></line></svg>'},8253:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line></svg>'},6573:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line></svg>'},776:e=>{e.exports='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon><rect height="1" width="1" x="4" y="4"></rect><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon><rect height="1" width="1" x="2" y="6"></rect><rect height="1" width="1" x="3" y="5"></rect><rect height="1" width="1" x="4" y="7"></rect><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon><rect height="1" width="1" x="2" y="12"></rect><rect height="1" width="1" x="2" y="9"></rect><rect height="1" width="1" x="2" y="15"></rect><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon><rect height="1" width="1" x="3" y="8"></rect><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"></path><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"></path><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"></path><rect height="1" width="1" x="12" y="2"></rect><rect height="1" width="1" x="11" y="3"></rect><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"></path><rect height="1" width="1" x="2" y="3"></rect><rect height="1" width="1" x="6" y="2"></rect><rect height="1" width="1" x="3" y="2"></rect><rect height="1" width="1" x="5" y="3"></rect><rect height="1" width="1" x="9" y="2"></rect><rect height="1" width="1" x="15" y="14"></rect><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon><rect height="1" width="1" x="13" y="7"></rect><rect height="1" width="1" x="15" y="5"></rect><rect height="1" width="1" x="14" y="6"></rect><rect height="1" width="1" x="15" y="8"></rect><rect height="1" width="1" x="14" y="9"></rect><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"></path><rect height="1" width="1" x="14" y="3"></rect><polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon><rect height="1" width="1" x="15" y="2"></rect><rect height="1" width="1" x="12" y="5"></rect><rect height="1" width="1" x="13" y="4"></rect><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon><rect height="1" width="1" x="9" y="14"></rect><rect height="1" width="1" x="8" y="15"></rect><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"></path><rect height="1" width="1" x="5" y="15"></rect><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"></path><rect height="1" width="1" x="11" y="15"></rect><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"></path><rect height="1" width="1" x="14" y="15"></rect><rect height="1" width="1" x="15" y="11"></rect></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"></polyline><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"></line></svg>'},8278:e=>{e.exports='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"></rect><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"></rect><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"></path><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"></path></svg>'},6123:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"></path><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"></path></svg>'},413:e=>{e.exports='<svg class viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"></line><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"></line><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"></line><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"></line><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"></rect></svg>'},6137:e=>{e.exports='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"></line></svg>'},408:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"></line><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"></polyline><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"></line></svg>'},3111:e=>{e.exports='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"></line><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"></path><rect class="ql-fill" height="11" width="1" x="11" y="4"></rect><rect class="ql-fill" height="11" width="1" x="13" y="4"></rect></svg>'},2311:e=>{e.exports='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"></line><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"></path><rect class="ql-fill" height="11" width="1" x="5" y="4"></rect><rect class="ql-fill" height="11" width="1" x="7" y="4"></rect></svg>'},3638:e=>{e.exports='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"></polygon><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"></polygon></svg>'},5783:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z"></path><path class="ql-fill" d="M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z"></path><rect class="ql-fill" x="3" y="6" width="12" height="6" rx="1" ry="1"></rect></svg>'},287:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z"></path><path class="ql-fill" d="M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z"></path><rect class="ql-fill" x="2" y="6" width="14" height="6" rx="1" ry="1"></rect></svg>'},6287:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z"></path><path class="ql-fill" d="M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z"></path><path class="ql-fill" d="M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z"></path><path class="ql-fill" d="M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z"></path><rect class="ql-fill" x="2" y="6" width="8" height="6" rx="1" ry="1"></rect></svg>'},2095:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z"></path><path class="ql-fill" d="M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z"></path><path class="ql-fill" d="M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z"></path><path class="ql-fill" d="M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z"></path><rect class="ql-fill" x="8" y="6" width="8" height="6" rx="1" ry="1" transform="translate(24 18) rotate(-180)"></rect></svg>'},1400:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"></path><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"></rect><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"></path></svg>'},8520:e=>{e.exports='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"></path></svg>'},7618:e=>{e.exports='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"></path></svg>'},3407:e=>{e.exports='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"></rect><circle class="ql-fill" cx="6" cy="7" r="1"></circle><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline></svg>'},5226:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"></line><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"></line><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"></line><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline></svg>'},3805:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"></line><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"></line><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"></line></svg>'},3495:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"></line><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"></path><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"></path></svg>'},9908:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"></line><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"></line><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"></line><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"></line><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"></line><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"></line></svg>'},5805:e=>{e.exports='<svg class viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"></line><polyline class="ql-stroke" points="3 4 4 5 6 3"></polyline><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"></line><polyline class="ql-stroke" points="3 14 4 15 6 13"></polyline><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"></line><polyline class="ql-stroke" points="3 9 4 10 6 8"></polyline></svg>'},4965:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"></line><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"></line><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"></line><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"></line><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"></path><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"></path><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"></path></svg>'},8018:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"></line><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"></line><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"></line><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"></polyline></svg>'},3521:e=>{e.exports='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"></line><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"></path><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"></path></svg>'},2613:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"></path><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"></path></svg>'},174:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"></path><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"></path></svg>'},3876:e=>{e.exports='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"></path><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"></rect></svg>'},6009:e=>{e.exports='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"></rect><rect class="ql-fill" height="12" width="1" x="5" y="3"></rect><rect class="ql-fill" height="12" width="1" x="12" y="3"></rect><rect class="ql-fill" height="2" width="8" x="5" y="8"></rect><rect class="ql-fill" height="1" width="3" x="3" y="5"></rect><rect class="ql-fill" height="1" width="3" x="3" y="7"></rect><rect class="ql-fill" height="1" width="3" x="3" y="10"></rect><rect class="ql-fill" height="1" width="3" x="3" y="12"></rect><rect class="ql-fill" height="1" width="3" x="12" y="5"></rect><rect class="ql-fill" height="1" width="3" x="12" y="7"></rect><rect class="ql-fill" height="1" width="3" x="12" y="10"></rect><rect class="ql-fill" height="1" width="3" x="12" y="12"></rect></svg>'},7818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5029),s=function(){function e(e,t,n){void 0===n&&(n={}),this.attrName=e,this.keyName=t;var s=r.Scope.TYPE&r.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&r.Scope.LEVEL|s:this.scope=r.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=r.query(e,r.Scope.BLOT&(this.scope|r.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=s},9945:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function i(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf("".concat(t,"-"))}))}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add("".concat(this.keyName,"-").concat(t)),!0)},t.prototype.remove=function(e){i(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(i(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(n(7818).default);t.default=a},5178:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7818),s=n(9945),i=n(9965),a=n(5029),o=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=r.default.keys(this.domNode),n=s.default.keys(this.domNode),o=i.default.keys(this.domNode);t.concat(n).concat(o).forEach((function(t){var n=a.query(t,a.Scope.ATTRIBUTE);n instanceof r.default&&(e.attributes[n.attrName]=n)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(n){var r=t.attributes[n].value(t.domNode);e.format(n,r)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,n){return t[n]=e.attributes[n].value(e.domNode),t}),{})},e}();t.default=o},9965:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function i(e){var t=e.split("-"),n=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+n}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[i(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""},t}(n(7818).default);t.default=a},6471:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(1792),a=n(4743),o=n(5029),l=function(e){function t(t){var n=e.call(this,t)||this;return n.build(),n}return s(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var n=c(t);e.insertBefore(n,e.children.head||void 0)}catch(e){if(e instanceof o.ParchmentError)return;throw e}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,n){e.deleteAt(t,n)}))},t.prototype.descendant=function(e,n){var r=this.children.find(n),s=r[0],i=r[1];return null==e.blotName&&e(s)||null!=e.blotName&&s instanceof e?[s,i]:s instanceof t?s.descendant(e,i):[null,-1]},t.prototype.descendants=function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=Number.MAX_VALUE);var s=[],i=r;return this.children.forEachAt(n,r,(function(n,r,a){(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&s.push(n),n instanceof t&&(s=s.concat(n.descendants(e,r,i))),i-=a})),s},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,n,r){this.children.forEachAt(e,t,(function(e,t,s){e.formatAt(t,s,n,r)}))},t.prototype.insertAt=function(e,t,n){var r=this.children.find(e),s=r[0],i=r[1];if(s)s.insertAt(i,t,n);else{var a=null==n?o.create("text",t):o.create(t,n);this.appendChild(a)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new o.ParchmentError("Cannot insert ".concat(e.statics.blotName," into ").concat(this.statics.blotName));e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(n){e.insertBefore(n,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var n=o.create(this.statics.defaultChild);this.appendChild(n),n.optimize(t)}else this.remove()},t.prototype.path=function(e,n){void 0===n&&(n=!1);var r=this.children.find(e,n),s=r[0],i=r[1],a=[[this,e]];return s instanceof t?a.concat(s.path(i,n)):(null!=s&&a.push([s,i]),a)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),e.prototype.replace.call(this,n)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(e,this.length(),(function(e,r,s){e=e.split(r,t),n.appendChild(e)})),n},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var n=this,r=[],s=[];e.forEach((function(e){e.target===n.domNode&&"childList"===e.type&&(r.push.apply(r,e.addedNodes),s.push.apply(s,e.removedNodes))})),s.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=o.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==n.domNode||t.detach())}})),r.filter((function(e){return e.parentNode==n.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=o.find(e.nextSibling));var r=c(e);r.next==t&&null!=r.next||(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,t||void 0))}))},t}(a.default);function c(e){var t=o.find(e);if(null==t)try{t=o.create(e)}catch(n){t=o.create(o.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},2565:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(7818),a=n(5178),o=n(6471),l=n(5029),c=function(e){function t(t){var n=e.call(this,t)||this;return n.attributes=new a.default(n.domNode),n}return s(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var n=l.query(e);n instanceof i.default?this.attributes.attribute(n,t):t&&(null==n||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,n){var r=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(r),r},t.prototype.update=function(t,n){var r=this;e.prototype.update.call(this,t,n),t.some((function(e){return e.target===r.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(n,r){var s=e.prototype.wrap.call(this,n,r);return s instanceof t&&s.statics.scope===this.statics.scope&&this.attributes.move(s),s},t}(o.default);t.default=c},6997:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(4743),a=n(5029),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=a.Scope.INLINE_BLOT,t}(i.default);t.default=o},4743:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5029),s=function(){function e(e){this.domNode=e,this.domNode[r.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!1,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new r.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return r.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[r.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,n,s){var i=this.isolate(e,t);if(null!=r.query(n,r.Scope.BLOT)&&s)i.wrap(n,s);else if(null!=r.query(n,r.Scope.ATTRIBUTE)){var a=r.create(this.statics.scope);i.wrap(a),a.format(n,s)}},e.prototype.insertAt=function(e,t,n){var s=null==n?r.create("text",t):r.create(t,n),i=this.split(e);this.parent.insertBefore(s,i)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var n=null;e.children.insertBefore(this,t),null!=t&&(n=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==n||e.domNode.insertBefore(this.domNode,n),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var n=this.split(e);return n.split(t),n},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[r.DATA_KEY]&&delete this.domNode[r.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var n="string"==typeof e?r.create(e,t):e;return n.replace(this),n},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var n="string"==typeof e?r.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},e.blotName="abstract",e}();t.default=s},185:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(2565),a=n(5029),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(n){var r=a.query(t.blotName).tagName;if(n.tagName!==r)return e.formats.call(this,n)},t.prototype.format=function(n,r){null!=a.query(n,a.Scope.BLOCK)&&(n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,n,r,s){null!=a.query(r,a.Scope.BLOCK)?this.format(r,s):e.prototype.formatAt.call(this,t,n,r,s)},t.prototype.insertAt=function(t,n,r){if(null==r||null!=a.query(n,a.Scope.INLINE))e.prototype.insertAt.call(this,t,n,r);else{var s=this.split(t),i=a.create(n,r);s.parent.insertBefore(i,s)}},t.prototype.update=function(t,n){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,n)},t.blotName="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="P",t}(i.default);t.default=o},4007:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(e){},t.prototype.format=function(t,n){e.prototype.formatAt.call(this,0,this.length(),t,n)},t.prototype.formatAt=function(t,n,r,s){0===t&&n===this.length()?this.format(r,s):e.prototype.formatAt.call(this,t,n,r,s)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(n(6997).default);t.default=i},9829:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(2565),a=n(5029),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(n){if(n.tagName!==t.tagName)return e.formats.call(this,n)},t.prototype.format=function(n,r){var s=this;n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):(this.children.forEach((function(e){e instanceof i.default||(e=e.wrap(t.blotName,!0)),s.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,n,r,s){null!=this.formats()[r]||a.query(r,a.Scope.ATTRIBUTE)?this.isolate(t,n).format(r,s):e.prototype.formatAt.call(this,t,n,r,s)},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var s=this.next;s instanceof t&&s.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}(r,s.formats())&&(s.moveChildren(this),s.remove())},t.blotName="inline",t.scope=a.Scope.INLINE_BLOT,t.tagName="SPAN",t}(i.default);t.default=o},8746:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(6471),a=n(5029),o={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var n=e.call(this,t)||this;return n.scroll=n,n.observer=new MutationObserver((function(e){n.update(e)})),n.observer.observe(n.domNode,o),n.attach(),n}return s(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,n){this.update(),0===t&&n===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,n)},t.prototype.formatAt=function(t,n,r,s){this.update(),e.prototype.formatAt.call(this,t,n,r,s)},t.prototype.insertAt=function(t,n,r){this.update(),e.prototype.insertAt.call(this,t,n,r)},t.prototype.optimize=function(t,n){var r=this;void 0===t&&(t=[]),void 0===n&&(n={}),e.prototype.optimize.call(this,n);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)t.push(s.pop());for(var o=function(e,t){void 0===t&&(t=!0),null!=e&&e!==r&&null!=e.domNode.parentNode&&(null==e.domNode[a.DATA_KEY].mutations&&(e.domNode[a.DATA_KEY].mutations=[]),t&&o(e.parent))},l=function(e){null!=e.domNode[a.DATA_KEY]&&null!=e.domNode[a.DATA_KEY].mutations&&(e instanceof i.default&&e.children.forEach(l),e.optimize(n))},c=t,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(e){var t=a.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(o(a.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=a.find(e,!1);o(t,!1),t instanceof i.default&&t.children.forEach((function(e){o(e,!1)}))}))):"attributes"===e.type&&o(t.prev)),o(t))})),this.children.forEach(l),s=(c=[].slice.call(this.observer.takeRecords())).slice();s.length>0;)t.push(s.pop())}},t.prototype.update=function(t,n){var r=this;void 0===n&&(n={}),(t=t||this.observer.takeRecords()).map((function(e){var t=a.find(e.target,!0);return null==t?null:null==t.domNode[a.DATA_KEY].mutations?(t.domNode[a.DATA_KEY].mutations=[e],t):(t.domNode[a.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==r&&null!=e.domNode[a.DATA_KEY]&&e.update(e.domNode[a.DATA_KEY].mutations||[],n)})),null!=this.domNode[a.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,n),this.optimize(t,n)},t.blotName="scroll",t.defaultChild="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="DIV",t}(i.default);t.default=l},9961:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(6997),a=n(5029),o=function(e){function t(t){var n=e.call(this,t)||this;return n.text=n.statics.value(n.domNode),n}return s(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,n,r){null==r?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,n,r)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=a.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},t.prototype.update=function(e,t){var n=this;e.some((function(e){return"characterData"===e.type&&e.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=a.Scope.INLINE_BLOT,t}(i.default);t.default=o},1792:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,n=this.iterator();t=n();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,n=this.head;null!=n;){if(n===e)return t;t+=n.length(),n=n.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n,r=this.iterator();n=r();){var s=n.length();if(e<s||t&&e===s&&(null==n.next||0!==n.next.length()))return[n,e];e-=s}return[null,0]},e.prototype.forEach=function(e){for(var t,n=this.iterator();t=n();)e(t)},e.prototype.forEachAt=function(e,t,n){if(!(t<=0))for(var r,s=this.find(e),i=s[0],a=e-s[1],o=this.iterator(i);(r=o())&&a<e+t;){var l=r.length();e>a?n(r,e-a,Math.min(t,a+l-e)):n(r,0,Math.min(l,e+t-a)),a+=l}},e.prototype.map=function(e){return this.reduce((function(t,n){return t.push(e(n)),t}),[])},e.prototype.reduce=function(e,t){for(var n,r=this.iterator();n=r();)t=e(t,n);return t},e}();t.default=n},3355:(e,t,n)=>{"use strict";var r=n(6471),s=n(2565),i=n(6997),a=n(8746),o=n(9829),l=n(185),c=n(4007),u=n(9961),h=n(7818),d=n(9945),m=n(9965),f=n(5178),p=n(5029),g={Scope:p.Scope,create:p.create,find:p.find,query:p.query,register:p.register,Container:r.default,Format:s.default,Leaf:i.default,Embed:c.default,Scroll:a.default,Block:l.default,Inline:o.default,Text:u.default,Attributor:{Attribute:h.default,Class:d.default,Style:m.default,Store:f.default}};t.Z=g},5029:function(e,t){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.query=t.find=t.create=t.Scope=t.DATA_KEY=t.ParchmentError=void 0;var s=function(e){function t(t){var n=this;return t="[Parchment] "+t,(n=e.call(this,t)||this).message=t,n.name=n.constructor.name,n}return r(t,e),t}(Error);t.ParchmentError=s;var i,a={},o={},l={},c={};function u(e,t){var n;if(void 0===t&&(t=i.ANY),"string"==typeof e)n=c[e]||a[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)n=c.text;else if("number"==typeof e)e&i.LEVEL&i.BLOCK?n=c.block:e&i.LEVEL&i.INLINE&&(n=c.inline);else if(e instanceof HTMLElement){var r=(e.getAttribute("class")||"").split(/\s+/);for(var s in r)if(n=o[r[s]])break;n=n||l[e.tagName]}return null==n?null:t&i.LEVEL&n.scope&&t&i.TYPE&n.scope?n:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(i||(t.Scope=i={})),t.create=function(e,t){var n=u(e);if(null==n)throw new s("Unable to create ".concat(e," blot"));var r=n,i=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(t);return new r(i,t)},t.find=function e(n,r){return void 0===r&&(r=!1),null==n?null:null!=n[t.DATA_KEY]?n[t.DATA_KEY].blot:r?e(n.parentNode,r):null},t.query=u,t.register=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>1)return t.map((function(t){return e(t)}));var r=t[0];if("string"!=typeof r.blotName&&"string"!=typeof r.attrName)throw new s("Invalid definition");if("abstract"===r.blotName)throw new s("Cannot register abstract class");return c[r.blotName||r.attrName]=r,"string"==typeof r.keyName?a[r.keyName]=r:(null!=r.className&&(o[r.className]=r),null!=r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map((function(e){return e.toUpperCase()})):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach((function(e){null!=l[e]&&null!=r.className||(l[e]=r)})))),r}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e=n(3355),t=(n(8299),n(4175)),r=n.n(t),s=n(6910),i=n.n(s),a=n(4470),o=n.n(a);class l extends e.Z.Embed{static value(){}insertInto(e,t){0===e.children.length?super.insertInto(e,t):this.remove()}length(){return 0}value(){return""}}l.blotName="break",l.tagName="BR";const c=l;class u extends e.Z.Text{}const h=u;class d extends e.Z.Inline{static compare(e,t){let n=d.order.indexOf(e),r=d.order.indexOf(t);return n>=0||r>=0?n-r:e===t?0:e<t?-1:1}formatAt(t,n,r,s){if(d.compare(this.statics.blotName,r)<0&&e.Z.query(r,e.Z.Scope.BLOT)){let e=this.isolate(t,n);s&&e.wrap(r,s)}else super.formatAt(t,n,r,s)}optimize(e){if(super.optimize(e),this.parent instanceof d&&d.compare(this.statics.blotName,this.parent.statics.blotName)>0){let e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}d.allowedChildren=[d,e.Z.Embed,h],d.order=["cursor","inline","underline","strike","italic","bold","script","link","code"];const m=d;class f extends e.Z.Embed{attach(){super.attach(),this.attributes=new e.Z.Attributor.Store(this.domNode)}delta(){return(new(r())).insert(this.value(),o()(this.formats(),this.attributes.values()))}format(t,n){let r=e.Z.query(t,e.Z.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,n)}formatAt(e,t,n,r){this.format(n,r)}insertAt(t,n,r){if("string"==typeof n&&n.endsWith("\n")){let r=e.Z.create(p.blotName);this.parent.insertBefore(r,0===t?this:this.next),r.insertAt(0,n.slice(0,-1))}else super.insertAt(t,n,r)}}f.scope=e.Z.Scope.BLOCK_BLOT;class p extends e.Z.Block{constructor(e){super(e),this.cache={}}delta(){return null==this.cache.delta&&(this.cache.delta=this.descendants(e.Z.Leaf).reduce(((e,t)=>0===t.length()?e:e.insert(t.value(),g(t))),new(r())).insert("\n",g(this))),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(t,n,r,s){n<=0||(e.Z.query(r,e.Z.Scope.BLOCK)?t+n===this.length()&&this.format(r,s):super.formatAt(t,Math.min(n,this.length()-t-1),r,s),this.cache={})}insertAt(e,t,n){if(null!=n)return super.insertAt(e,t,n);if(0===t.length)return;let r=t.split("\n"),s=r.shift();s.length>0&&(e<this.length()-1||null==this.children.tail?super.insertAt(Math.min(e,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});let i=this;r.reduce((function(e,t){return i=i.split(e,!0),i.insertAt(0,t),t.length}),e+s.length)}insertBefore(e,t){let n=this.children.head;super.insertBefore(e,t),n instanceof c&&n.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e,t=!1){if(t&&(0===e||e>=this.length()-1)){let t=this.clone();return 0===e?(this.parent.insertBefore(t,this),this):(this.parent.insertBefore(t,this.next),t)}{let n=super.split(e,t);return this.cache={},n}}}function g(e,t={}){return null==e?t:("function"==typeof e.formats&&(t=o()(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:g(e.parent,t))}p.blotName="block",p.tagName="P",p.defaultChild="break",p.allowedChildren=[m,e.Z.Embed,h];class b extends m{}b.blotName="code",b.tagName="CODE";class y extends p{static create(e){let t=super.create(e);return t.setAttribute("spellcheck",!1),t}static formats(){return!0}delta(){let e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce(((e,t)=>e.insert(t).insert("\n",this.formats())),new(r()))}format(e,t){if(e===this.statics.blotName&&t)return;let[n]=this.descendant(h,this.length()-1);null!=n&&n.deleteAt(n.length()-1,1),super.format(e,t)}formatAt(t,n,r,s){if(0===n)return;if(null==e.Z.query(r,e.Z.Scope.BLOCK)||r===this.statics.blotName&&s===this.statics.formats(this.domNode))return;let i=this.newlineIndex(t);if(i<0||i>=t+n)return;let a=this.newlineIndex(t,!0)+1,o=i-a+1,l=this.isolate(a,o),c=l.next;l.format(r,s),c instanceof y&&c.formatAt(0,t-a+n-o,r,s)}insertAt(e,t,n){if(null!=n)return;let[r,s]=this.descendant(h,e);r.insertAt(s,t)}length(){let e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}newlineIndex(e,t=!1){if(t)return this.domNode.textContent.slice(0,e).lastIndexOf("\n");{let t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}}optimize(t){this.domNode.textContent.endsWith("\n")||this.appendChild(e.Z.create("text","\n")),super.optimize(t);let n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(t),n.moveChildren(this),n.remove())}replace(t){super.replace(t),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(t){let n=e.Z.find(t);null==n?t.parentNode.removeChild(t):n instanceof e.Z.Embed?n.remove():n.unwrap()}))}}y.blotName="code-block",y.tagName="PRE",y.TAB="  ";class v extends e.Z.Embed{static value(){}constructor(e,t){super(e),this.selection=t,this.textNode=document.createTextNode(v.CONTENTS),this.domNode.appendChild(this.textNode),this._length=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(t,n){if(0!==this._length)return super.format(t,n);let r=this,s=0;for(;null!=r&&r.statics.scope!==e.Z.Scope.BLOCK_BLOT;)s+=r.offset(r.parent),r=r.parent;null!=r&&(this._length=v.CONTENTS.length,r.optimize(),r.formatAt(s,v.CONTENTS.length,t,n),this._length=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this._length}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return;let t,n,r,s=this.textNode,i=this.selection.getNativeRange();for(null!=i&&i.start.node===s&&i.end.node===s&&([t,n,r]=[s,i.start.offset,i.end.offset]);null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==v.CONTENTS){let n=this.textNode.data.split(v.CONTENTS).join("");this.next instanceof h?(t=this.next.domNode,this.next.insertAt(0,n),this.textNode.data=v.CONTENTS):(this.textNode.data=n,this.parent.insertBefore(e.Z.create(this.textNode),this),this.textNode=document.createTextNode(v.CONTENTS),this.domNode.appendChild(this.textNode))}return this.remove(),null!=n?([n,r]=[n,r].map((function(e){return Math.max(0,Math.min(t.data.length,e-1))})),{startNode:t,startOffset:n,endNode:t,endOffset:r}):void 0}update(e,t){if(e.some((e=>"characterData"===e.type&&e.target===this.textNode))){let e=this.restore();e&&(t.range=e)}}value(){return""}}v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\ufeff";const w=v;var S=n(6313),q=n.n(S),k=n(251),A=n.n(k);const N=/^[ -~]*$/;function C(e,t){return Object.keys(t).reduce((function(n,r){return null==e[r]||(t[r]===e[r]?n[r]=t[r]:Array.isArray(t[r])?t[r].indexOf(e[r])<0&&(n[r]=t[r].concat([e[r]])):n[r]=[t[r],e[r]]),n}),{})}var x=n(6729),E=n.n(x);let B=["error","warn","log","info"],I="warn";function V(e,...t){B.indexOf(e)<=B.indexOf(I)&&console[e](...t)}function O(e){return B.reduce((function(t,n){return t[n]=V.bind(console,n,e),t}),{})}V.level=O.level=function(e){I=e};const H=O;let D=H("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,((...e)=>{[].slice.call(document.querySelectorAll(".ql-container")).forEach((t=>{t.__quill&&t.__quill.emitter&&t.__quill.emitter.handleDOM(...e)}))}))}));class P extends(E()){constructor(){super(),this.listeners={},this.on("error",D.error)}emit(){D.log.apply(D,arguments),super.emit.apply(this,arguments)}handleDOM(e,...t){(this.listeners[e.type]||[]).forEach((function({node:n,handler:r}){(e.target===n||n.contains(e.target))&&r(e,...t)}))}listenDOM(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:n})}}P.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},P.sources={API:"api",SILENT:"silent",USER:"user"};const T=P;class R{constructor(e,t={}){this.quill=e,this.options=t}}R.DEFAULTS={};const L=R;let U=H("quill:selection");class ${constructor(e,t=0){this.index=e,this.length=t}}class _{constructor(t,n){this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=e.Z.create("cursor",this),this.lastRange=this.savedRange=new $(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||setTimeout(this.update.bind(this,T.sources.USER),1)})),this.emitter.on(T.events.EDITOR_CHANGE,((e,t)=>{e===T.events.TEXT_CHANGE&&t.length()>0&&this.update(T.sources.SILENT)})),this.emitter.on(T.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;let e=this.getNativeRange();null!=e&&e.start.node!==this.cursor.textNode&&this.emitter.once(T.events.SCROLL_UPDATE,(()=>{try{this.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(e){}}))})),this.emitter.on(T.events.SCROLL_OPTIMIZE,((e,t)=>{if(t.range){const{startNode:e,startOffset:n,endNode:r,endOffset:s}=t.range;this.setNativeRange(e,n,r,s)}})),this.update(T.sources.SILENT)}handleComposition(){this.root.addEventListener("compositionstart",(()=>{this.composing=!0})),this.root.addEventListener("compositionend",(()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout((()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(T.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}format(t,n){if(null!=this.scroll.whitelist&&!this.scroll.whitelist[t])return;this.scroll.update();let r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!e.Z.query(t,e.Z.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){let t=e.Z.find(r.start.node,!1);if(null==t)return;if(t instanceof e.Z.Leaf){let e=t.split(r.start.offset);t.parent.insertBefore(this.cursor,e)}else t.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(t,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e,t=0){let n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;let r,[s,i]=this.scroll.leaf(e);if(null==s)return null;[r,i]=s.position(i,!0);let a=document.createRange();if(t>0)return a.setStart(r,i),[s,i]=this.scroll.leaf(e+t),null==s?null:([r,i]=s.position(i,!0),a.setEnd(r,i),a.getBoundingClientRect());{let e,t="left";return r instanceof Text?(i<r.data.length?(a.setStart(r,i),a.setEnd(r,i+1)):(a.setStart(r,i-1),a.setEnd(r,i),t="right"),e=a.getBoundingClientRect()):(e=s.domNode.getBoundingClientRect(),i>0&&(t="right")),{bottom:e.top+e.height,height:e.height,left:e[t],right:e[t],top:e.top,width:0}}}getNativeRange(){let e=document.getSelection();if(null==e||e.rangeCount<=0)return null;let t=e.getRangeAt(0);if(null==t)return null;let n=this.normalizeNative(t);return U.info("getNativeRange",n),n}getRange(){let e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root}normalizedToRange(t){let n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);let r=n.map((t=>{let[n,r]=t,s=e.Z.find(n,!0),i=s.offset(this.scroll);return 0===r?i:s instanceof e.Z.Container?i+s.length():i+s.index(n,r)})),s=Math.min(Math.max(...r),this.scroll.length()-1),i=Math.min(s,...r);return new $(i,s-i)}normalizeNative(e){if(!j(this.root,e.startContainer)||!e.collapsed&&!j(this.root,e.endContainer))return null;let t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){let t=e.node,n=e.offset;for(;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else{if(t.childNodes.length!==n)break;t=t.lastChild,n=t instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=n})),t}rangeToNative(e){let t=e.collapsed?[e.index]:[e.index,e.index+e.length],n=[],r=this.scroll.length();return t.forEach(((e,t)=>{e=Math.min(r-1,e);let s,[i,a]=this.scroll.leaf(e);[s,a]=i.position(a,0!==t),n.push(s,a)})),n.length<2&&(n=n.concat(n)),n}scrollIntoView(e){let t=this.lastRange;if(null==t)return;let n=this.getBounds(t.index,t.length);if(null==n)return;let r=this.scroll.length()-1,[s]=this.scroll.line(Math.min(t.index,r)),i=s;if(t.length>0&&([i]=this.scroll.line(Math.min(t.index+t.length,r))),null==s||null==i)return;let a=e.getBoundingClientRect();n.top<a.top?e.scrollTop-=a.top-n.top:n.bottom>a.bottom&&(e.scrollTop+=n.bottom-a.bottom)}setNativeRange(e,t,n=e,r=t,s=!1){if(U.info("setNativeRange",e,t,n,r),null!=e&&(null==this.root.parentNode||null==e.parentNode||null==n.parentNode))return;let i=document.getSelection();if(null!=i)if(null!=e){this.hasFocus()||this.root.focus();let a=(this.getNativeRange()||{}).native;if(null==a||s||e!==a.startContainer||t!==a.startOffset||n!==a.endContainer||r!==a.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==n.tagName&&(r=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);let s=document.createRange();s.setStart(e,t),s.setEnd(n,r),i.removeAllRanges(),i.addRange(s)}}else i.removeAllRanges(),this.root.blur(),document.body.focus()}setRange(e,t=!1,n=T.sources.API){if("string"==typeof t&&(n=t,t=!1),U.info("setRange",e),null!=e){let n=this.rangeToNative(e);this.setNativeRange(...n,t)}else this.setNativeRange(null);this.update(n)}update(e=T.sources.USER){let t=this.lastRange,[n,r]=this.getRange();if(this.lastRange=n,null!=this.lastRange&&(this.savedRange=this.lastRange),!A()(t,this.lastRange)){!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore();let n=[T.events.SELECTION_CHANGE,q()(this.lastRange),q()(t),e];this.emitter.emit(T.events.EDITOR_CHANGE,...n),e!==T.sources.SILENT&&this.emitter.emit(...n)}}}function j(e,t){try{t.parentNode}catch(e){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}class M{constructor(e,t){this.quill=e,this.options=t,this.modules={}}init(){Object.keys(this.options.modules).forEach((e=>{null==this.modules[e]&&this.addModule(e)}))}addModule(e){let t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}M.DEFAULTS={modules:{}},M.themes={default:M};const K=M;let J=H("quill");class F{static debug(e){!0===e&&(e="log"),H.level(e)}static find(t){return t.__quill||e.Z.find(t)}static import(e){return null==this.imports[e]&&J.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(t,n,r=!1){if("string"!=typeof t){let e=t.attrName||t.blotName;"string"==typeof e?this.register("formats/"+e,t,n):Object.keys(t).forEach((e=>{this.register(e,t[e],n)}))}else null==this.imports[t]||r||J.warn(`Overwriting ${t} with`,n),this.imports[t]=n,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==n.blotName?e.Z.register(n):t.startsWith("modules")&&"function"==typeof n.register&&n.register()}constructor(t,n={}){if(this.options=function(e,t){if((t=o()(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==F.DEFAULTS.theme){if(t.theme=F.import(`themes/${t.theme}`),null==t.theme)throw new Error(`Invalid theme ${t.theme}. Did you register it?`)}else t.theme=K;let n=o()(!0,{},t.theme.DEFAULTS);[n,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));let r=Object.keys(n.modules).concat(Object.keys(t.modules)).reduce((function(e,t){let n=F.import(`modules/${t}`);return null==n?J.error(`Cannot load ${t} module. Are you sure you registered it?`):e[t]=n.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=o()(!0,{},F.DEFAULTS,{modules:r},n,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,n){return t.modules[n]&&(e[n]=t.modules[n]),e}),{}),t}(t,n),this.container=this.options.container,null==this.container)return J.error("Invalid Quill container",t);this.options.debug&&F.debug(this.options.debug);let s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new T,this.scroll=e.Z.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new class{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(t){let n=!1;this.scroll.update();let s=this.scroll.length();return this.scroll.batchStart(),(t=function(e){return e.reduce((function(e,t){if(1===t.insert){let n=q()(t.attributes);return delete n.image,e.insert({image:t.attributes.image},n)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=q()(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){let n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)}),new(r()))}(t)).reduce(((t,r)=>{let a=r.retain||r.delete||r.insert.length||1,l=r.attributes||{};if(null!=r.insert){if("string"==typeof r.insert){let a=r.insert;a.endsWith("\n")&&n&&(n=!1,a=a.slice(0,-1)),t>=s&&!a.endsWith("\n")&&(n=!0),this.scroll.insertAt(t,a);let[c,u]=this.scroll.line(t),h=o()({},g(c));if(c instanceof p){let[t]=c.descendant(e.Z.Leaf,u);h=o()(h,g(t))}l=i().attributes.diff(h,l)||{}}else if("object"==typeof r.insert){let e=Object.keys(r.insert)[0];if(null==e)return t;this.scroll.insertAt(t,e,r.insert[e])}s+=a}return Object.keys(l).forEach((e=>{this.scroll.formatAt(t,a,e,l[e])})),t+a}),0),t.reduce(((e,t)=>"number"==typeof t.delete?(this.scroll.deleteAt(e,t.delete),e):e+(t.retain||t.insert.length||1)),0),this.scroll.batchEnd(),this.update(t)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update((new(r())).retain(e).delete(t))}formatLine(e,t,n={}){return this.scroll.update(),Object.keys(n).forEach((r=>{if(null!=this.scroll.whitelist&&!this.scroll.whitelist[r])return;let s=this.scroll.lines(e,Math.max(t,1)),i=t;s.forEach((t=>{let s=t.length();if(t instanceof y){let s=e-t.offset(this.scroll),a=t.newlineIndex(s+i)-s+1;t.formatAt(s,a,r,n[r])}else t.format(r,n[r]);i-=s}))})),this.scroll.optimize(),this.update((new(r())).retain(e).retain(t,q()(n)))}formatText(e,t,n={}){return Object.keys(n).forEach((r=>{this.scroll.formatAt(e,t,r,n[r])})),this.update((new(r())).retain(e).retain(t,q()(n)))}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce(((e,t)=>e.concat(t.delta())),new(r()))}getFormat(t,n=0){let r=[],s=[];0===n?this.scroll.path(t).forEach((function(t){let[n]=t;n instanceof p?r.push(n):n instanceof e.Z.Leaf&&s.push(n)})):(r=this.scroll.lines(t,n),s=this.scroll.descendants(e.Z.Leaf,t,n));let i=[r,s].map((function(e){if(0===e.length)return{};let t=g(e.shift());for(;Object.keys(t).length>0;){let n=e.shift();if(null==n)return t;t=C(g(n),t)}return t}));return o().apply(o(),i)}getText(e,t){return this.getContents(e,t).filter((function(e){return"string"==typeof e.insert})).map((function(e){return e.insert})).join("")}insertEmbed(e,t,n){return this.scroll.insertAt(e,t,n),this.update((new(r())).retain(e).insert({[t]:n}))}insertText(e,t,n={}){return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach((r=>{this.scroll.formatAt(e,t.length,r,n[r])})),this.update((new(r())).retain(e).insert(t,q()(n)))}isBlank(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;let e=this.scroll.children.head;return e.statics.blotName===p.blotName&&!(e.children.length>1)&&e.children.head instanceof c}removeFormat(e,t){let n=this.getText(e,t),[s,i]=this.scroll.line(e+t),a=0,o=new(r());null!=s&&(a=s instanceof y?s.newlineIndex(i)-i+1:s.length()-i,o=s.delta().slice(i,i+a-1).insert("\n"));let l=this.getContents(e,t+a).diff((new(r())).insert(n).concat(o)),c=(new(r())).retain(e).concat(l);return this.applyDelta(c)}update(t,n=[],s=void 0){let i=this.delta;if(1===n.length&&"characterData"===n[0].type&&n[0].target.data.match(N)&&e.Z.find(n[0].target)){let a=e.Z.find(n[0].target),o=g(a),l=a.offset(this.scroll),c=n[0].oldValue.replace(w.CONTENTS,""),u=(new(r())).insert(c),h=(new(r())).insert(a.value());t=(new(r())).retain(l).concat(u.diff(h,s)).reduce((function(e,t){return t.insert?e.insert(t.insert,o):e.push(t)}),new(r())),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&A()(i.compose(t),this.delta)||(t=i.diff(this.delta,s));return t}}(this.scroll),this.selection=new _(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(T.events.EDITOR_CHANGE,(e=>{e===T.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(T.events.SCROLL_UPDATE,((e,t)=>{let n=this.selection.lastRange,r=n&&0===n.length?n.index:void 0;z.call(this,(()=>this.editor.update(null,t,r)),e)}));let a=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">${s}<p><br></p></div>`);this.setContents(a),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}addContainer(e,t=null){if("string"==typeof e){let t=e;(e=document.createElement("div")).classList.add(t)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,n){return[e,t,,n]=W(e,t,n),z.call(this,(()=>this.editor.deleteText(e,t)),n,e,-1*t)}disable(){this.enable(!1)}enable(e=!0){this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}format(t,n,s=T.sources.API){return z.call(this,(()=>{let s=this.getSelection(!0),i=new(r());if(null==s)return i;if(e.Z.query(t,e.Z.Scope.BLOCK))i=this.editor.formatLine(s.index,s.length,{[t]:n});else{if(0===s.length)return this.selection.format(t,n),i;i=this.editor.formatText(s.index,s.length,{[t]:n})}return this.setSelection(s,T.sources.SILENT),i}),s)}formatLine(e,t,n,r,s){let i;return[e,t,i,s]=W(e,t,n,r,s),z.call(this,(()=>this.editor.formatLine(e,t,i)),s,e,0)}formatText(e,t,n,r,s){let i;return[e,t,i,s]=W(e,t,n,r,s),z.call(this,(()=>this.editor.formatText(e,t,i)),s,e,0)}getBounds(e,t=0){let n;n="number"==typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);let r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}getContents(e=0,t=this.getLength()-e){return[e,t]=W(e,t),this.editor.getContents(e,t)}getFormat(e=this.getSelection(!0),t=0){return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(e=0,t=Number.MAX_VALUE){return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(e=!1){return e&&this.focus(),this.update(),this.selection.getRange()[0]}getText(e=0,t=this.getLength()-e){return[e,t]=W(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,n,r=F.sources.API){return z.call(this,(()=>this.editor.insertEmbed(e,t,n)),r,e)}insertText(e,t,n,r,s){let i;return[e,,i,s]=W(e,0,n,r,s),z.call(this,(()=>this.editor.insertText(e,t,i)),s,e,t.length)}isEnabled(){return!this.container.classList.contains("ql-disabled")}off(){return this.emitter.off.apply(this.emitter,arguments)}on(){return this.emitter.on.apply(this.emitter,arguments)}once(){return this.emitter.once.apply(this.emitter,arguments)}pasteHTML(e,t,n){this.clipboard.dangerouslyPasteHTML(e,t,n)}removeFormat(e,t,n){return[e,t,,n]=W(e,t,n),z.call(this,(()=>this.editor.removeFormat(e,t)),n,e)}scrollIntoView(){this.selection.scrollIntoView(this.scrollingContainer)}setContents(e,t=T.sources.API){return z.call(this,(()=>{e=new(r())(e);let t=this.getLength(),n=this.editor.deleteText(0,t),s=this.editor.applyDelta(e),i=s.ops[s.ops.length-1];return null!=i&&"string"==typeof i.insert&&"\n"===i.insert[i.insert.length-1]&&(this.editor.deleteText(this.getLength()-1,1),s.delete(1)),n.compose(s)}),t)}setSelection(e,t,n){null==e?this.selection.setRange(null,t||F.sources.API):([e,t,,n]=W(e,t,n),this.selection.setRange(new $(e,t),n),n!==T.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer))}setText(e,t=T.sources.API){let n=(new(r())).insert(e);return this.setContents(n,t)}update(e=T.sources.USER){let t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e,t=T.sources.API){return z.call(this,(()=>(e=new(r())(e),this.editor.applyDelta(e,t))),t,!0)}}function z(e,t,n,s){if(this.options.strict&&!this.isEnabled()&&t===T.sources.USER)return new(r());let i=null==n?null:this.getSelection(),a=this.editor.delta,o=e();if(null!=i&&(!0===n&&(n=i.index),null==s?i=G(i,o,t):0!==s&&(i=G(i,n,s,t)),this.setSelection(i,T.sources.SILENT)),o.length()>0){let e=[T.events.TEXT_CHANGE,o,a,t];this.emitter.emit(T.events.EDITOR_CHANGE,...e),t!==T.sources.SILENT&&this.emitter.emit(...e)}return o}function W(e,t,n,r,s){let i={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(s=r,r=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(s=r,r=n,n=t,t=0),"object"==typeof n?(i=n,s=r):"string"==typeof n&&(null!=r?i[n]=r:s=n),[e,t,i,s=s||T.sources.API]}function G(e,t,n,s){if(null==e)return null;let i,a;return t instanceof r()?[i,a]=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,s!==T.sources.USER)})):[i,a]=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&s===T.sources.USER?e:n>=0?e+n:Math.max(t,e+n)})),new $(i,a-i)}F.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},F.events=T.events,F.sources=T.sources,F.version="undefined"==typeof QUILL_VERSION?"dev":QUILL_VERSION,F.imports={delta:r(),parchment:e.Z,"core/module":L,"core/theme":K};class Z extends e.Z.Container{}Z.allowedChildren=[p,f,Z];const Q=Z,Y="\ufeff";class X extends e.Z.Embed{constructor(e){super(e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable",!1),[].slice.call(this.domNode.childNodes).forEach((e=>{this.contentNode.appendChild(e)})),this.leftGuard=document.createTextNode(Y),this.rightGuard=document.createTextNode(Y),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(t){let n,r,s=t.data.split(Y).join("");if(t===this.leftGuard)if(this.prev instanceof h){let e=this.prev.length();this.prev.insertAt(e,s),n={startNode:this.prev.domNode,startOffset:e+s.length}}else r=document.createTextNode(s),this.parent.insertBefore(e.Z.create(r),this),n={startNode:r,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof h?(this.next.insertAt(0,s),n={startNode:this.next.domNode,startOffset:s.length}):(r=document.createTextNode(s),this.parent.insertBefore(e.Z.create(r),this.next),n={startNode:r,startOffset:s.length}));return t.data=Y,n}update(e,t){e.forEach((e=>{if("characterData"===e.type&&(e.target===this.leftGuard||e.target===this.rightGuard)){let n=this.restore(e.target);n&&(t.range=n)}}))}}const ee=X;function te(e){return e instanceof p||e instanceof f}class ne extends e.Z.Scroll{constructor(e,t){super(e),this.emitter=t.emitter,Array.isArray(t.whitelist)&&(this.whitelist=t.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),this.domNode.addEventListener("DOMNodeInserted",(function(){})),this.optimize(),this.enable()}batchStart(){this.batch=!0}batchEnd(){this.batch=!1,this.optimize()}deleteAt(e,t){let[n,r]=this.line(e),[s]=this.line(e+t);if(super.deleteAt(e,t),null!=s&&n!==s&&r>0){if(n instanceof f||s instanceof f)return void this.optimize();if(n instanceof y){let e=n.newlineIndex(n.length(),!0);if(e>-1&&(n=n.split(e+1),n===s))return void this.optimize()}else if(s instanceof y){let e=s.newlineIndex(0);e>-1&&s.split(e+1)}let e=s.children.head instanceof c?null:s.children.head;n.moveChildren(s,e),n.remove()}this.optimize()}enable(e=!0){this.domNode.setAttribute("contenteditable",e)}formatAt(e,t,n,r){(null==this.whitelist||this.whitelist[n])&&(super.formatAt(e,t,n,r),this.optimize())}insertAt(t,n,r){if(null==r||null==this.whitelist||this.whitelist[n]){if(t>=this.length())if(null==r||null==e.Z.query(n,e.Z.Scope.BLOCK)){let t=e.Z.create(this.statics.defaultChild);this.appendChild(t),null==r&&n.endsWith("\n")&&(n=n.slice(0,-1)),t.insertAt(0,n,r)}else{let t=e.Z.create(n,r);this.appendChild(t)}else super.insertAt(t,n,r);this.optimize()}}insertBefore(t,n){if(t.statics.scope===e.Z.Scope.INLINE_BLOT){let n=e.Z.create(this.statics.defaultChild);n.appendChild(t),t=n}super.insertBefore(t,n)}leaf(e){return this.path(e).pop()||[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(te,e)}lines(t=0,n=Number.MAX_VALUE){let r=(t,n,s)=>{let i=[],a=s;return t.children.forEachAt(n,s,(function(t,n,s){te(t)?i.push(t):t instanceof e.Z.Container&&(i=i.concat(r(t,n,a))),a-=s})),i};return r(this,t,n)}optimize(e=[],t={}){!0!==this.batch&&(super.optimize(e,t),e.length>0&&this.emitter.emit(T.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}update(e){if(!0===this.batch)return;let t=T.sources.USER;"string"==typeof e&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(T.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(T.events.SCROLL_UPDATE,t,e)}}ne.blotName="scroll",ne.className="ql-editor",ne.tagName="DIV",ne.defaultChild="block",ne.allowedChildren=[p,f,Q];const re=ne;let se={scope:e.Z.Scope.BLOCK,whitelist:["right","center","justify"]},ie=new e.Z.Attributor.Attribute("align","align",se),ae=(new e.Z.Attributor.Class("align","ql-align",se),new e.Z.Attributor.Style("align","text-align",se));class oe extends e.Z.Attributor.Style{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+t.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):t}}new e.Z.Attributor.Class("color","ql-color",{scope:e.Z.Scope.INLINE});let le=new oe("color","color",{scope:e.Z.Scope.INLINE}),ce=(new e.Z.Attributor.Class("background","ql-bg",{scope:e.Z.Scope.INLINE}),new oe("background","background-color",{scope:e.Z.Scope.INLINE})),ue={scope:e.Z.Scope.BLOCK,whitelist:["rtl"]},he=new e.Z.Attributor.Attribute("direction","dir",ue),de=(new e.Z.Attributor.Class("direction","ql-direction",ue),new e.Z.Attributor.Style("direction","direction",ue)),me={scope:e.Z.Scope.INLINE,whitelist:["serif","monospace"]};new e.Z.Attributor.Class("font","ql-font",me);class fe extends e.Z.Attributor.Style{value(e){return super.value(e).replace(/["']/g,"")}}let pe=new fe("font","font-family",me),ge=(new e.Z.Attributor.Class("size","ql-size",{scope:e.Z.Scope.INLINE,whitelist:["small","large","huge"]}),new e.Z.Attributor.Style("size","font-size",{scope:e.Z.Scope.INLINE,whitelist:["10px","18px","32px"]})),be=H("quill:clipboard");const ye="__ql-matcher",ve=[[Node.TEXT_NODE,function(e,t){let n=e.data;if("O:P"===e.parentNode.tagName)return t.insert(n.trim());if(0===n.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!Ae(e.parentNode).whiteSpace.startsWith("pre")){let t=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};n=n.replace(/\r\n/g," ").replace(/\n/g," "),n=n.replace(/\s\s+/g,t.bind(t,!0)),(null==e.previousSibling&&Ce(e.parentNode)||null!=e.previousSibling&&Ce(e.previousSibling))&&(n=n.replace(/^\s+/,t.bind(t,!1))),(null==e.nextSibling&&Ce(e.parentNode)||null!=e.nextSibling&&Ce(e.nextSibling))&&(n=n.replace(/\s+$/,t.bind(t,!1)))}return t.insert(n)}],[Node.TEXT_NODE,Be],["br",function(e,t){return Ne(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,Be],[Node.ELEMENT_NODE,function(t,n){let s=e.Z.query(t);if(null==s)return n;if(s.prototype instanceof e.Z.Embed){let e={},i=s.value(t);null!=i&&(e[s.blotName]=i,n=(new(r())).insert(e,s.formats(t)))}else"function"==typeof s.formats&&(n=ke(n,s.blotName,s.formats(t)));return n}],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,function(t,n){let r=e.Z.Attributor.Attribute.keys(t),s=e.Z.Attributor.Class.keys(t),i=e.Z.Attributor.Style.keys(t),a={};return r.concat(s).concat(i).forEach((n=>{let r=e.Z.query(n,e.Z.Scope.ATTRIBUTE);null!=r&&(a[r.attrName]=r.value(t),a[r.attrName])||(r=we[n],null==r||r.attrName!==n&&r.keyName!==n||(a[r.attrName]=r.value(t)||void 0),r=Se[n],null==r||r.attrName!==n&&r.keyName!==n||(r=Se[n],a[r.attrName]=r.value(t)||void 0))})),Object.keys(a).length>0&&(n=ke(n,a)),n}],[Node.ELEMENT_NODE,function(e,t){let n={},s=e.style||{};return s.fontStyle&&"italic"===Ae(e).fontStyle&&(n.italic=!0),s.fontWeight&&(Ae(e).fontWeight.startsWith("bold")||parseInt(Ae(e).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(t=ke(t,n)),parseFloat(s.textIndent||0)>0&&(t=(new(r())).insert("\t").concat(t)),t}],["li",function(t,n){let s=e.Z.query(t);if(null==s||"list-item"!==s.blotName||!Ne(n,"\n"))return n;let i=-1,a=t.parentNode;for(;!a.classList.contains("ql-clipboard");)"list"===(e.Z.query(a)||{}).blotName&&(i+=1),a=a.parentNode;return i<=0?n:n.compose((new(r())).retain(n.length()-1).retain(1,{indent:i}))}],["b",Ee.bind(Ee,"bold")],["i",Ee.bind(Ee,"italic")],["style",function(){return new(r())}]],we=[ie,he].reduce((function(e,t){return e[t.keyName]=t,e}),{}),Se=[ae,ce,le,de,pe,ge].reduce((function(e,t){return e[t.keyName]=t,e}),{});class qe extends L{constructor(e,t){super(e,t),this.quill.root.addEventListener("paste",this.onPaste.bind(this)),this.container=this.quill.addContainer("ql-clipboard"),this.container.setAttribute("contenteditable",!0),this.container.setAttribute("tabindex",-1),this.matchers=[],ve.concat(this.options.matchers).forEach((([e,n])=>{(t.matchVisual||n!==Ie)&&this.addMatcher(e,n)}))}addMatcher(e,t){this.matchers.push([e,t])}convert(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();const t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[y.blotName]){const e=this.container.innerText;return this.container.innerHTML="",(new(r())).insert(e,{[y.blotName]:t[y.blotName]})}let[n,s]=this.prepareMatching(),i=xe(this.container,n,s);return Ne(i,"\n")&&null==i.ops[i.ops.length-1].attributes&&(i=i.compose((new(r())).retain(i.length()-1).delete(1))),be.log("convert",this.container.innerHTML,i),this.container.innerHTML="",i}dangerouslyPasteHTML(e,t,n=F.sources.API){if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,F.sources.SILENT);else{let s=this.convert(t);this.quill.updateContents((new(r())).retain(e).concat(s),n),this.quill.setSelection(e+s.length(),F.sources.SILENT)}}onPaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;let t=this.quill.getSelection(),n=(new(r())).retain(t.index),s=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(F.sources.SILENT),setTimeout((()=>{n=n.concat(this.convert()).delete(t.length),this.quill.updateContents(n,F.sources.USER),this.quill.setSelection(n.length()-t.length,F.sources.SILENT),this.quill.scrollingContainer.scrollTop=s,this.quill.focus()}),1)}prepareMatching(){let e=[],t=[];return this.matchers.forEach((n=>{let[r,s]=n;switch(r){case Node.TEXT_NODE:t.push(s);break;case Node.ELEMENT_NODE:e.push(s);break;default:[].forEach.call(this.container.querySelectorAll(r),(e=>{e[ye]=e[ye]||[],e[ye].push(s)}))}})),[e,t]}}function ke(e,t,n){return"object"==typeof t?Object.keys(t).reduce((function(e,n){return ke(e,n,t[n])}),e):e.reduce((function(e,r){return r.attributes&&r.attributes[t]?e.push(r):e.insert(r.insert,o()({},{[t]:n},r.attributes))}),new(r()))}function Ae(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};const t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function Ne(e,t){let n="";for(let r=e.ops.length-1;r>=0&&n.length<t.length;--r){let t=e.ops[r];if("string"!=typeof t.insert)break;n=t.insert+n}return n.slice(-1*t.length)===t}function Ce(e){if(0===e.childNodes.length)return!1;let t=Ae(e);return["block","list-item"].indexOf(t.display)>-1}function xe(e,t,n){return e.nodeType===e.TEXT_NODE?n.reduce((function(t,n){return n(e,t)}),new(r())):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],((r,s)=>{let i=xe(s,t,n);return s.nodeType===e.ELEMENT_NODE&&(i=t.reduce((function(e,t){return t(s,e)}),i),i=(s[ye]||[]).reduce((function(e,t){return t(s,e)}),i)),r.concat(i)}),new(r())):new(r())}function Ee(e,t,n){return ke(n,e,!0)}function Be(e,t){return Ne(t,"\n")||(Ce(e)||t.length()>0&&e.nextSibling&&Ce(e.nextSibling))&&t.insert("\n"),t}function Ie(e,t){if(Ce(e)&&null!=e.nextElementSibling&&!Ne(t,"\n\n")){let n=e.offsetHeight+parseFloat(Ae(e).marginTop)+parseFloat(Ae(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*n&&t.insert("\n")}return t}qe.DEFAULTS={matchers:[],matchVisual:!0};class Ve extends L{constructor(e,t){super(e,t),this.lastRecorded=0,this.ignoreChange=!1,this.clear(),this.quill.on(F.events.EDITOR_CHANGE,((e,t,n,r)=>{e!==F.events.TEXT_CHANGE||this.ignoreChange||(this.options.userOnly&&r!==F.sources.USER?this.transform(t):this.record(t,n))})),this.quill.keyboard.addBinding({key:"Z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"Y",shortKey:!0},this.redo.bind(this))}change(t,n){if(0===this.stack[t].length)return;let r=this.stack[t].pop();this.stack[n].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[t],F.sources.USER),this.ignoreChange=!1;let s=function(t){let n=t.reduce((function(e,t){return e+(t.delete||0)}),0),r=t.length()-n;return function(t){let n=t.ops[t.ops.length-1];return null!=n&&(null!=n.insert?"string"==typeof n.insert&&n.insert.endsWith("\n"):null!=n.attributes&&Object.keys(n.attributes).some((function(t){return null!=e.Z.query(t,e.Z.Scope.BLOCK)})))}(t)&&(r-=1),r}(r[t]);this.quill.setSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(0===e.ops.length)return;this.stack.redo=[];let n=this.quill.getContents().diff(t),r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){let t=this.stack.undo.pop();n=n.compose(t.undo),e=t.redo.compose(e)}else this.lastRecorded=r;this.stack.undo.push({redo:e,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}redo(){this.change("redo","undo")}transform(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}undo(){this.change("undo","redo")}}Ve.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};let Oe=H("quill:keyboard");const He=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class De extends L{static match(e,t){return t=je(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!t[n]!==e[n]&&null!==t[n]}))&&t.key===(e.which||e.keyCode)}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach((t=>{("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&this.options.bindings[t]&&this.addBinding(this.options.bindings[t])})),this.addBinding({key:De.keys.ENTER,shiftKey:null},Ue),this.addBinding({key:De.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:De.keys.BACKSPACE},{collapsed:!0},Te),this.addBinding({key:De.keys.DELETE},{collapsed:!0},Re)):(this.addBinding({key:De.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Te),this.addBinding({key:De.keys.DELETE},{collapsed:!0,suffix:/^.?$/},Re)),this.addBinding({key:De.keys.BACKSPACE},{collapsed:!1},Le),this.addBinding({key:De.keys.DELETE},{collapsed:!1},Le),this.addBinding({key:De.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Te),this.listen()}addBinding(e,t={},n={}){let r=je(e);if(null==r||null==r.key)return Oe.warn("Attempted to add invalid keyboard binding",r);"function"==typeof t&&(t={handler:t}),"function"==typeof n&&(n={handler:n}),r=o()(r,t,n),this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}listen(){this.quill.root.addEventListener("keydown",(t=>{if(t.defaultPrevented)return;let n=t.which||t.keyCode,r=(this.bindings[n]||[]).filter((function(e){return De.match(t,e)}));if(0===r.length)return;let s=this.quill.getSelection();if(null==s||!this.quill.hasFocus())return;let[i,a]=this.quill.getLine(s.index),[o,l]=this.quill.getLeaf(s.index),[c,u]=0===s.length?[o,l]:this.quill.getLeaf(s.index+s.length),h=o instanceof e.Z.Text?o.value().slice(0,l):"",d=c instanceof e.Z.Text?c.value().slice(u):"",m={collapsed:0===s.length,empty:0===s.length&&i.length()<=1,format:this.quill.getFormat(s),offset:a,prefix:h,suffix:d};r.some((e=>{if(null!=e.collapsed&&e.collapsed!==m.collapsed)return!1;if(null!=e.empty&&e.empty!==m.empty)return!1;if(null!=e.offset&&e.offset!==m.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(e){return null==m.format[e]})))return!1}else if("object"==typeof e.format&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=m.format[t]:!1===e.format[t]?null==m.format[t]:A()(e.format[t],m.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(m.prefix)||null!=e.suffix&&!e.suffix.test(m.suffix)||!0===e.handler.call(this,s,m))}))&&t.preventDefault()}))}}function Pe(t,n){const r=t===De.keys.LEFT?"prefix":"suffix";return{key:t,shiftKey:n,altKey:null,[r]:/^$/,handler:function(r){let s=r.index;t===De.keys.RIGHT&&(s+=r.length+1);const[i]=this.quill.getLeaf(s);return!(i instanceof e.Z.Embed&&(t===De.keys.LEFT?n?this.quill.setSelection(r.index-1,r.length+1,F.sources.USER):this.quill.setSelection(r.index-1,F.sources.USER):n?this.quill.setSelection(r.index,r.length+1,F.sources.USER):this.quill.setSelection(r.index+r.length+1,F.sources.USER),1))}}}function Te(e,t){if(0===e.index||this.quill.getLength()<=1)return;let[n]=this.quill.getLine(e.index),r={};if(0===t.offset){let[t]=this.quill.getLine(e.index-1);if(null!=t&&t.length()>1){let t=n.formats(),s=this.quill.getFormat(e.index-1,1);r=i().attributes.diff(t,s)||{}}}let s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-s,s,F.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index-s,s,r,F.sources.USER),this.quill.focus()}function Re(e,t){let n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-n)return;let r={},s=0,[a]=this.quill.getLine(e.index);if(t.offset>=a.length()-1){let[t]=this.quill.getLine(e.index+1);if(t){let n=a.formats(),o=this.quill.getFormat(e.index,1);r=i().attributes.diff(n,o)||{},s=t.length()}}this.quill.deleteText(e.index,n,F.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index+s-1,n,r,F.sources.USER)}function Le(e){let t=this.quill.getLines(e),n={};if(t.length>1){let e=t[0].formats(),r=t[t.length-1].formats();n=i().attributes.diff(r,e)||{}}this.quill.deleteText(e,F.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index,1,n,F.sources.USER),this.quill.setSelection(e.index,F.sources.SILENT),this.quill.focus()}function Ue(t,n){t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);let r=Object.keys(n.format).reduce((function(t,r){return e.Z.query(r,e.Z.Scope.BLOCK)&&!Array.isArray(n.format[r])&&(t[r]=n.format[r]),t}),{});this.quill.insertText(t.index,"\n",r,F.sources.USER),this.quill.setSelection(t.index+1,F.sources.SILENT),this.quill.focus(),Object.keys(n.format).forEach((e=>{null==r[e]&&(Array.isArray(n.format[e])||"link"!==e&&this.quill.format(e,n.format[e],F.sources.USER))}))}function $e(t){return{key:De.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(n){let r=e.Z.query("code-block"),s=n.index,i=n.length,[a,o]=this.quill.scroll.descendant(r,s);if(null==a)return;let l=this.quill.getIndex(a),c=a.newlineIndex(o,!0)+1,u=a.newlineIndex(l+o+i),h=a.domNode.textContent.slice(c,u).split("\n");o=0,h.forEach(((e,n)=>{t?(a.insertAt(c+o,r.TAB),o+=r.TAB.length,0===n?s+=r.TAB.length:i+=r.TAB.length):e.startsWith(r.TAB)&&(a.deleteAt(c+o,r.TAB.length),o-=r.TAB.length,0===n?s-=r.TAB.length:i-=r.TAB.length),o+=e.length+1})),this.quill.update(F.sources.USER),this.quill.setSelection(s,i,F.sources.SILENT)}}}function _e(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,n){this.quill.format(e,!n.format[e],F.sources.USER)}}}function je(e){if("string"==typeof e||"number"==typeof e)return je({key:e});if("object"==typeof e&&(e=q()(e,!1)),"string"==typeof e.key)if(null!=De.keys[e.key.toUpperCase()])e.key=De.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[He]=e.shortKey,delete e.shortKey),e}De.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},De.DEFAULTS={bindings:{bold:_e("bold"),italic:_e("italic"),underline:_e("underline"),indent:{key:De.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",F.sources.USER)}},outdent:{key:De.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",F.sources.USER)}},"outdent backspace":{key:De.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",F.sources.USER):null!=t.format.list&&this.quill.format("list",!1,F.sources.USER)}},"indent code-block":$e(!0),"outdent code-block":$e(!1),"remove tab":{key:De.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,F.sources.USER)}},tab:{key:De.keys.TAB,handler:function(e){this.quill.history.cutoff();let t=(new(r())).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,F.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,F.sources.SILENT)}},"list empty enter":{key:De.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,F.sources.USER),t.format.indent&&this.quill.format("indent",!1,F.sources.USER)}},"checklist enter":{key:De.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){let[t,n]=this.quill.getLine(e.index),s=o()({},t.formats(),{list:"checked"}),i=(new(r())).retain(e.index).insert("\n",s).retain(t.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,F.sources.USER),this.quill.setSelection(e.index+1,F.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:De.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){let[n,s]=this.quill.getLine(e.index),i=(new(r())).retain(e.index).insert("\n",t.format).retain(n.length()-s-1).retain(1,{header:null});this.quill.updateContents(i,F.sources.USER),this.quill.setSelection(e.index+1,F.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){let n,s=t.prefix.length,[i,a]=this.quill.getLine(e.index);if(a>s)return!0;switch(t.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(e.index," ",F.sources.USER),this.quill.history.cutoff();let o=(new(r())).retain(e.index-a).delete(s+1).retain(i.length()-2-a).retain(1,{list:n});this.quill.updateContents(o,F.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-s,F.sources.SILENT)}},"code exit":{key:De.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){const[t,n]=this.quill.getLine(e.index),s=(new(r())).retain(e.index+t.length()-n-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(s,F.sources.USER)}},"embed left":Pe(De.keys.LEFT,!1),"embed left shift":Pe(De.keys.LEFT,!0),"embed right":Pe(De.keys.RIGHT,!1),"embed right shift":Pe(De.keys.RIGHT,!0)}},F.register({"blots/block":p,"blots/block/embed":f,"blots/break":c,"blots/container":Q,"blots/cursor":w,"blots/embed":ee,"blots/inline":m,"blots/scroll":re,"blots/text":h,"modules/clipboard":qe,"modules/history":Ve,"modules/keyboard":De}),e.Z.register(p,c,w,m,re,h);const Me=F;let Ke=H("quill:toolbar");class Je extends L{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){let t=document.createElement("div");!function(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){let n=document.createElement("span");n.classList.add("ql-formats"),t.forEach((function(e){if("string"==typeof e)Fe(n,e);else{let t=Object.keys(e)[0],r=e[t];Array.isArray(r)?function(e,t,n){let r=document.createElement("select");r.classList.add("ql-"+t),n.forEach((function(e){let t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),r.appendChild(t)})),e.appendChild(r)}(n,t,r):Fe(n,t,r)}})),e.appendChild(n)}))}(t,this.options.container),e.container.parentNode.insertBefore(t,e.container),this.container=t}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement))return Ke.error("Container required for toolbar",this.options);this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},Object.keys(this.options.handlers).forEach((e=>{this.addHandler(e,this.options.handlers[e])})),[].forEach.call(this.container.querySelectorAll("button, select"),(e=>{this.attach(e)})),this.quill.on(F.events.EDITOR_CHANGE,((e,t)=>{e===F.events.SELECTION_CHANGE&&this.update(t)})),this.quill.on(F.events.SCROLL_OPTIMIZE,(()=>{let[e]=this.quill.selection.getRange();this.update(e)}))}addHandler(e,t){this.handlers[e]=t}attach(t){let n=[].find.call(t.classList,(e=>0===e.indexOf("ql-")));if(!n)return;if(n=n.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void Ke.warn("ignoring attaching to disabled format",n,t);if(null==e.Z.query(n))return void Ke.warn("ignoring attaching to nonexistent format",n,t)}let s="SELECT"===t.tagName?"change":"click";t.addEventListener(s,(s=>{let i;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;let e=t.options[t.selectedIndex];i=!e.hasAttribute("selected")&&(e.value||!1)}else i=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),s.preventDefault();this.quill.focus();let[a]=this.quill.selection.getRange();if(null!=this.handlers[n])this.handlers[n].call(this,i);else if(e.Z.query(n).prototype instanceof e.Z.Embed){if(i=prompt(`Enter ${n}`),!i)return;this.quill.updateContents((new(r())).retain(a.index).delete(a.length).insert({[n]:i}),F.sources.USER)}else this.quill.format(n,i,F.sources.USER);this.update(a)})),this.controls.push([n,t])}update(e){let t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(n){let[r,s]=n;if("SELECT"===s.tagName){let n;if(null==e)n=null;else if(null==t[r])n=s.querySelector("option[selected]");else if(!Array.isArray(t[r])){let e=t[r];"string"==typeof e&&(e=e.replace(/\"/g,'\\"')),n=s.querySelector(`option[value="${e}"]`)}null==n?(s.value="",s.selectedIndex=-1):n.selected=!0}else if(null==e)s.classList.remove("ql-active");else if(s.hasAttribute("value")){let e=t[r]===s.getAttribute("value")||null!=t[r]&&t[r].toString()===s.getAttribute("value")||null==t[r]&&!s.getAttribute("value");s.classList.toggle("ql-active",e)}else s.classList.toggle("ql-active",null!=t[r])}))}}function Fe(e,t,n){let r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("ql-"+t),null!=n&&(r.value=n),e.appendChild(r)}Je.DEFAULTS={},Je.DEFAULTS={container:null,handlers:{clean:function(){let t=this.quill.getSelection();if(null!=t)if(0==t.length){let t=this.quill.getFormat();Object.keys(t).forEach((t=>{null!=e.Z.query(t,e.Z.Scope.INLINE)&&this.quill.format(t,!1)}))}else this.quill.removeFormat(t,F.sources.USER)},direction:function(e){let t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",F.sources.USER):e||"right"!==t||this.quill.format("align",!1,F.sources.USER),this.quill.format("direction",e,F.sources.USER)},indent:function(e){let t=this.quill.getSelection(),n=this.quill.getFormat(t),r=parseInt(n.indent||0);if("+1"===e||"-1"===e){let t="+1"===e?1:-1;"rtl"===n.direction&&(t*=-1),this.quill.format("indent",r+t,F.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,F.sources.USER)},list:function(e){let t=this.quill.getSelection(),n=this.quill.getFormat(t);"check"===e?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,F.sources.USER):this.quill.format("list","unchecked",F.sources.USER):this.quill.format("list",e,F.sources.USER)}}};var ze=n(3638),We=n.n(ze);let Ge=0;function Ze(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}const Qe=class{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(e=>{switch(e.keyCode){case De.keys.ENTER:this.togglePicker();break;case De.keys.ESCAPE:this.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Ze(this.label,"aria-expanded"),Ze(this.options,"aria-hidden")}buildItem(e){let t=document.createElement("span");return t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item"),e.hasAttribute("value")&&t.setAttribute("data-value",e.getAttribute("value")),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",(()=>{this.selectItem(t,!0)})),t.addEventListener("keydown",(e=>{switch(e.keyCode){case De.keys.ENTER:this.selectItem(t,!0),e.preventDefault();break;case De.keys.ESCAPE:this.escape(),e.preventDefault()}})),t}buildLabel(){let e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=We(),e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){let e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Ge}`,Ge+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,[].slice.call(this.select.options).forEach((t=>{let n=this.buildItem(t);e.appendChild(n),!0===t.selected&&this.selectItem(n)})),this.container.appendChild(e)}buildPicker(){[].slice.call(this.select.attributes).forEach((e=>{this.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e,t=!1){let n=this.container.querySelector(".ql-selected");if(e!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"==typeof Event){let e=document.createEvent("Event");e.initEvent("change",!0,!0),this.select.dispatchEvent(e)}this.close()}}update(){let e;if(this.select.selectedIndex>-1){let t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);let t=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}},Ye=class extends Qe{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),[].slice.call(this.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")}))}buildItem(e){let t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);let n=this.label.querySelector(".ql-color-label"),r=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=r:n.style.fill=r)}},Xe=class extends Qe{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),[].forEach.call(this.container.querySelectorAll(".ql-picker-item"),(e=>{e.innerHTML=t[e.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}},et=class{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){let t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");let r=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect(),i=0;if(s.right>r.right&&(i=r.right-s.right,this.root.style.left=t+i+"px"),s.left<r.left&&(i=r.left-s.left,this.root.style.left=t+i+"px"),s.bottom>r.bottom){let t=s.bottom-s.top,r=e.bottom-e.top+t;this.root.style.top=n-r+"px",this.root.classList.add("ql-flip")}return i}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},tt=[!1,"center","right","justify"],nt=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],rt=[!1,"serif","monospace"],st=["1","2","3",!1],it=["small",!1,"large","huge"];class at extends K{constructor(e,t){super(e,t);let n=t=>{if(!document.body.contains(e.root))return document.body.removeEventListener("click",n);null==this.tooltip||this.tooltip.root.contains(t.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((function(e){e.container.contains(t.target)||e.close()}))};e.emitter.listenDOM("click",document.body,n)}addModule(e){let t=super.addModule(e);return"toolbar"===e&&this.extendToolbar(t),t}buildButtons(e,t){e.forEach((e=>{(e.getAttribute("class")||"").split(/\s+/).forEach((n=>{if(n.startsWith("ql-")&&(n=n.slice(3),null!=t[n]))if("direction"===n)e.innerHTML=t[n][""]+t[n].rtl;else if("string"==typeof t[n])e.innerHTML=t[n];else{let r=e.value||"";null!=r&&t[n][r]&&(e.innerHTML=t[n][r])}}))}))}buildPickers(e,t){this.pickers=e.map((e=>{if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&lt(e,tt),new Xe(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){let n=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&lt(e,nt,"background"===n?"#ffffff":"#000000"),new Ye(e,t[n])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?lt(e,rt):e.classList.contains("ql-header")?lt(e,st):e.classList.contains("ql-size")&&lt(e,it)),new Qe(e)})),this.quill.on(T.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((function(e){e.update()}))}))}}at.DEFAULTS=o()(!0,{},K.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){let e=this.container.querySelector("input.ql-image[type=file]");null==e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",(()=>{if(null!=e.files&&null!=e.files[0]){let t=new FileReader;t.onload=t=>{let n=this.quill.getSelection(!0);this.quill.updateContents((new(r())).retain(n.index).delete(n.length).insert({image:t.target.result}),T.sources.USER),this.quill.setSelection(n.index+1,T.sources.SILENT),e.value=""},t.readAsDataURL(e.files[0])}})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});class ot extends et{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(e=>{De.match(e,"enter")?(this.save(),e.preventDefault()):De.match(e,"escape")&&(this.cancel(),e.preventDefault())}))}cancel(){this.hide()}edit(e="link",t=null){this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){let e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}save(){let e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{let t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,T.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,T.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=function(e){let t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}(e);case"formula":{if(!e)break;let t=this.quill.getSelection(!0);if(null!=t){let n=t.index+t.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,T.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",T.sources.USER),this.quill.setSelection(n+2,T.sources.USER)}break}}this.textbox.value="",this.hide()}}function lt(e,t,n=!1){t.forEach((function(t){let r=document.createElement("option");t===n?r.setAttribute("selected","selected"):r.setAttribute("value",t),e.appendChild(r)}))}class ct extends m{static create(e){let t=super.create(e);return e=this.sanitize(e),t.setAttribute("href",e),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return function(e,t){let n=document.createElement("a");n.href=e;let r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){if(e!==this.statics.blotName||!t)return super.format(e,t);t=this.constructor.sanitize(t),this.domNode.setAttribute("href",t)}}ct.blotName="link",ct.tagName="A",ct.SANITIZED_URL="about:blank",ct.PROTOCOL_WHITELIST=["http","https","mailto","tel"];var ut=n(3964),ht=n.n(ut);const dt=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class mt extends at{constructor(e,t){null!=t.modules.toolbar&&null==t.modules.toolbar.container&&(t.modules.toolbar.container=dt),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),ht()),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),ht()),this.tooltip=new ft(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,n){e.handlers.link.call(e,!n.format.link)}))}}mt.DEFAULTS=o()(!0,{},at.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){let e=this.quill.getSelection();if(null==e||0==e.length)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&0!==t.indexOf("mailto:")&&(t="mailto:"+t),this.quill.theme.tooltip.edit("link",t)}else this.quill.format("link",!1)}}}}});class ft extends ot{constructor(e,t){super(e,t),this.preview=this.root.querySelector("a.ql-preview")}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(e=>{if(null!=this.linkRange){let e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,T.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()})),this.quill.on(T.events.SELECTION_CHANGE,((e,t,n)=>{if(null!=e){if(0===e.length&&n===T.sources.USER){let[t,n]=this.quill.scroll.descendant(ct,e.index);if(null!=t){this.linkRange=new $(e.index-n,t.length());let r=ct.formats(t.domNode);return this.preview.textContent=r,this.preview.setAttribute("href",r),this.show(),void this.position(this.quill.getBounds(this.linkRange))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}ft.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");const pt=mt;class gt extends m{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}gt.blotName="bold",gt.tagName=["STRONG","B"];const bt=gt;class yt extends bt{}yt.blotName="italic",yt.tagName=["EM","I"];const vt=yt;class wt extends p{static formats(e){return this.tagName.indexOf(e.tagName)+1}}wt.blotName="header",wt.tagName=["H1","H2","H3","H4","H5","H6"];const St=wt;var qt=n(3379),kt=n.n(qt),At=n(7795),Nt=n.n(At),Ct=n(569),xt=n.n(Ct),Et=n(3565),Bt=n.n(Et),It=n(9216),Vt=n.n(It),Ot=n(4589),Ht=n.n(Ot),Dt=n(5426),Pt={};Pt.styleTagTransform=Ht(),Pt.setAttributes=Bt(),Pt.insert=xt().bind(null,"head"),Pt.domAPI=Nt(),Pt.insertStyleElement=Vt(),kt()(Dt.Z,Pt),Dt.Z&&Dt.Z.locals&&Dt.Z.locals;const Tt=n(8514),Rt=n(3494),Lt=n(3162),Ut=n(7918);Me.register({"modules/toolbar":Je,"themes/snow":pt,"formats/bold":bt,"formats/italic":vt,"formats/header":St});var $t=new Me("#editor-container",{modules:{toolbar:!0},placeholder:"Compose an epic...",theme:"snow"}),_t=[],jt=!1,Mt=[],Kt=e=>{jt?Mt.push(e):_t.push(e)};$t.on("text-change",(function(e){Kt({type:"delta",time:Date.now(),delta:e})}));var Jt=e=>new TextEncoder("utf-8").encode(e);function Ft(e){let t=new Uint8Array(e.length/2);for(let n=0,r=0;n<e.length;n+=2,r+=1)t[r]=parseInt(e.substr(n,2),16);return t}const zt=(()=>{var e=function(e){for(var t=atob("MIIG7DCCBNSgAwIBAgIQMA9vrN1mmHR8qUY2p3gtuTANBgkqhkiG9w0BAQwFADCBiDELMAkGA1UEBhMCVVMxEzARBgNVBAgTCk5ldyBKZXJzZXkxFDASBgNVBAcTC0plcnNleSBDaXR5MR4wHAYDVQQKExVUaGUgVVNFUlRSVVNUIE5ldHdvcmsxLjAsBgNVBAMTJVVTRVJUcnVzdCBSU0EgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNMTkwNTAyMDAwMDAwWhcNMzgwMTE4MjM1OTU5WjB9MQswCQYDVQQGEwJHQjEbMBkGA1UECBMSR3JlYXRlciBNYW5jaGVzdGVyMRAwDgYDVQQHEwdTYWxmb3JkMRgwFgYDVQQKEw9TZWN0aWdvIExpbWl0ZWQxJTAjBgNVBAMTHFNlY3RpZ28gUlNBIFRpbWUgU3RhbXBpbmcgQ0EwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDIGwGv2Sx+iJl9AZg/IJC9nIAhVJO5z6A+U++zWsB21hoEpc5Hg7XrxMxJNMvzRWW5+adkFiYJ+9UyUnkuyWPCE5u2hj8BBZJmbyGr1XEQeYf0RirNxFrJ29ddSU1yVg/cyeNTmDoqHvzOWEnTv/M5u7mkI0Ks0BXDf56iXNc48RaycNOjxN+zxXKsLgp3/A2UUrf8H5VzJD0BKLwPDU+zkQGObp0ndVXRFzs0IXuXAZSvf4DP0REKV4TJf1bgvUacgr6Unb+0ILBgfrhN9Q0/29DqhYyKVnHRLZRMyIw80xSinL0m/9NTIMdgaZtYClT0Bef9Maz5yIUXx7gpGaQpL0bj3duRX58/Nj4OMGcrRrc1r5a+2kxgzKi7nw0U1BjEMJh0giHPYla1IXMSHv2qyghYh3ekFesZVf/QOVQtJu5FGjpvzdeE8NfwKMVPZIMC1Pvi3vG8Aij0bdonigbSlofe6GsO8Ft96XZpkyAcSpcsdxkrk5WYnJee647BeFbGRCXfBhKaBi2fA179g6JTZ8qx+o2hZMmIklnLqEbAyfKm/31X2xJ2+opBJNQb/HKlFKLUrUMcpEmLQTkUAx4p+hulIq6lw02C0I3aa7fb9xhAV3PwcaP7Sn1FNsH3jYL6uckNU4B9+rY5WDLvbxhQiddPnTO9GrWdod6VQXqngwIDAQABo4IBWjCCAVYwHwYDVR0jBBgwFoAUU3m/WqorSs9UgOHYm8Cd8rIDZsswHQYDVR0OBBYEFBqh+GEZIA/DQXdFKI7RNV8GEgRVMA4GA1UdDwEB/wQEAwIBhjASBgNVHRMBAf8ECDAGAQH/AgEAMBMGA1UdJQQMMAoGCCsGAQUFBwMIMBEGA1UdIAQKMAgwBgYEVR0gADBQBgNVHR8ESTBHMEWgQ6BBhj9odHRwOi8vY3JsLnVzZXJ0cnVzdC5jb20vVVNFUlRydXN0UlNBQ2VydGlmaWNhdGlvbkF1dGhvcml0eS5jcmwwdgYIKwYBBQUHAQEEajBoMD8GCCsGAQUFBzAChjNodHRwOi8vY3J0LnVzZXJ0cnVzdC5jb20vVVNFUlRydXN0UlNBQWRkVHJ1c3RDQS5jcnQwJQYIKwYBBQUHMAGGGWh0dHA6Ly9vY3NwLnVzZXJ0cnVzdC5jb20wDQYJKoZIhvcNAQEMBQADggIBAG1UgaUzXRbhtVOBkXXfA3oyCy0lhBGysNsqfSoF9bw7J/RaoLlJWZApbGHLtVDb4n35nwDvQMOt0+LkVvlYQc/xQuUQff+wdB+PxlwJ+TNe6qAcJlhc87QRD9XVw+K81Vh4v0h24URnbY+wQxAPjeT5OGK/EwHFhaNMxcyyUzCVpNb0llYIuM1cfwGWvnJSajtCN3wWeDmTk5SbsdyybUFtZ83Jb5A9f0VywRsj1sJVhGbks8VmBvbz1kteraMrQoohkv6ob1olcGKBc2NeoLvY3NdK0z2vgwY4Eh0khy3k/ALWPncEvAQ2ted3y5wujSMYuaPCRx3wXdahc1cFaJqnyTdlHb7qvNhCg0MFpYumCf/RoZSmTqo9CfUFbLfSZFrYKiLCS53xOV5M3kg9mzSWmglfjv33sVKRzj+J9hyhtal1H3G/W0NdZT1QgW6r8NDT/LKzH7aZlib0PHmLXGTMze4nmuWgwAxyh8FuTVrTHurwROYybxzrF06Uw3hlIDsPQaof6aFBnf6xuKBlKjTg3qj5PObBMLvAoGMs/FwWAKjQxH/qEZ0eBsambTJdtDgJK0kHqv3sMNrxpy/Pt/360KOE2See+wFmd7lWEOEgbsausfm2usg1XTN2jvF8IAwqd661ogKGuinutFoAsYyr4/kKyVRd1LlqdJ69SK6Y"),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}();const t=Rt.fromBER(e);return new Tt.Certificate({schema:t.result})})();var Wt=async(e,t)=>{var n={signer:0,data:e,trustedCerts:[zt],checkChain:!0},r=!1;try{r=await t.verify(n)}catch(e){r=!1}return r},Gt=async()=>{if(_t.length>0&&"delta"===_t[_t.length-1].type){Kt({type:"document",time:Date.now(),contents:$t.getContents()}),jt=!0;var e,t=function(){if(0==_t.length)return _t;for(var e=_t.length-1;e>=0&&"timestamp"!==_t[e].type;e--);return e>=0?_t.slice(e):_t}(),n=Ut(t),r=Jt(n),s=await(async e=>{return new Tt.TimeStampReq({version:1,messageImprint:await Tt.MessageImprint.create("SHA-256",e),certReq:!0,nonce:(t=new ArrayBuffer(8),n=new Uint8Array(t),crypto.getRandomValues(n),new Rt.Integer({valueHex:t}))});var t,n})(r),i=s.toSchema().toBER();try{e=await fetch("http://timestamp.sectigo.com/",{method:"POST",headers:{"Content-Type":"application/timestamp-query"},body:i})}catch(e){return!1}var a=await(await e.blob()).arrayBuffer(),o=Tt.TimeStampResp.fromBER(a);if(await Wt(r,o)){var l={type:"timestamp",timestamp:o.toString()};_t.push(l)}else console.log("Unable to validate timestamp server response. The certificate validation chain was likely invalid. By default this program trusts the Sectigo TSA Root Certificate, which expires on Jan 18, 2038.");_t.push.apply(_t,Mt),Mt=[],jt=!1}return!0};setInterval(Gt,2e4),document.getElementById("export-history-button").onclick=async()=>{if(await Gt()){var e=new Blob([Ut(_t)],{type:"text/plain;charset=utf-8"});Lt.saveAs(e,"demo-document.json")}else alert("Failed to timestamp document with Sectigo Timestamp Authority (TSA). This is typically caused by CORS restrictions being enabled in your browser settings, but it could also occur if the TSA is down or otherwise unreachable.")};let Zt=e=>"string"==typeof e||e instanceof String,Qt=e=>!isNaN(e)&&"number"==typeof e;document.getElementById("verify-file-chooser").addEventListener("change",(function(){var e=new FileReader;e.onload=async()=>{try{var t=JSON.parse(e.result);(e=>{if(Array.isArray(e)){for(var t=null,n=0;n<e.length;n+=1){var r=e[n];if(null===(s=r)||"object"!=typeof s||!r.hasOwnProperty("type"))return!1;if("timestamp"===r.type){if(!r.hasOwnProperty("timestamp")||!Zt(r.timestamp)||"document"!==t)return!1}else if("delta"===r.type){if(!(r.hasOwnProperty("time")&&Qt(r.time)&&r.hasOwnProperty("delta")))return!1}else if("document"===r.type&&!(r.hasOwnProperty("time")&&Qt(r.time)&&r.hasOwnProperty("contents")))return!1;t=r.type}return!0}return!1;var s})(t)?await(async e=>{if(e.length>0){if("timestamp"!==e[e.length-1].type)return!1;for(var t=0,n=0;n<e.length;n+=1)if("timestamp"===e[n].type){var r=e.slice(t,n),s=Ut(r),i=Jt(s),a=Tt.TimeStampResp.fromBER(Ft(e[n].timestamp));if(!await Wt(i,a))return!1;t=n}for(var o=null,l=0;l<e.length;l+=1)if("delta"===e[l].type||"document"===e[l].type){var c=e[l].time;if(null!==o&&o>c)return!1;o=c}for(n=0;l<e.length;n+=1)if("timestamp"===e[n].type){var u=e[n-1].time,h=new Date(u-1e4),d=(a=Tt.TimeStampResp.fromBER(Ft(e[n].timestamp)),new Tt.SignedData({schema:a.timeStampToken.content})),m=Tt.TSTInfo.fromBER(d.encapContentInfo.eContent.valueBlock.valueHexView).genTime;if(h>m)return!1;if(n+1<e.length){var f=e[n+1].time;if(m>new Date(f+1e4))return!1}}}return!0})(t)?alert("Your edit history passed the verification check!"):alert("Your edit history failed the verification check!"):alert("Input file did not have a valid schema.")}catch(e){console.log(e),alert("Input file was not valid JSON.")}},this.files.length>0&&e.readAsText(this.files[0])}))})()})();